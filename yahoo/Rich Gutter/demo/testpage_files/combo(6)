
/* socialchrome-conf.js 312193 */ YUI.add("media-socialchrome-conf",function(b){function a(d){var c={APP_ID:{value:""},fbuid:{value:""},fbexpires:{value:""},enable_code_exchange:{value:""},yahoo_id:{value:""},signin_url:{value:""},signed_idp:{value:""},csrcpvid:{value:""},ult_beacon:{value:""},ult_redirect:{value:""},sc_crumb:{value:""},optin_status:{value:""},tid:{value:""},reminder:{value:""},noexperience:{value:""},initact:{value:""},rf:{value:""},region:{value:""},page_type:{value:""},enable_ywa:{value:""},project_id:{value:""},lang:{value:""},intl:{value:""},action_type:{value:""},enable_watch_posting:{value:""},enable_socialchrome:{value:""},consent_max_remind:{value:""},consent_remind_frequency:{value:""},consent_type:{value:""},consent_status:{value:""},timestamp:{value:""},CONF:{value:{}},PAGE_META:{value:{}},XHR:{value:{}},FRIEND_LIST:{value:{}},NEWS_FEED:{value:{}}};this.addAttrs(c,d)}if(typeof b.Media=="undefined"){b.Media={}}if(typeof b.Media.SocialChrome=="undefined"){b.Media.SocialChrome={}}b.Media.SocialChrome.Conf=a;b.augment(b.Media.SocialChrome.Conf,b.Attribute)},"1.0",{requires:["base","node","event","attribute"]});
/* socialchrome-base.js 313158 */ YUI.add("media-socialchrome-base",function(d){var a=d.config.win,c=d.Lang;function b(g){this.l10n=d.Intl.get("media-socialchrome-strings");this._data={};var f={};for(var e in arguments[0]){f[e]={value:arguments[0][e]}}this._data=d.merge(this.constructor.superclass.constructor.ATTRS,this.constructor.ATTRS,f);this._data.contentBox=this._data.srcNode;this.initializer_base();this.initializer()}b.NAME="Base";b.ATTRS={moduleConf:{value:null}};b.prototype={pagedata:"",unames:{},initializer:function(){},initializer_base:function(){this.CONF=this.get("moduleConf");this.action_type=this.CONF.get("action_type");if(this.CONF.get("enable_code_exchange")==1){this.cname="yfbs_"+this.CONF.get("APP_ID")}else{this.cname="fbs_"+this.CONF.get("APP_ID")}this.page_load_time=Math.round(new Date().getTime()/1000);this.mod_login=d.one(".yom-socialchrome-login");this.mod_friends=d.one(".socialchrome-grid");this.publish({"scbase:fb_status_login":{broadcast:2,emitFacade:true},"scbase:fb_status_logout":{broadcast:2,emitFacade:true},"scbase:fb_status_timeout":{broadcast:2,emitFacade:true},"scbase:fb_status_not_authorized":{broadcast:2,emitFacade:true},"scbase:fb_auth_login":{broadcast:2,emitFacade:true},"scbase:fb_auth_logout":{broadcast:2,emitFacade:true},"scbase:fb_get_start":{broadcast:2,emitFacade:true}});if(typeof YAHOO.Media.Facebook.Session=="undefined"&&FB._apiKey===null){var i=this,j=10000,l=false,m=false,h="",g=false,f=this.CONF.get("lang").replace(/\-/g,"_");YAHOO.Media.Facebook.Session={};if(!d.one("#fb-root")){var k=d.Node.create('<div id="fb-root"></div>');d.one(document.body).prepend(k)}FB.init(YAHOO.Media.Facebook.init);if(typeof FB.L10n!=="undefined"&&typeof f==="string"&&f!=""){FB.L10n.setLocale(f)}FB.Event.subscribe("auth.authResponseChange",function(n){if(n.status=="unknown"){YAHOO.Media.Facebook.Session=undefined}else{YAHOO.Media.Facebook.Session=n}});FB.Event.subscribe("auth.login",function(n){var o=d.one(".ysc-promos")||null;YAHOO.Media.Facebook.Session=n;l=true;i.CONF.set("fbuid",n.authResponse.userID);if(o!==null){o.remove()}if(i.CONF.get("enable_code_exchange")!=1){i.setFBCookie(n);i.fire("scbase:fb_auth_login",{response:n})}else{i.refreshFBCookie("scbase:fb_auth_login",{response:n})}});FB.Event.subscribe("auth.logout",function(n){i.removeFBCookie();YAHOO.Media.Facebook.Session=undefined;i.CONF.set("fbuid","");i.fire("scbase:fb_auth_logout",{response:n})});if(!l){FB.getLoginStatus(function(o){var n="",p="";a.clearTimeout(h);YAHOO.Media.Facebook.Session=o;if(m){return}else{if(typeof o.authResponse==="object"&&o.status==="connected"){g=true;i.CONF.set("fbuid",o.authResponse.userID);if(i.CONF.get("enable_code_exchange")==1){if(i.isFBCookieExist()){i.fire("scbase:fb_status_login");if(i.isFBCookieExpired()){i.refreshFBCookie()}}else{i.refreshFBCookie("scbase:fb_status_login")}}else{i.setFBCookie(o);i.fire("scbase:fb_status_login")}}else{if(o.status==="not_authorized"){i.CONF.set("fbuid","");i.fire("scbase:fb_status_not_authorized")}else{i.CONF.set("fbuid","");i.fire("scbase:fb_status_logout");i.removeFBCookie()}}}})}h=a.setTimeout(function(){if(g===false){m=true;i.removeFBCookie();YAHOO.Media.Facebook.Session=undefined;i.CONF.set("fbuid","");i.fire("scbase:fb_status_timeout")}},j);d.Global.after("scbase:fb_get_start",function(s){var p=i.CONF.get("yahoo_id")?725:575,w="left="+(a.screen.width-800)/2+",top="+(a.screen.height-p)/2,r=null,u=i.CONF.get("signin_url"),v="so=1&perms=user_birthday,user_likes,email,publish_actions",n=a.location.href,t={},q=null,o=false;FB.getLoginStatus(function(x){YAHOO.Media.Facebook.Session=x;if(x.status=="not_authorized"||x.status=="notConnected"){o=true}});if(o){r=a.open(u+"&"+v,"membershipwindow","toolbar=no,statusbar=no,location=no,scrollbars=yes,resizable=yes,width=800,height="+p+","+w);q=a.setInterval(function(){try{if(r.location.host==a.location.host){a.clearTimeout(q);r.close();a.location.reload(true)}}catch(x){}},700)}})}var e=this.constructor.superclass;if(typeof e._hide_events==="undefined"){e._hide_events={};d.one(document.body).on("click",function(o){for(var n in e._hide_events){e._hide_events[n][0].apply(e._hide_events[n][1],arguments)}},this,true)}this.pagedata=YAHOO.Media.Facebook.ModuleConf.get("PAGE_META")},removeFBCookie:function(){if(this.CONF.get("enable_code_exchange")==0){d.Cookie.remove(this.cname,{path:"/",domain:"yahoo.com"})}else{d.Cookie.remove(this.cname,{path:"/",domain:a.location.hostname})}d.Cookie.remove("ysc",{path:"/",domain:a.location.hostname})},setFBCookie:function(i){var f=i.authResponse.accessToken,e="",h=this.CONF.get("timestamp"),g="";d.Cookie.get(this.cname,function(m){var k,l,j=m.split("&");for(k=0;k<j.length;k++){l=j[k].split("=");if("access_token"===l[0]){e=l[1];break}}});if(e!==f){g+="access_token="+f;g+="&uid="+i.authResponse.userID;g+="&expires="+(h+i.authResponse.expiresIn-7);d.Cookie.set(this.cname,g,{path:"/",domain:"yahoo.com"})}},isFBCookieExpired:function(){var f=Math.round(new Date().getTime()/1000),e=this.CONF.get("fbexpires");if(e<=(f-this.page_load_time+this.CONF.get("timestamp"))){return true}return false},isFBCookieExist:function(){if(d.Cookie.exists(this.cname)){if(this.CONF.get("enable_code_exchange")==1){var e="fbs_"+this.CONF.get("APP_ID");if(d.Cookie.exists(e)){d.Cookie.remove(e,{path:"/",domain:"yahoo.com"})}}return true}return false},refreshFBCookie:function(f,g){var h=this,e=h.CONF.get("XHR").GET_TOKEN;d.Get.script(e,{onSuccess:function(){if(f!==null){h.fire(f,g)}return true},onFailure:function(){}})},renderer:function(){this.renderUI();this.bindUI();this.syncUI()},publish:function(e){return d.publish(e)},fire:function(e){return d.fire(arguments[0],arguments[1])},renderUI:function(){},bindUI:function(){},syncUI:function(){},destroy:function(){},get:function(e){if(typeof this._data[e]==="undefined"){return null}return this._data[e].value},set:function(e,f){this._data[e].value=f},track_ywa:function(){var f=arguments,h=f[f.length-1];if(this.CONF.get("enable_ywa")==1&&typeof YWA!="undefined"&&this.CONF.get("project_id")!=""){var e=YWA.getTracker(this.CONF.get("project_id"));e.setAction(f[0]);for(var g=1;g<f.length;g++){if(!c.isArray(f[g])){continue}e.setCF(f[g][0],f[g][1])}if(h){e.submit_action()}else{e.submit()}}},assign_hide_events:function(e,g,f){this.constructor.superclass._hide_events[e]=[g,f]},hide_other_layers:function(e,h){h=(typeof h==="undefined")?this:h;var g=h.constructor.superclass._hide_events;for(var f in g){if(f!=e){g[f][0].apply(g[f][1],arguments)}}},_patternParse:function(f,g){if(!g){return null}var e=null;switch(f){case"condition":e=g.match(/[#<>=]+/);break;case"parameter":e=g.match(/\{[^\{\}]*\}/g);return e;break}if(e&&e.length>1){return e}else{if(e&&e.length==1){return e[0].replace(/(^[\\s]*)|([\\s]*$)/g,"")}else{return null}}},getParamValue:function(g){g=g.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e="[\\?&]"+g+"=([^&#]*)";var h=new RegExp(e);var f=h.exec(window.location.href);if(f==null){return""}else{return f[1]}},getTranslation:function(p,n,e){if(!p){return""}if(this.getParamValue("ytest-pseudo").toLowerCase()==="on"){return"["+p+"]"}var q,o,f,h,g,m,k=this._patternParse("parameter",p);if(k===null){return p}for(h=0;h<k.length;h++){if(k[h].indexOf("choice",0)>0){q=k[h].split(",");if(q.length==3){l=q[0]?parseInt(q[0].replace(/(^[\\s]*)|([\\s]*$)/g,"").substring(1)):-1;o=q[2]?q[2].split("|"):null;if(l>0&&o!=null){for(var g=0;g<o.length;g++){o[g]=o[g].replace("&lt;","<");o[g]=o[g].replace("&gt;",">");m=this._patternParse("condition",o[g]);if(m){switch(m){case"#":f=o[g].split("#");if(parseInt(e[l])==parseInt(f[0])){p=p.replace(k[h],f[1].replace("}",""))}break;case"<":f=o[g].split("<");if(parseInt(f[0])<parseInt(e[l])){p=p.replace(k[h],f[1].replace("}",""))}break;case">":f=o[g].split(">");if(parseInt(f[0])>parseInt(e[l])){p=p.replace(k[h],f[1].replace("}",""))}break;case"<=":f=o[g].split("<=");if(parseInt(f[0])<=parseInt(e[l])){p=p.replace(k[h],f[1].replace("}",""))}break;case">=":f=o[g].split(">=");if(parseInt(f[0])>=parseInt(e[l])){p=p.replace(k[h],f[1].replace("}",""))}break}}}}}}else{var l=k[h].match(/^\{(\d+)\}$/);l=l?parseInt(l[1]):"";if(typeof l==="number"){p=p.replace(k[h],e[l])}else{if(e&&e[h]){p=p.replace(k[h],e[h])}else{p=p.replace(k[h],n)}}}}return p},log:function(e){if(window.console&&window.location.href.indexOf("debug=1")>-1){console.log(e)}},getSession:function(){if(typeof YAHOO.Media.Facebook.Session==="object"){return YAHOO.Media.Facebook.Session}else{return false}},get_track_link:function(e,f){f[YAHOO.ULT.SRC_SPACEID_KEY]=this.pagedata.spaceid;e=this.CONF.get("ult_redirect")+"//**"+e;return YAHOO.ULT.track_click(e,f)},get_pageview_beacon_url:function(f){var e=this.CONF.get("ult_beacon")+"/p?";return e+f},fire_click_beacon:function(e){if(typeof YAHOO.ULT=="undefined"){return}YAHOO.ULT.BEACON=this.CONF.get("ult_beacon")+"/t";YAHOO.ULT.beacon_click(e)},get_query_variable:function(j){var h=window.location.search.substring(1);h=decodeURIComponent(h);h=h.replace(/&amp;/g,"&");var e=h.split("&");for(var f=0;f<e.length;f++){var g=e[f].split("=");if(g[0]==j){return g[1]}}return""},parse_fbref:function(e){var g=new Array();var j=e.split(",");for(var f=0;f<j.length;f++){var h=j[f].split(":");g[h[0]]=h[1]}return g},getUserData:function(g){var f=g.target.getAttribute("data");f=f.replace(/\\/g,"");return d.JSON.parse(f)},truncate_text:function(f,e){if(f.length>e){f=f.substring(0,e);f=f.replace(/\w+$/,"");f+=" ..."}return f},get_video_length:function(f){var h=Math.floor(f/3600),e=Math.floor((f-(h*3600))/60),g=Math.floor(f-(h*3600)-(e*60));if(h<10){h="0"+h}if(e<10){e="0"+e}if(g<10){g="0"+g}if(h){return e+":"+g}return h+":"+e+":"+g},run_closeLightConn:function(f){if(this.lightConn.id>=0){if(this.lightConn.isInProgress()){this.lightConn.abort()}}},run_lightweight:function(C){if(typeof this.getSession()!=="object"){alert("facebook session expired or changed, please re-login");return}var s=this.constructor.superclass;var m=C.target.getAttribute("data");m=d.JSON.parse(m);var i=m.userid;var o=m.username;if(!s.lightweight){var v=d.one(".yog-24u").get("region").left+200;var r=this.mod_friends.get("viewportRegion").top+100;s.lightweight=new d.Overlay({bodyContent:'<div class="yom-primary lightweight"><div class="yom-mod"><div class="bd menu_loading"></div></div></div><a class="lightweightclose"></a><div class="wraplightweight"></div>',width:"550px",xy:[v,r],zIndex:10000800});s.lightweight.render();s.lightweightbd=d.one(".lightweight .bd")}this.lightweight=s.lightweight;this.lightweightbd=s.lightweightbd;if(s.active_lightweight&&s.activity_user!==i){s.active_lightweight.setStyle("display","none")}this.activity_user=i;s.activity_user=this.activity_user;if(!d.one("#ysc-lightweight-"+i)){this.active_lightweight=d.Node.create('<div id="ysc-lightweight-'+i+'"></div>');this.lightweightbd.append(this.active_lightweight);this.lightweightbd.addClass("menu_loading")}else{this.active_lightweight=d.Node.one("#ysc-lightweight-"+i);this.lightweightlist=this.active_lightweight.one(".list");var D=this.active_lightweight.one(".header .user_name"),l=this.unames["uid_"+i];if(D&&!D.hasClass("name-done")&&l!==undefined){D.setContent(l);D.addClass("name-done")}}s.active_lightweight=this.active_lightweight;var v=d.one(".yog-24u").get("region").left+200;var r=this.mod_friends.get("viewportRegion").top+100;this.lightweight.move(v,r);this.active_lightweight.setStyle("display","block");this.lightweight.show();if(!this.activity_data){this.activity_data={}}if(!this.activity_data[i]){this.activity_data[i]={index_page:0,total_page:1,shown_total:0,page_text:null,page_prev:null,page_next:null,icon_prev:null,icon_next:null,page_size:5,url_next:"",url_prev:"",active_page:null}}var w=this.activity_data[i].index_page,j=this.activity_data[i].total_page,B=this.activity_data[i].shown_total,k=this.activity_data[i].page_text,p=this.activity_data[i].page_prev,t=this.activity_data[i].page_next,x=this.activity_data[i].icon_prev,y=this.activity_data[i].icon_next,n=5,h=this.activity_data[i].url_next,f=this.activity_data[i].url_prev,g=this.activity_data[i].active_page;var A=this;var q=i+"&type="+this.action_type+"&limit="+n+"&section=lwprof-actvmnu&network_source=fb&itc=0&space_id="+this.pagedata.spaceid+"&content_id="+this.pagedata.cid;var u=this.CONF.get("XHR").GET_ACTIVITY+q;var z=function(E,e){var E=E,e=e;if(E===""){if(!e){return}A.update_active_page({content:"",key:"lightweight",step:e,parentnode:A.lightweightlist,datasource:A.activity_data[i]});A.update_page_ui(A.activity_data[i]);return}if(e){A.show_loading_frame(A.lightweightlist)}A.lightConn=d.io(E,{on:{success:function(G,I){var N=unescape(I.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,""));var P="";if(N!==""){try{P=d.JSON.parse(N)}catch(L){A.log("invalid json data");return}if(P.status==false&&!d.Lang.isUndefined(P.info)&&d.Lang.isValue(P.info.http_code)){var K=P.info.http_code;if(e){}else{if(K!="200"||K!="202"){var J={userid:i,username:o,list:[],totalcount:0,pagesize:n,indexpage:0,totalpage:1};var M=A.render_history(J);A.active_lightweight.setContent(M);A.lightweightbd.removeClass("menu_loading")}}return}else{if(P.status==false&&d.Lang.isValue(P.data)){return}}var F=function(Q){A.active_lightweight.setContent(Q);A.lightweightlist=A.active_lightweight.one(".list");A.activity_data[i].active_page=A.lightweightlist.one(".index-"+w);if(j>w+1){var R=A.active_lightweight.one(".paginator");k=R.one(".page");p=R.one(".btn-prev-off");p.on("click",function(){A.fire_click_beacon({csrcpvid:A.CONF.get("csrcpvid"),_S:A.pagedata.spaceid,sec:"lwprof-actvmnu",itc:"1",slk:"btn",ltxt:"pr"})});t=R.one(".btn-next");t.on("click",function(){A.fire_click_beacon({csrcpvid:A.CONF.get("csrcpvid"),_S:A.pagedata.spaceid,sec:"lwprof-actvmnu",itc:"1",slk:"btn",ltxt:"ne"})});R.on("click",A.handle_page_click,A,E,"lightweight");x=R.one(".icon-arrow-prev-2");y=R.one(".icon-arrow-next-1");A.activity_data[i].page_text=k;A.activity_data[i].page_next=t;A.activity_data[i].page_prev=p;A.activity_data[i].icon_prev=x;A.activity_data[i].icon_next=y}};var H=function(R,Q){var S=A.active_lightweight.one(".transition");A.update_loading_frame(S,"clear");A.update_active_page({content:R,key:"lightweight",step:Q,parentnode:A.lightweightlist,datasource:A.activity_data[i]});A.update_page_ui(A.activity_data[i])};var O=function(){w=(e)?w+e*1:w;B=P.data.updates.length;j=(P.data.next==="")?j:j+1;h=(P.data.next==="")?"":"&until="+P.data.next.split("&until=")[1].split("&")[0];f=(P.data.prev==="")?"":"&since="+P.data.prev.split("&since=")[1].split("&")[0];A.activity_data[i].total_page=j;A.activity_data[i].shown_total=B;A.activity_data[i].url_next=h;A.activity_data[i].url_prev=f;var R={key:"lightweight",userid:i,username:o,list:P.data.updates,totalcount:P.data.total,pagesize:n,indexpage:w,totalpage:j};var Q=A.render_history(R);if(e){H(Q,e)}else{F(Q)}};O();A.lightweightbd.removeClass("menu_loading")}},failure:function(J,F){if(e){var I=A.active_lightweight.one(".transition");A.update_loading_frame(I,"err")}else{var H={key:"lightweight",userid:i,username:o,list:[],totalcount:0,pagesize:n,indexpage:0,totalpage:1};var G=A.render_history(H);A.active_lightweight.setContent(G);A.lightweightbd.removeClass("menu_loading");A.log("No reading history!!")}}}})};if(this.active_lightweight.one(".index-0")){return}this.fetchHistory=z;z(u,null);if(!s.lwclose){d.on("click",function(F){var E={csrcpvid:A.CONF.get("csrcpvid"),_S:A.pagedata.spaceid,sec:"lwprof-actvmnu",itc:"1",slk:"btn",ltxt:"close",cuuid:A.pagedata.cid,axid:i};A.fire_click_beacon(E);A.run_closeLightConn();A.lightweight.hide()},[".lightweightclose"]);s.lwclose=true}d.on("click",function(){A.run_closeLightConn();A.lightweight.hide()},[".func_bar"]);d.on("click",function(){A.run_closeLightConn();A.lightweight.hide()},[".yom-socialchrome-friends"]);d.once("click",function(F){F.preventDefault();var E={csrcpvid:A.CONF.get("csrcpvid"),_S:A.pagedata.spaceid,sec:"lwprof-actvmnu",itc:"1",slk:"thumb",cuuid:A.pagedata.cid,axid:i};A.fire_click_beacon(E);setTimeout(function(){window.location.href=F.currentTarget.get("href")},400)},[".lightweight .user_pic"]);d.once("click",function(G){G.preventDefault();var F=A.getUserData(G),E={csrcpvid:A.CONF.get("csrcpvid"),_S:A.pagedata.spaceid,sec:"lwprof-actvmnu",itc:"1",slk:"user",cuuid:A.pagedata.cid,axid:F.userid};A.fire_click_beacon(E);setTimeout(function(){window.location.href=G.currentTarget.get("href")},400)},[".lightweight .user_name"])},show_loading_frame:function(h,f){var g=f?f:"";var e=h.one(".transition");if(!e){e=d.Node.create('<div class="transition"><p>'+this.getTranslation(this.l10n.MSG_CANT_GET_ACTIVITY)+"</p></div>");e.addClass("loading");h.prepend(e);e.on("click",function(j){j.halt();var i=j.target;if(i.hasClass("js-retry")){this.update_loading_frame(e,"retry");switch(g){case"newsfeed":this.fetchFeed(this.newsfeed_data.url_next,"1");break;case"self":this.fetchSelfActivity(this.self_data.url_next,"1");break;default:this.fetchHistory(this.activity_data[this.activity_user].url_next,"1");break}}if(i.hasClass("js-back")){this.update_loading_frame(e,"clear")}},this,true)}e.setStyle("width",h.getStyle("width"));e.setStyle("height",h.getStyle("height"));e.setStyle("display","block")},display_invite_panel:function(m,g){if(!this.node_historylayer){this.node_historylayer=d.Node.create('<div class="yom-primary layer-sc-activity"></div>');d.one(document.body).appendChild(this.node_historylayer)}var f=this.constructor.superclass;if(!f.invitelayer){var j=this.getTranslation(this.l10n.MSG_FB_INVITE,"",[m]),e=this.getTranslation(this.l10n.HEADER_INVITE,"",[m]);var h="http://"+window.location.host+g;var i='<fb:serverFbml height="510" width="625"><script type="text/fbml"><fb:fbml><fb:request-form action="'+location.href+'" method="POST" invite="true" type="Yahoo! '+m+'" content="'+j+"<fb:req-choice url='"+h+"?fb_ref=type:invite,user:"+this.CONF.get("tid")+"' label='"+this.getTranslation(this.l10n.JOIN)+'\' />" ><fb:multi-friend-selector showborder="false" cols="4" rows="3"actiontext="'+e+'" import_external_friends="false" /></fb:request-form></fb:fbml><\/script></fb:serverFbml>';f.invitelayer=new d.Overlay({bodyContent:'<div class="invite-wrap">'+i+"</div>",height:"565px",width:"640px",zIndex:10000800});this.invitelayer=f.invitelayer;this.invitelayer.hide();this.invitelayer.render(".layer-sc-activity");FB.XFBML.parse(d.DOM.byId(this.invitelayer.get("id")))}var k=d.one(".invite-wrap");k.setStyle("height","550px");if(d.UA.ie>0){var l=550;if(d.UA.ie===7){l=550+40}k.ancestor(".yui3-widget-bd").setStyle("height",l+"px");k.setStyle("height",(l-5)+"px")}this.invitelayer.set("centered",true);this.invitelayer.show()},hide_invite_panel:function(){var e=this.constructor.superclass;this.invitelayer=e.invitelayer;if(this.invitelayer){this.invitelayer.hide()}},update_loading_frame:function(f,e){switch(e){case"clear":f.setStyle("display","none");if(f.hasClass("err")){f.replaceClass("err","loading")}break;case"err":f.replaceClass("loading","err");break;case"retry":f.replaceClass("err","loading");break;default:break}},handle_page_click:function(m,h,p){m.halt();var f=p?p:"",k=null;switch(f){case"newsfeed":if(this.xhr_feed&&this.xhr_feed.isInProgress()){return}k=this.newsfeed_data;break;case"self":if(this._readConn&&this._readConn.isInProgress()){return}k=this.self_data;break;default:if(this.lightConn&&this.lightConn.isInProgress()){return}k=this.activity_data[this.activity_user];break}var g=k.index_page,i=h,q=k.url_next,o=k.url_prev;var l=m.target,n=l.get("className"),j=(n.indexOf("btn-prev")>0&&n.indexOf("btn-prev-off")<0)?"btn-prev":(n.indexOf("btn-next")>0&&n.indexOf("btn-next-off")<0)?"btn-next":"";switch(j){case"btn-next":i=i+q;switch(f){case"self":if(this.loginlayerboxlist.one(".index-"+(g+1))){i=""}this.fetchSelfActivity(i,"1");break;case"newsfeed":if(this.newsfeedlist.one(".index-"+(g+1))){i=""}this.fetchFeed(i,"1");break;default:if(this.active_lightweight.one(".index-"+(g+1))){i=""}this.fetchHistory(i,"1");break}break;case"btn-prev":i=i+o;switch(f){case"self":if(this.loginlayerboxlist.one(".index-"+(g-1))){i=""}this.fetchSelfActivity(i,"-1");break;case"newsfeed":if(this.newsfeedlist.one(".index-"+(g-1))){i=""}this.fetchFeed(i,"-1");break;default:if(this.active_lightweight.one(".index-"+(g-1))){i=""}this.fetchHistory(i,"-1");break}break;default:break}},update_active_page:function(g){var h=g.key?g.key:"",j=g.step,e=g.content,i=g.parentnode;data=g.datasource;var f=data.index_page,k=data.active_page;if(e){i.append(e)}k.removeClass("active");f=f+j*1;data.index_page=f;data.active_page=i.one(".index-"+f);if(!e){data.active_page.addClass("active")}},update_page_ui:function(g){var n=g.index_page,r=g.total_page,f=g.total_count,p=g.shown_total,i=g.page_text,q=g.page_prev,e=g.page_next,m=g.icon_prev,o=g.icon_next,k=g.page_size,j=n*k+1,l=(r>n+1)?(n+1)*k:j+p-1,h=(p===1&&r===n+1)?j:(j+"-"+l);if(g.range_all){h=this.getTranslation(this.l10n.PG_RANGE_OF_ALL,"",[h,(f+"")])}i.setContent(h);if(j===1){q.set("className","yom-button btn-prev-off selected");m.set("className","icon btn-prev-off icon-arrow-prev-2")}else{if(q.hasClass("btn-prev-off")){q.set("className","yom-button btn-prev");m.set("className","icon btn-prev icon-arrow-prev-1")}}if(n+1===r){e.set("className","yom-button btn-next-off selected");o.set("className","icon btn-next-off icon-arrow-next-2")}else{if(e.hasClass("btn-next-off")){e.set("className","yom-button btn-next");o.set("className","icon btn-next icon-arrow-next-1")}}},render_pagination:function(f){var e=['<div class="paginator">','<span class="page">1-',f,"</span>",'<a href="#prev" class="yom-button selected btn-prev-off" role="button">','<span class="icon btn-prev-off icon-arrow-prev-2">',this.getTranslation(this.l10n.BTN_PREV),"</span>","</a>",'<a href="#next" class="yom-button btn-next" role="button">','<span class="icon btn-next icon-arrow-next-1">',this.getTranslation(this.l10n.BTN_NEXT),"</span>","</a>","</div>"];return e.join("")},render_history:function(j){var q=this,f=j,w=f.key,e=f.userid,h=f.username,s=f.list,l=f.totalcount,o=s.length,p=f.pagesize||5,g=f.indexpage,v=f.totalpage;var i="",n="",r="",k="",u="";var m=function(){var z=50,L=(w&&w==="self")?q.getTranslation(q.l10n.YOU):h,B=(w&&w==="self")?q.l10n.RATING_TEXT_QUESTION:q.l10n.RATING_TEXT_QUESTION_OTHER;if(o>0){r='<ul class="index-'+g+' active">';for(var G=0,D=o;G<D;G++){var K=s[G],y='<cite class="ts">'+K.pubFormattedDate+"</cite>",H="",C="",M="",F="";if(w&&w==="self"){y=y+'<span class="rmlist" value="'+G+'"></span>'}if(K["obj:rating"]){if(K["obj:brandImage"]){C="sponsored";F='<b class="sptext">'+q.getTranslation(q.l10n.SPONSORED)+"</b>";z=40;var E=K["obj:brandImage"].link,J=K["obj:brandImage"].url;if(E.indexOf(";")>-1){E=E.substring(0,J.indexOf(";"))}if(J.indexOf(";")>-1){J=J.substring(0,J.indexOf(";"))}M=['<div class="brand">','<a href="',E,'" title="',K["obj:brandImage"].title,'">','<img src="',J,'" width="50" />',"</a>","</div>"];M=M.join("")}var A=q.getTranslation(B,"",[L,K.ratingText]);var x=(typeof K["obj:rating"].title==="undefined")?"":unescape(K["obj:rating"].title);H=['<li class="clearfix poll ',C,'">',M,'<p class="poll-result">',A,"</p>",'<a href="',K.title_ylt,'">',q.truncate_text(x,z),"</a>",y,F,"</li>"]}else{if(K["obj:video"]){var I="";var x=(typeof K.title==="undefined")?"":unescape(K.title);if(K["obj:video"].imgUrl){I=['<div class="video_image"> <a href="',K.title_ylt,'">','<img height="50" src="',K["obj:video"].imgUrl,'" alt="',x,'">','<span class="video_duration">',q.get_video_length(K["obj:video"].length),"</span></a>",'<p class="watch_playicon"></p></div>'];I=I.join("")}H=['<li class="clearfix video_list_item"><div class="video_item">',I,'<a href="'+K.title_ylt+'">',q.truncate_text(x,z),"</a><br>",y,"</div></li>"]}else{var x=(typeof K.title==="undefined")?"":unescape(K.title);H=['<li class="clearfix">','<a href="',K.title_ylt,'">',q.truncate_text(x,z),"</a>",y,"</li>"]}}r=r+H.join("")}r=r+"</ul>"}if(g===0){i=['<div class="header clearfix">','<div class="img">','<a class="user_pic" href="http://www.facebook.com/profile.php?id=',e,'" data=\'{"userid":"',e+"\"}'>",'<img height="50" width="50" src="http://graph.facebook.com/',e,'/picture" />',"</a>","</div>",'<div class="txt">','<a id="user_name" class="user_name" data=\'{"userid":"',e,"\"}' ",'href="http://www.facebook.com/profile.php?id=',e,'">',h,"</a>",'<p class="desc">','<span id="log_desc" class="log_desc">',q.getTranslation(q.l10n.HEADER_RECENT_ACTIVITY_ALL,"",["",(l+"")]),"</span></p>","</div>",k,"</div>"].join("");n='<div class="list">'+r+"</div>";u=i+n}else{u=r}};var t=function(){if(o>0){r='<ul class="index-'+g+' active yom-list yom-list-large ysc-newsfeed">';for(var C=0,A=o;C<A;C++){var z=s[C];var D=z.fbid?z.fbid:z.collectionID;var B=q.unames["uid_"+D]?q.unames["uid_"+D]:q.getTranslation(q.l10n.YOUR_FRIEND);var x='{"pos":"'+(C+1)+'","username":"'+B+'","userid":"'+D+'"}';var G=q.getTranslation(q.l10n.WHO_READ,"",[x,B]);var E=(typeof z.title==="undefined")?"":unescape(z.title);var F=z["obj:article"].description?z["obj:article"].description:"";F=(F.indexOf("%2")>-1)?decodeURIComponent(F):F;F=q.truncate_text(F,180);var y=['<li class="clearfix">','<div class="ysc-thumb"><a href="#">','<img src="http://graph.facebook.com/',D,'/picture" ','width="50" height="50" alt="',B+'"'," data='",x,"' >","</a></div>",'<div class="txt"><cite class="user">',G,"</cite>",'<h4><a href="',z.title_ylt,'">',E,"</a></h4>","<p>",F,'<a href="',z.more_ylt,'">'+q.getTranslation(q.l10n.CONTENT_MORE)+"</a>","</p>","</div>","</li>"];r=r+y.join("")}r=r+"</ul>"}if(g===0){i='<div class="head clearfix">'+k+"</div>";n='<div class="list">'+r+"</div>";u=i+n}else{u=r}};if(g===0&&v>1){k=this.render_pagination(p)}switch(w){case"newsfeed":t();break;default:m();break}return(u)}};d.namespace("Media.SocialChrome").Base=b},"1.0",{requires:["base","node","event","event-custom","io-base","io-xdr","cookie","intl"]});
/* socialchrome-strings_zh-Hant-TW.js 320422 */ YUI.add("media-socialchrome-strings_zh-Hant-TW",function(a){a.Intl.add("media-socialchrome-strings","zh-Hant-TW",{MSG_PROMPT_LOGIN:"\u9023\u7d50 Facebook \u5c31\u53ef\u4ee5\u770b\u5230\u670b\u53cb\u5728Yahoo!\u5947\u6469{0}\u4e0a\u700f\u89bd\u7684\u7cbe\u5f69\u5167\u5bb9\u3002\u4f60\u53ef\u4ee5\u770b\u5230\u81ea\u5df1\u548c\u670b\u53cb\u7684\u700f\u89bd\u7d00\u9304\u3002",MSG_PERSONALIZE:"\u900f\u904e Facebook \u767b\u5165\u4ee5\u500b\u4eba\u5316\u4f60\u7684 Yahoo!\u5947\u6469 {0}\u4f7f\u7528\u9ad4\u9a57\u3002",MSG_YOU_ARE_FIRST_READ:"\u4f60\u662f\u597d\u53cb\u4e2d\u7b2c\u4e00\u500b\u95b1\u8b80\u672c\u7bc7\u6587\u7ae0\u7684\u4eba",MSG_YOUR_FRIENDS_CAN_SEE:"\u73fe\u5728\u4f60\u7684Facebook\u548cYahoo!\u5947\u6469\u597d\u53cb\u90fd\u6703\u770b\u5230\u4f60\u5df2\u95b1\u8b80\u904e\u672c\u7bc7\u5167\u5bb9",MSG_SURE_TO_REMOVE:"\u4f60\u78ba\u5b9a\u8981\u79fb\u9664\u300c\u597d\u53cb\u90fd\u5728\u770b\u300d\u529f\u80fd\u55ce\uff1f\n",MSG_WE_CONNECT_ACCOUNT:"\u6211\u5011\u4e4b\u524d\u5df2\u9023\u63a5\u4f60\u7684 Yahoo! \u5947\u6469\u548c Facebook \u5e33\u865f",MSG_YOU_CAN_UNDO:"\u5982\u679c\u4f60\u60f3\u8981\u7684\u8a71\uff0c\u4f60\u53ef\u4ee5\u5fa9\u539f\u6b64\u9023\u63a5",MSG_LOGIN_FACEBOOK:"\u4f7f\u7528 Facebook \u5e33\u865f\u767b\u5165",MSG_GET_STARTED:"\u958b\u59cb\u4f7f\u7528",MSG_AGG_SEE_TITLE:"\u6aa2\u8996\u4f60\u670b\u53cb\u5728 Yahoo! \u5947\u6469\u4e0a\u95b1\u8b80\u4e86\u54ea\u4e9b\u5167\u5bb9",MSG_AGG_SEE:"\u63a2\u7d22\u4f60\u4e4b\u524d\u5f88\u5c11\u7559\u610f\u7684\u6587\u7ae0\u5167\u5bb9\u3002",MSG_AGG_DISCOVER_TITLE:"\u900f\u904e\u670b\u53cb\u7684\u700f\u89bd\u7d00\u9304\uff0c",MSG_AGG_DISCOVER:"\u8b93\u670b\u53cb\u7576\u4f5c\u4f60\u7684\u5c0e\u8b80\u3002",MSG_AGG_CONTROL_TITLE:"\u7531\u4f60\u63a7\u5236\u4f60\u7684\u700f\u89bd\u7d00\u9304\u3002",MSG_AGG_CONTROL:"\u555f\u52d5\u3002\u95dc\u9589\u3002\u96a8\u6642\u522a\u9664\u6d3b\u52d5\u3002",NEWS:"\u65b0\u805e",ACTIVITY:"\u700f\u89bd",GREETING_LOGOUT:"\u55e8",STATUS_DESC:"\u60a8\u5df2\u767b\u5165 Facebook",LINK_MORE:"\u529f\u80fd\u8aaa\u660e &raquo;",READ_ON:"\u958b\u555f",READ_OFF:"\u95dc\u9589",SHARING:"\u793e\u4ea4",SHARE_SUCCESS_TITLE:"\u65b0\u589e\u81f3\u4f60\u7684\u700f\u89bd\u7d00\u9304",REMIND_ME:"\u6bcf\u6b21\u65b0\u589e\u700f\u89bd\u7d00\u9304\u6642\u63d0\u9192\u6211",ACTIVITY_REMOVE:"\u5df2\u79fb\u9664",ACTIVITY_REMOVE_FAIL:"\u6d3b\u52d5\u79fb\u9664\u5931\u6557",YOUR_FRIEND:"\u4f60\u7684\u670b\u53cb",YOUR_FRIENDS:"\u4f60\u7684\u670b\u53cb",TURN_SOCIAL_ON:"\u958b\u555f\u300c\u597d\u53cb\u90fd\u5728\u770b\u300d\u793e\u7fa4\u529f\u80fd",TURN_SOCIAL_OFF:"\u95dc\u9589\u300c\u597d\u53cb\u90fd\u5728\u770b\u300d\u793e\u7fa4\u529f\u80fd",INVITE_FRIENDS:"\u9080\u8acb\u597d\u53cb",YOU:"\u4f60",AND_ONE_OTHER:"\u4ee5\u53ca\u5176\u4ed6 1 \u500b",AND_OTHERS:"\u548c{0}\u5176\u4ed6\u4eba",AND:"\u548c",READ_ACTIVITY_YOU:"{0}\u95b1\u8b80\u6b64",READ_ACTIVITY_FRIEND:"{0}\u95b1\u8b80\u6b64",READ_ACTIVITY:"{0} {1} {2} {3}\u95b1\u8b80\u6b64",READ_ACTIVITY_ARTICLE:"{0} {1} {2} {3}\u95b1\u8b80\u6b64\u5247\u65b0\u805e",ACCOUNT_CONNECT:"\u5e33\u865f\u5df2\u9023\u63a5",DONT_WANT:"\u4e0d\u60f3\u8981\u55ce\uff1f",OK:"\u597d\uff0c\u78ba\u8a8d\u5206\u4eab",DELETE_THIS_READ:"\u522a\u9664\u6b64\u95b1\u8b80\u8a18\u9304",MSG_ACTIVITY_DELETED:"\u52d5\u614b\u5df2\u522a\u9664",REMOVE_EXPERIENCE:"\u79fb\u9664\u6b64\u529f\u80fd",REMOVE:"\u79fb\u9664",CANCEL:"\u53d6\u6d88",SIGN_YAHOO_AS:"\u4f60\u5df2\u767b\u5165 Yahoo! \u5947\u6469\u70ba",SIGN_FB_AS:"\u4f60\u5df2\u767b\u5165 Facebook \u70ba",MANAGE_MY_ACCOUNT:"\u7ba1\u7406\u6211\u7684\u5e33\u865f",UNDO_CONNECTION:"\u5fa9\u539f\u9023\u63a5",LEARN_MORE:"\u529f\u80fd\u8aaa\u660e",REPORT_PROBLEM:"\u554f\u984c\u901a\u5831",NOT_YOU_LOGOUT:"\u767b\u51faFacebook",MSG_FB_INVITE:"\u67e5\u770b\u6211\u5728 Yahoo! \u5947\u6469{0}\u4e0a\u95b1\u8b80\u4e86\u54ea\u4e9b\u5167\u5bb9",HEADER_INVITE:"\u9080\u8acb\u670b\u53cb\u5206\u4eab\u4ed6\u5011\u5728Yahoo!\u5947\u6469{0}\u4e0a\u95b1\u8b80\u7684\u5167\u5bb9",MSG_CANT_GET_ACTIVITY:'\u6211\u5011\u7121\u6cd5\u53d6\u5f97\u66f4\u591a\u95b1\u8b80\u6d3b\u52d5\u3002<a href="#" class="js-retry" role="button">\u91cd\u8a66</a>\u6216<a href="#" class="js-back" role="button">\u8fd4\u56de</a>',HEADER_SEE_FRIENDS_READING:"\u60f3\u770b\u66f4\u591a\u670b\u53cb\u7684\u700f\u89bd\u7d00\u9304\uff1f",MSG_INVITE_TO_JOIN:"\u9080\u8acb\u66f4\u591a\u670b\u53cb\u52a0\u5165\u300c\u597d\u53cb\u90fd\u5728\u770b\u300d\u3002",BTN_PREV:"\u4e0a\u4e00\u9801",BTN_NEXT:"\u4e0b\u4e00\u9801",PG_RANGE_OF_ALL:"{0} / {1}",MSG_FRIEND_READ_MORE:'<span class="call-name">{0}</span>\u5df2\u95b1\u8b80<strong>{1}\u5176\u4ed6 {1, choice, 0#\u5247\u65b0\u805e|1#\u5247\u65b0\u805e|1&lt;articles}\u3002</strong>',MSG_ENABLE_FOR_MORE:"\u5982\u8981\u6aa2\u8996\u597d\u53cb\u7684\u700f\u89bd\u5206\u4eab\uff0c\u8acb\u555f\u52d5\u300c\u597d\u53cb\u90fd\u5728\u770b\u300d\u529f\u80fd\u3002",MSG_WHAT_SOCIAL_DOES:"\u9019\u4e5f\u6703\u5c07\u4f60\u5728Yahoo!\u5947\u6469\u6240\u95b1\u8b80\u7684\u5167\u5bb9\uff0c\u65b0\u589e\u767c\u4f48\u81f3\u4f60\u7684\u700f\u89bd\u7d00\u9304\uff0c\u5206\u4eab\u7d66Facebook\u4e0a\u7684\u670b\u53cb\u3002",MSG_NO_ACTIVITY:'<span class="call-name">{0}</span>\u76ee\u524d\u6c92\u6709\u4efb\u4f55\u95b1\u8b80\u6d3b\u52d5\u3002',HEADER_RECENT_ACTIVITY:"\u6700\u8fd1\u700f\u89bd ({0})",HEADER_RECENT_ACTIVITY_ALL:"{0}{1, choice, 0#\u5247\u6700\u8fd1\u700f\u89bd|1#\u5247\u6700\u8fd1\u700f\u89bd|1&lt;\u6700\u8fd1\u700f\u89bd} ({1})",CONTENT_MORE:"\u66f4\u591a &raquo;",RATING_TEXT:"{0}\u5df2\u5728\u6295\u7968\u4e2d\u6295\u7d66{1}\uff1a",RATING_TEXT_OTHER:"{0}\u5df2\u5728\u6295\u7968\u4e2d\u6295\u7d66{1}\uff1a",RATING_TEXT_QUESTION:"{0}\u56de\u7b54\u4e86 &apos;{1}&apos; \u7684\u554f\u984c\uff1a",RATING_TEXT_QUESTION_OTHER:"{0}\u56de\u7b54\u4e86 &apos;{1}&apos; \u7684\u554f\u984c\uff1a",SPONSORED:"\u8d0a\u52a9\u5546",WHO_READ:'<a href="#" role="button" data=\'{0}\'>{1}</a> \u5df2\u95b1\u8b80\uff1a',GET_STARTED:"\u958b\u59cb\u4f7f\u7528",JOIN:"\u52a0\u5165",START_CONVERSATION:"\u958b\u59cb\u9032\u884c\u5c0d\u8a71 &raquo;",MSG_FRIEND_WATCH_MORE:'<span class="call-name">{0}</span> \u5df2\u89c0\u770b<strong>{1}\u5176\u4ed6{1, choice, 0#videos|1#video|1<videos}\u3002</strong>',MSG_WHAT_SOCIAL_WATCH_DOES:"\u9019\u6703\u5c07\u4f60\u89c0\u770b\u7684\u5167\u5bb9\u65b0\u589e\u81f3\u4f60\u7684\u52d5\u614b\uff0c\u8b93\u4f60\u5728 Yahoo! \u5947\u6469\u548c Facebook \u4e0a\u7684\u597d\u53cb\u4e5f\u80fd\u770b\u5230\u6b64\u52d5\u614b\u3002",WATCH_ACTIVITY_YOU:"\u4f60\u5df2\u89c0\u770b\u6b64\u5f71\u97f3\u65b0\u805e",WATCH_ACTIVITY_FRIEND:"{0} \u5df2\u89c0\u770b\u6b64\u5f71\u97f3\u65b0\u805e",WATCH_ACTIVITY:"{0} {1} {2} {3} \u5df2\u89c0\u770b\u6b64\u5f71\u97f3\u65b0\u805e",HEADER_WATCH_INVITE:"\u9080\u8acb\u670b\u53cb\u5206\u4eab\u4ed6\u5011\u5728 Yahoo! {0}\u4e0a\u89c0\u770b\u7684\u5167\u5bb9",MSG_CANT_GET_WATCH_ACTIVITY:'\u6211\u5011\u7121\u6cd5\u53d6\u5f97\u66f4\u591a\u89c0\u770b\u6d3b\u52d5\u3002 <a href="#" class="js-retry" role="button">\u91cd\u8a66</a>\u6216<a href="#" class="js-back" role="button">\u8fd4\u56de</a>',HEADER_SEE_FRIENDS_WATCHING:"\u6aa2\u8996\u4f60\u670b\u53cb\u89c0\u770b\u4e86\u54ea\u4e9b\u5167\u5bb9",MSG_NO_WATCH_ACTIVITY:'<span class="call-name">{0}</span>\u76ee\u524d\u6c92\u6709\u4efb\u4f55\u89c0\u770b\u6d3b\u52d5\u3002',MSG_FB_WATCH_INVITE:"\u67e5\u770b\u6211\u5728 Yahoo! {0}\u4e0a\u89c0\u770b\u4e86\u54ea\u4e9b\u5167\u5bb9",DELETE_THIS_WATCH:"\u522a\u9664\u6b64\u6d3b\u52d5",MSG_YOU_ARE_FIRST_WATCH:"\u4f60\u662f\u4f60\u597d\u53cb\u4e2d\u7b2c\u4e00\u500b\u89c0\u770b\u672c\u5f71\u97f3\u65b0\u805e\u7684\u4eba",MSG_YOUR_FRIENDS_CAN_SEE_WATCH:"\u73fe\u5728\u4f60\u7684 Facebook \u548c Yahoo! \u5947\u6469\u597d\u53cb\u90fd\u6703\u770b\u5230\u4f60\u5df2\u89c0\u770b\u904e\u672c\u5f71\u97f3\u65b0\u805e",WATCH_CONSENT_TITLE:"\u958b\u59cb\u8207\u670b\u53cb\u4e00\u8d77\u89c0\u8cde",WATCH_CONSENT_PARA1:"\u8a66\u7528\u5168\u65b0\u529f\u80fd\uff0c\u8b93\u4f60\u6839\u64da\u597d\u53cb\u89c0\u770b\u7684\u5167\u5bb9\u63a2\u7d22\u6700\u6709\u8da3\u7684\u5f71\u97f3\u65b0\u805e\u3002",WATCH_CONSENT_PARA2:"\u9ede\u9078\u300c\u958b\u59cb\u300d\u5c07\u4f60\u89c0\u770b\u7684\u6240\u6709\u5f71\u97f3\u65b0\u805e\u767c\u5e03\u81f3 Facebook\uff0c\u8b93 Facebook \u548c Yahoo! \u7684\u597d\u53cb\u4e5f\u80fd\u770b\u5230\u4f60\u6b63\u5728\u89c0\u770b\u7684\u5167\u5bb9\u3002",WATCH_CONSENT_MORE_INFO:"\u66f4\u591a\u8cc7\u8a0a",WATCH_CONSENT_MORE_PARA:'Yahoo! \u6703\u6536\u96c6\u8cc7\u8a0a\u4ee5\u57f7\u884c\u61c9\u7528\u7a0b\u5f0f\u7684\u5f71\u97f3\u65b0\u805e\u5206\u4eab\u529f\u80fd\uff0c\u4e26\u70ba\u4f60\u91cf\u8eab\u6253\u9020 Yahoo! \u63d0\u4f9b\u7d66\u4f60\u7684\u7522\u54c1\u548c\u670d\u52d9\u3002 \u95b1\u8b80\u6211\u5011\u7684<a href="http://info.yahoo.com/privacy/us/yahoo/activity/activityfaq/details.html">\u6d3b\u52d5\u5e38\u898b\u554f\u984c</a>\uff0c\u9032\u4e00\u6b65\u77ad\u89e3\u6d3b\u52d5\u5206\u4eab\uff0c\u4ee5\u53ca\u5982\u4f55\u95dc\u9589\u6b64\u5206\u4eab\u529f\u80fd\u3002',WATCH_CONSENT_GET_STARTED:"\u958b\u59cb\u4f7f\u7528",WATCH_CONSENT_NO_THANKS:"\u4e0d\uff0c\u8b1d\u8b1d"})},"1.0.0",{requires:["intl"]});
/* socialchrome-promobar.js 307131 */ YUI.add("media-socialchrome-promobar",function(b){function a(c){a.superclass.constructor.apply(this,arguments)}b.Media.SocialChrome.PromoBar=a;a.NAME="PromoBar";a.ATTRS={srcNode:{value:null},property:{value:null}};b.extend(a,b.Media.SocialChrome.Base,{initializer:function(){this.set("contentBox",b.one("#"+this.get("mod_id")));if(!this.get("contentBox")){return}FB.XFBML.parse(b.Node.getDOMNode(b.one("#fb_login_promo").get("parentNode")));this.renderer()},renderUI:function(){var c="s="+this.pagedata.spaceid+"&pstaid="+this.pagedata.cid+"&ntw=fb&cxid="+this.CONF.get("fbuid")+"&csrcpvid="+this.CONF.get("csrcpvid")+"&sec=promo";new Image().src=this.get_pageview_beacon_url(c)},bindUI:function(){var c=this.get("contentBox").one(".fb_login");c.setStyle("display","inline-block");if(c){b.after("scbase:fb_status_not_authorized",function(d){c.replace('<a href="#" role="button" class="fb_login fb-btn fb_button_medium"><span>'+this.getTranslation(this.l10n.MSG_LOGIN_FACEBOOK)+"</span></a>");c=this.get("contentBox").one(".fb_login");b.on("click",function(h){h.preventDefault();var j=this.CONF.get("yahoo_id")==""?575:725;var g="left="+(window.screen.width-800)/2+",top="+(window.screen.height-j)/2;var i=null;i=window.open(this.CONF.get("signin_url")+"&so=0&perms=user_birthday,user_likes,email,publish_actions","membershipwindow","toolbar=no,statusbar=no,location=no,scrollbars=yes,resizable=yes,width=800,height="+j+","+g);var f=function(){var k="error";var l=/news\.[\w-\.]*yahoo.com/;try{k=i.location.host;if(k==window.location.host){i.close();window.location.href=window.location.href}else{setTimeout(f,500)}}catch(m){setTimeout(f,500)}return k};setTimeout(f,2000);this.fire_click_beacon({csrcpvid:this.CONF.get("csrcpvid"),_S:this.pagedata.spaceid,sec:"promo",itc:"1",slk:"btn",ltxt:"connect"})},c,this);c.on("mousedown",function(f){f.preventDefault();this.addClass("fb-btn-click")});c.on("mouseup",function(f){f.preventDefault();this.removeClass("fb-btn-click")})},this)}b.after("scbase:fb_status_login",function(d){this.get("contentBox").hide()},this,true);b.after("scbase:fb_auth_login",function(d){this.get("contentBox").hide()},this,true)}})},"0.1",{requires:["node","event","event-custom","media-ylc","media-socialchrome-base","cookie"]});
/* ywa-tracking.js 244648 */ YUI.add("media-ywa-tracking",function(a){a.namespace("Media.YWA");a.Media.YWA.init=function(h){if(!h){return}try{h=a.JSON.parse("{"+h+"}");var b=h.projectId,g=h.documentName,d=h.documentGroup,c=null;if(!b||typeof YWA=="undefined"){return}c=YWA.getTracker(b);if(g){c.setDocumentName(g)}if(d){c.setDocumentGroup(d)}c.submit()}catch(f){}}},"1.0",{});
/* fb-all.js 279523 */ YUI.add("fb_all",function(Y){if(!window.FB){window.FB={_apiKey:null,_session:null,_userStatus:"unknown",_logging:true,_inCanvas:((window.location.search.indexOf("fb_sig_in_iframe=1")>-1)||(window.location.search.indexOf("session=")>-1)||(window.location.search.indexOf("signed_request=")>-1)||(window.name.indexOf("iframe_canvas")>-1)||(window.name.indexOf("app_runner")>-1)),_https:(window.name.indexOf("_fb_https")>-1),_domain:{api:"https://api.facebook.com/",api_read:"https://api-read.facebook.com/",cdn:"http://static.ak.fbcdn.net/",https_cdn:"https://s-static.ak.fbcdn.net/",graph:"https://graph.facebook.com/",staticfb:"http://static.ak.facebook.com/",https_staticfb:"https://s-static.ak.facebook.com/",www:"http://www.facebook.com/",https_www:"https://www.facebook.com/",m:"http://m.facebook.com/",https_m:"https://m.facebook.com/"},_locale:null,_localeIsRtl:false,getDomain:function(a){switch(a){case"api":return FB._domain.api;case"api_read":return FB._domain.api_read;case"cdn":return(window.location.protocol=="https:"||FB._https)?FB._domain.https_cdn:FB._domain.cdn;case"cdn_foreign":return FB._domain.cdn_foreign;case"https_cdn":return FB._domain.https_cdn;case"graph":return FB._domain.graph;case"staticfb":return(document.referrer.indexOf("https:")==0||FB._https)?FB._domain.https_staticfb:FB._domain.staticfb;case"https_staticfb":return FB._domain.https_staticfb;case"www":return(window.location.protocol=="https:"||FB._https)?FB._domain.https_www:FB._domain.www;case"https_www":return FB._domain.https_www;case"m":return(window.location.protocol=="https:"||FB._https)?FB._domain.https_m:FB._domain.m;case"https_m":return FB._domain.https_m}},copy:function(d,c,b,e){for(var a in c){if(b||typeof d[a]==="undefined"){d[a]=e?e(c[a]):c[a]}}return d},create:function(c,h){var e=window.FB,d=c?c.split("."):[],a=d.length;for(var b=0;b<a;b++){var g=d[b];var f=e[g];if(!f){f=(h&&b+1==a)?h:{};e[g]=f}e=f}return e},provide:function(c,b,a){return FB.copy(typeof c=="string"?FB.create(c):c,b,a)},guid:function(){return"f"+(Math.random()*(1<<30)).toString(16).replace(".","")},log:function(a){if(FB._logging){if(window.Debug&&window.Debug.writeln){window.Debug.writeln(a)}else{if(window.console){window.console.log(a)}}}if(FB.Event){FB.Event.fire("fb.log",a)}},$:function(a){return document.getElementById(a)}}}FB.provide("Array",{indexOf:function(a,c){if(a.indexOf){return a.indexOf(c)}var d=a.length;if(d){for(var b=0;b<d;b++){if(a[b]===c){return b}}}return -1},merge:function(c,b){for(var a=0;a<b.length;a++){if(FB.Array.indexOf(c,b[a])<0){c.push(b[a])}}return c},filter:function(a,c){var b=[];for(var d=0;d<a.length;d++){if(c(a[d])){b.push(a[d])}}return b},keys:function(c,d){var a=[];for(var b in c){if(d||c.hasOwnProperty(b)){a.push(b)}}return a},map:function(a,d){var c=[];for(var b=0;b<a.length;b++){c.push(d(a[b]))}return c},forEach:function(c,a,f){if(!c){return}if(Object.prototype.toString.apply(c)==="[object Array]"||(!(c instanceof Function)&&typeof c.length=="number")){if(c.forEach){c.forEach(a)}else{for(var b=0,e=c.length;b<e;b++){a(c[b],b,c)}}}else{for(var d in c){if(f||c.hasOwnProperty(d)){a(c[d],d,c)}}}},toArray:function(b){for(var c=0,a=[],d=b.length;c<d;c++){a[c]=b[c]}return a}});FB.provide("QS",{encode:function(c,d,a){d=d===undefined?"&":d;a=a===false?function(e){return e}:encodeURIComponent;var b=[];FB.Array.forEach(c,function(f,e){if(f!==null&&typeof f!="undefined"){b.push(a(e)+"="+a(f))}});b.sort();return b.join(d)},decode:function(f){var a=decodeURIComponent,d={},e=f.split("&"),b,c;for(b=0;b<e.length;b++){c=e[b].split("=",2);if(c&&c[0]){d[a(c[0])]=a(c[1]||"")}}return d}});FB.provide("Content",{_root:null,_hiddenRoot:null,_callbacks:{},append:function(a,c){if(!c){if(!FB.Content._root){FB.Content._root=c=FB.$("fb-root");if(!c){FB.log('The "fb-root" div has not been created.');return}else{c.className+=" fb_reset"}}else{c=FB.Content._root}}if(typeof a=="string"){var b=document.createElement("div");c.appendChild(b).innerHTML=a;return b}else{return c.appendChild(a)}},appendHidden:function(a){if(!FB.Content._hiddenRoot){var b=document.createElement("div"),c=b.style;c.position="absolute";c.top="-10000px";c.width=c.height=0;FB.Content._hiddenRoot=FB.Content.append(b)}return FB.Content.append(a,FB.Content._hiddenRoot)},insertIframe:function(e){e.id=e.id||FB.guid();e.name=e.name||FB.guid();var a=FB.guid(),f=false,d=false;FB.Content._callbacks[a]=function(){if(f&&!d){d=true;e.onload&&e.onload(e.root.firstChild)}};if(document.attachEvent){var b=('<iframe id="'+e.id+'" name="'+e.name+'"'+(e.title?' title="'+e.title+'"':"")+(e.className?' class="'+e.className+'"':"")+' style="border:none;'+(e.width?"width:"+e.width+"px;":"")+(e.height?"height:"+e.height+"px;":"")+'" src="'+e.url+'" frameborder="0" scrolling="no" allowtransparency="true" onload="FB.Content._callbacks.'+a+'()"></iframe>');e.root.innerHTML='<iframe src="javascript:false" frameborder="0" scrolling="no" style="height:1px"></iframe>';f=true;window.setTimeout(function(){e.root.innerHTML=b;e.onInsert&&e.onInsert(e.root.firstChild)},0)}else{var c=document.createElement("iframe");c.id=e.id;c.name=e.name;c.onload=FB.Content._callbacks[a];c.scrolling="no";c.style.border="none";c.style.overflow="hidden";if(e.title){c.title=e.title}if(e.className){c.className=e.className}if(e.height){c.style.height=e.height+"px"}if(e.width){c.style.width=e.width+"px"}e.root.appendChild(c);f=true;c.src=e.url;e.onInsert&&e.onInsert(c)}},submitToTarget:function(c,b){var a=document.createElement("form");a.action=c.url;a.target=c.target;a.method=(b)?"GET":"POST";FB.Content.appendHidden(a);FB.Array.forEach(c.params,function(f,e){if(f!==null&&f!==undefined){var d=document.createElement("input");d.name=e;d.value=f;a.appendChild(d)}});a.submit();a.parentNode.removeChild(a)}});FB.provide("Flash",{_minVersions:[[9,0,159,0],[10,0,22,87]],_swfPath:"swf/XdComm.swf",_callbacks:[],_names:{},_unloadRegistered:false,init:function(){if(FB.Flash._init){return}FB.Flash._init=true;window.FB_OnFlashXdCommReady=function(){FB.Flash._ready=true;for(var a=0,b=FB.Flash._callbacks.length;a<b;a++){FB.Flash._callbacks[a]()}FB.Flash._callbacks=[]};FB.Flash.embedSWF("XdComm",FB.getDomain("cdn_foreign")+FB.Flash._swfPath)},embedSWF:function(d,e,b){var a=!!document.attachEvent,c=('<object type="application/x-shockwave-flash" id="'+d+'" '+(b?'flashvars="'+b+'" ':"")+(a?'name="'+d+'" ':"")+(a?"":'data="'+e+'" ')+(a?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ':"")+'allowscriptaccess="always"><param name="movie" value="'+e+'"></param><param name="allowscriptaccess" value="always"></param></object>');FB.Content.appendHidden(c);if(FB.UA.ie()>=9){if(!FB.Flash._unloadRegistered){var f=function(){FB.Array.forEach(FB.Flash._names,function(i,h){var g=document.getElementById(h);if(g){g.removeNode(true)}})};window.attachEvent("onunload",f);FB.Flash._unloadRegistered=true}FB.Flash._names[d]=true}},hasMinVersion:function(){if(typeof FB.Flash._hasMinVersion==="undefined"){var i,a,b,h=[];try{i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(j){if(navigator.mimeTypes.length>0){var mimeType="application/x-shockwave-flash";if(navigator.mimeTypes[mimeType].enabledPlugin){var name="Shockwave Flash";i=(navigator.plugins[name+" 2.0"]||navigator.plugins[name]).description}}}if(i){var f=i.replace(/\D+/g,",").match(/^,?(.+),?$/)[1].split(",");for(a=0,b=f.length;a<b;a++){h.push(parseInt(f[a],10))}}FB.Flash._hasMinVersion=false;majorVersion:for(a=0,b=FB.Flash._minVersions.length;a<b;a++){var g=FB.Flash._minVersions[a];if(g[0]!=h[0]){continue}for(var c=1,d=g.length,e=h.length;(c<d&&c<e);c++){if(h[c]<g[c]){FB.Flash._hasMinVersion=false;continue majorVersion}else{FB.Flash._hasMinVersion=true;if(h[c]>g[c]){break majorVersion}}}}}return FB.Flash._hasMinVersion},onReady:function(a){FB.Flash.init();if(FB.Flash._ready){window.setTimeout(a,0)}else{FB.Flash._callbacks.push(a)}}});if(typeof JSON==="undefined"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());FB.provide("JSON",{stringify:function(a){if(window.Prototype&&Object.toJSON){return Object.toJSON(a)}else{return JSON.stringify(a)}},parse:function(a){return JSON.parse(a)},flatten:function(c){var a={};for(var b in c){if(c.hasOwnProperty(b)){var d=c[b];if(null===d||undefined===d){continue}else{if(typeof d=="string"){a[b]=d}else{a[b]=FB.JSON.stringify(d)}}}}return a}});FB.provide("",{api:function(){if(typeof arguments[0]==="string"){FB.ApiServer.graph.apply(FB.ApiServer,arguments)}else{FB.ApiServer.rest.apply(FB.ApiServer,arguments)}}});FB.provide("ApiServer",{METHODS:["get","post","delete","put"],_callbacks:{},_readOnlyCalls:{fql_query:true,fql_multiquery:true,friends_get:true,notifications_get:true,stream_get:true,users_getinfo:true},graph:function(){var a=Array.prototype.slice.call(arguments),f=a.shift(),d=a.shift(),c,e,b;while(d){var g=typeof d;if(g==="string"&&!c){c=d.toLowerCase()}else{if(g==="function"&&!b){b=d}else{if(g==="object"&&!e){e=d}else{FB.log("Invalid argument passed to FB.api(): "+d);return}}}d=a.shift()}c=c||"get";e=e||{};if(f[0]==="/"){f=f.substr(1)}if(FB.Array.indexOf(FB.ApiServer.METHODS,c)<0){FB.log("Invalid method passed to FB.api(): "+c);return}FB.ApiServer.oauthRequest("graph",f,c,e,b)},rest:function(e,a){var c=e.method.toLowerCase().replace(".","_");if(FB.Auth&&c==="auth_revokeauthorization"){var d=a;a=function(f){if(f===true){if(FB._oauth){FB.Auth.setAuthResponse(null,"not_authorized")}else{FB.Auth.setSession(null,"notConnected")}}d&&d(f)}}e.format="json-strings";e.api_key=FB._apiKey;var b=FB.ApiServer._readOnlyCalls[c]?"api_read":"api";FB.ApiServer.oauthRequest(b,"restserver.php","get",e,a)},oauthRequest:function(b,g,d,f,a){if(!f.access_token&&FB.getAccessToken()){f.access_token=FB.getAccessToken()}f.sdk="joey";f.pretty=0;var e=a;a=function(h){if(FB.Auth&&h&&FB._session&&FB._session.access_token==f.access_token&&(h.error_code==="190"||(h.error&&(h.error==="invalid_token"||h.error.type==="OAuthException")))){FB.getLoginStatus(null,true)}e&&e(h)};try{FB.ApiServer.jsonp(b,g,d,FB.JSON.flatten(f),a)}catch(c){try{if(!FB.initSitevars.corsKillSwitch&&FB.ApiServer.corsPost(b,g,d,FB.JSON.flatten(f),a)){return}}catch(e2_ignore){}if(FB.Flash.hasMinVersion()){FB.ApiServer.flash(b,g,d,FB.JSON.flatten(f),a)}else{throw new Error("Your browser does not support long connect requests. You can fix this problem by upgrading your browser or installing the latest version of Flash")}}},corsPost:function(c,g,e,f,a){var i=FB.getDomain(c)+g;if(c=="graph"){f.method=e}var d=FB.QS.encode(f);var b="application/x-www-form-urlencoded";var h=FB.ApiServer._createCORSRequest("POST",i,b);if(h){h.onload=function(){a&&a(FB.JSON.parse(h.responseText))};h.send(d);return true}else{return false}},_createCORSRequest:function(b,c,a){if(!window.XMLHttpRequest){return null}var d=new XMLHttpRequest();if("withCredentials" in d){d.open(b,c,true);d.setRequestHeader("Content-type",a)}else{if(window.XDomainRequest){d=new XDomainRequest();d.open(b,c)}else{d=null}}return d},jsonp:function(b,f,d,e,a){var c=FB.guid(),g=document.createElement("script");if(b==="graph"&&d!=="get"){e.method=d}e.callback="FB.ApiServer._callbacks."+c;var h=(FB.getDomain(b)+f+(f.indexOf("?")>-1?"&":"?")+FB.QS.encode(e));if(h.length>2000){throw new Error("JSONP only support a maximum of 2000 bytes of input.")}FB.ApiServer._callbacks[c]=function(i){a&&a(i);delete FB.ApiServer._callbacks[c];g.parentNode.removeChild(g)};g.src=h;document.getElementsByTagName("head")[0].appendChild(g)},flash:function(b,e,c,d,a){if(!window.FB_OnXdHttpResult){window.FB_OnXdHttpResult=function(g,f){FB.ApiServer._callbacks[g](decodeURIComponent(f))}}FB.Flash.onReady(function(){if(b==="graph"){d.suppress_http_code=1}var h=FB.getDomain(b)+e,f=FB.QS.encode(d);if(c==="get"){if(h.length+f.length>2000){if(b==="graph"){d.method="get"}c="post";f=FB.QS.encode(d)}else{h+=(h.indexOf("?")>-1?"&":"?")+f;f=""}}else{if(c!=="post"){if(b==="graph"){d.method=c}c="post";f=FB.QS.encode(d)}}var g=document.XdComm.sendXdHttpRequest(c.toUpperCase(),h,f,null);FB.ApiServer._callbacks[g]=function(i){a&&a(FB.JSON.parse(i));delete FB.ApiServer._callbacks[g]}})}});FB.provide("EventProvider",{subscribers:function(){if(!this._subscribersMap){this._subscribersMap={}}return this._subscribersMap},subscribe:function(b,a){var c=this.subscribers();if(!c[b]){c[b]=[a]}else{c[b].push(a)}},unsubscribe:function(b,a){var c=this.subscribers()[b];FB.Array.forEach(c,function(e,d){if(e==a){c[d]=null}})},monitor:function(d,a){if(!a()){var b=this,c=function(){if(a.apply(a,arguments)){b.unsubscribe(d,c)}};this.subscribe(d,c)}},clear:function(a){delete this.subscribers()[a]},fire:function(){var a=Array.prototype.slice.call(arguments),b=a.shift();FB.Array.forEach(this.subscribers()[b],function(c){if(c){c.apply(this,a)}})},listen:function(a,event,b){if(a.addEventListener){a.addEventListener(event,b,false)}else{if(a.attachEvent){a.attachEvent(event,b)}}},unlisten:function(a,event,b){if(a.removeEventListener){a.removeEventListener(event,b,false)}else{if(a.detachEvent){a.detachEvent(event,b)}}}});FB.provide("Event",FB.EventProvider);FB.provide("XD",{_origin:null,_transport:null,_callbacks:{},_forever:{},_xdProxyUrl:"connect/xd_proxy.php",_openerTransport:null,_openerOrigin:null,_nonOpenerOrigin:null,init:function(b){if(FB.XD._origin){return}var d=(window.location.protocol+"//"+window.location.host+"/"+FB.guid());if(window.addEventListener&&!window.attachEvent&&window.postMessage){FB.XD._origin=d;FB.XD.PostMessage.init();FB.XD._transport="postmessage"}else{if(!b&&FB.Flash.hasMinVersion()){if(document.getElementById("fb-root")){var c=document.domain;if(c=="facebook.com"){c=window.location.host}FB.XD._origin=(window.location.protocol+"//"+c+"/"+FB.guid());FB.XD.Flash.init();FB.XD._transport="flash"}else{if(FB.log){FB.log("missing fb-root, defaulting to fragment-based xdcomm")}FB.XD._transport="fragment";FB.XD.Fragment._channelUrl=b||window.location.toString()}}else{FB.XD._transport="fragment";FB.XD.Fragment._channelUrl=b||window.location.toString()}}var a=!!window.attachEvent;if(FB.XD._transport!="postmessage"&&a&&window.postMessage){FB.XD._openerTransport=FB.XD._transport;FB.XD._openerOrigin=FB.XD._origin;FB.XD._nonOpenerOrigin=d}},resolveRelation:function(b){var g,d,f=b.split("."),e=window;for(var a=0,c=f.length;a<c;a++){g=f[a];if(g==="opener"||g==="parent"||g==="top"){e=e[g]}else{if(d=/^frames\[['"]?([a-zA-Z0-9-_]+)['"]?\]$/.exec(g)){e=e.frames[d[1]]}else{throw new SyntaxError("Malformed id to resolve: "+b+", pt: "+g)}}}return e},handler:function(a,f,c,d,b){if(window.location.toString().indexOf(FB.XD.Fragment._magic)>0){return"javascript:false;//"}var g=FB.getDomain((b?"https_":"")+"cdn")+FB.XD._xdProxyUrl+"#";d=d||FB.guid();f=f||"opener";if(FB.XD._openerTransport){if(f=="opener"){FB.XD._transport=FB.XD._openerTransport;FB.XD._origin=FB.XD._openerOrigin}else{FB.XD.PostMessage.init();FB.XD._transport="postmessage";FB.XD._origin=FB.XD._nonOpenerOrigin}}if(FB.XD._transport=="fragment"){g=FB.XD.Fragment._channelUrl;var e=g.indexOf("#");if(e>0){g=g.substr(0,e)}g+=((g.indexOf("?")<0?"?":"&")+FB.XD.Fragment._magic+"#?=&")}if(c){FB.XD._forever[d]=true}FB.XD._callbacks[d]=a;return g+FB.QS.encode({cb:d,origin:FB.XD._origin,relation:f,transport:FB.XD._transport})},recv:function(b){if(typeof b=="string"){try{b=FB.JSON.parse(b)}catch(c){b=FB.QS.decode(b)}}var a=FB.XD._callbacks[b.cb];if(!FB.XD._forever[b.cb]){delete FB.XD._callbacks[b.cb]}a&&a(b)},PostMessage:{_isInitialized:false,init:function(){if(!FB.XD.PostMessage._isInitialized){var a=FB.XD.PostMessage.onMessage;window.addEventListener?window.addEventListener("message",a,false):window.attachEvent("onmessage",a);FB.XD.PostMessage._isInitialized=true}},onMessage:function(event){FB.XD.recv(event.data)}},WebView:{onMessage:function(a,c,b){FB.XD.recv(b)}},Flash:{init:function(){FB.Flash.onReady(function(){document.XdComm.postMessage_init("FB.XD.Flash.onMessage",FB.XD._openerOrigin?FB.XD._openerOrigin:FB.XD._origin)})},onMessage:function(a){FB.XD.recv(decodeURIComponent(a))}},Fragment:{_magic:"fb_xd_fragment",checkAndDispatch:function(){var b=window.location.toString(),a=b.substr(b.indexOf("#")+1),c=b.indexOf(FB.XD.Fragment._magic);if(c>0){FB.init=FB.getLoginStatus=FB.api=function(){};document.documentElement.style.display="none";FB.XD.resolveRelation(FB.QS.decode(a).relation).FB.XD.recv(a)}}}});FB.XD.Fragment.checkAndDispatch();FB.provide("UA",{ie:function(){return FB.UA._populate()||this._ie},firefox:function(){return FB.UA._populate()||this._firefox},opera:function(){return FB.UA._populate()||this._opera},safari:function(){return FB.UA._populate()||this._safari},chrome:function(){return FB.UA._populate()||this._chrome},windows:function(){return FB.UA._populate()||this._windows},osx:function(){return FB.UA._populate()||this._osx},linux:function(){return FB.UA._populate()||this._linux},ios:function(){FB.UA._populate();return FB.UA.mobile()&&this._ios},mobile:function(){FB.UA._populate();return !FB._inCanvas&&FB.UA._enableMobile&&this._mobile},nativeApp:function(){return FB.UA.mobile()&&navigator.userAgent.match(/FBAN\/\w+;/i)},android:function(){FB.UA._populate();return FB.UA.mobile()&&this._android},iPad:function(){FB.UA._populate();return FB.UA.mobile()&&this._iPad},_populated:false,_populate:function(){if(FB.UA._populated){return}FB.UA._populated=true;var a=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))/.exec(navigator.userAgent);var c=/(Mac OS X)|(Windows)|(Linux)/.exec(navigator.userAgent);var b=/\b(iPhone|iP[ao]d)/.exec(navigator.userAgent);FB.UA._iPad=/\b(iPad)/.exec(navigator.userAgent);FB.UA._android=navigator.userAgent.match(/Android/i);FB.UA._mobile=b||FB.UA._android||navigator.userAgent.match(/Mobile/i);if(a){FB.UA._ie=a[1]?parseFloat(a[1]):NaN;if(FB.UA._ie>=8&&!window.HTMLCollection){FB.UA._ie=7}FB.UA._firefox=a[2]?parseFloat(a[2]):NaN;FB.UA._opera=a[3]?parseFloat(a[3]):NaN;FB.UA._safari=a[4]?parseFloat(a[4]):NaN;if(FB.UA._safari){a=/(?:Chrome\/(\d+\.\d+))/.exec(navigator.userAgent);FB.UA._chrome=a&&a[1]?parseFloat(a[1]):NaN}else{FB.UA._chrome=NaN}}else{FB.UA._ie=FB.UA._firefox=FB.UA._opera=FB.UA._chrome=FB.UA._safari=NaN}if(c){FB.UA._osx=!!c[1];FB.UA._windows=!!c[2];FB.UA._linux=!!c[3]}else{FB.UA._osx=FB.UA._windows=FB.UA._linux=false}FB.UA._ios=b}});FB.provide("Arbiter",{_canvasProxyUrl:"connect/canvas_proxy.php",BEHAVIOR_EVENT:"e",BEHAVIOR_PERSISTENT:"p",BEHAVIOR_STATE:"s",inform:function(d,f,g,c,a){if(FB.Canvas.isTabIframe()||(FB._inPlugin&&window.postMessage)||(!FB._inCanvas&&FB.UA.mobile()&&window.postMessage)){var e=FB.JSON.stringify({method:d,params:f,behavior:a||FB.Arbiter.BEHAVIOR_PERSISTENT});if(window.postMessage){FB.XD.resolveRelation(g||"parent").postMessage(e,"*");return}else{try{window.opener.postMessage(e);return}catch(b){}}}var i=(FB.getDomain((c?"https_":"")+"staticfb")+FB.Arbiter._canvasProxyUrl+"#"+FB.QS.encode({method:d,params:FB.JSON.stringify(f||{}),behavior:a||FB.Arbiter.BEHAVIOR_PERSISTENT,relation:g}));var h=FB.Content.appendHidden("");FB.Content.insertIframe({url:i,root:h,width:1,height:1,onload:function(){setTimeout(function(){h.parentNode.removeChild(h)},10)}})}});FB.provide("Canvas",{_timer:null,_lastSize:{},_pageInfo:{clientWidth:0,clientHeight:0,scrollLeft:0,scrollTop:0,offsetLeft:0,offsetTop:0},getPageInfo:function(a){var d="top.frames["+window.name+"]";var b=FB.XD.handler(function(e){for(var f in FB.Canvas._pageInfo){if(e[f]){FB.Canvas._pageInfo[f]=e[f]|0}}a&&a(FB.Canvas._pageInfo)},d,true);var c={channelUrl:b,frame:window.name};FB.Arbiter.inform("getPageInfo",c,"top");return FB.Canvas._pageInfo},_flashClassID:"CLSID:D27CDB6E-AE6D-11CF-96B8-444553540000",_hideFlashCallback:function(f){var a=window.document.getElementsByTagName("object");for(var d=0;d<a.length;d++){var b=a[d];if(b.type!="application/x-shockwave-flash"&&b.classid.toUpperCase()!=FB.Canvas._flashClassID){continue}var c=false;for(var e=0;e<b.childNodes.length;e++){if(b.childNodes[e].nodeName=="PARAM"&&b.childNodes[e].name=="wmode"){if(b.childNodes[e].value=="opaque"||b.childNodes[e].value=="transparent"){c=true}}}if(!c){if(f.state=="opened"){b._old_visibility=b.style.visibility;b.style.visibility="hidden"}else{if(f.state=="closed"){b.style.visibility=b._old_visibility;delete b._old_visibility}}}}},init:function(){var b=FB.Dom.getViewportInfo();FB.Canvas._pageInfo.clientWidth=b.width;FB.Canvas._pageInfo.clientHeight=b.height;FB.Canvas.getPageInfo();var a=FB.XD.handler(FB.Canvas._hideFlashCallback,"top.frames["+window.name+"]",true);FB.Arbiter.inform("iframeSetupFlashHiding",{channelUrl:a})},setSize:function(e){if(typeof e!="object"){e={}}var c=0,b=0;e=e||{};if(e.width==null||e.height==null){e=FB.copy(e,FB.Canvas._computeContentSize());c=16;b=4}e=FB.copy(e,{frame:window.name||"iframe_canvas"});if(FB.Canvas._lastSize[e.frame]){var d=FB.Canvas._lastSize[e.frame].height;var a=e.height-d;if(FB.Canvas._lastSize[e.frame].width==e.width&&(a<=b&&a>=-c)){return false}}FB.Canvas._lastSize[e.frame]=e;FB.Arbiter.inform("setSize",e);return true},scrollTo:function(a,b){FB.Arbiter.inform("scrollTo",{frame:window.name||"iframe_canvas",x:a,y:b})},setAutoGrow:function(b,a){if(a===undefined&&typeof b=="number"){a=b;b=true}if(b===undefined||b){if(FB.Canvas._timer===null){FB.Canvas._timer=window.setInterval(FB.Canvas.setSize,a||100)}FB.Canvas.setSize()}else{if(FB.Canvas._timer!==null){window.clearInterval(FB.Canvas._timer);FB.Canvas._timer=null}}},setAutoResize:function(b,a){return FB.Canvas.setAutoGrow(b,a)},isTabIframe:function(){return(window.name.indexOf("app_runner_")===0)},setDoneLoading:function(a){FB.Canvas._passAppTtiMessage(a,"RecordIframeAppTti")},stopTimer:function(a){FB.Canvas._passAppTtiMessage(a,"StopIframeAppTtiTimer")},setUrlHandler:function(a){var b=FB.XD.handler(a,"top.frames["+window.name+"]",true);FB.Arbiter.inform("setUrlHandler",b);FB.Event.listen(window,"load",function(){FB.Arbiter.inform("setUrlHandler",b)})},startTimer:function(){FB.Canvas._passAppTtiMessage(null,"StartIframeAppTtiTimer")},_passAppTtiMessage:function(a,c){var b=null;if(a){b=FB.XD.handler(a,"top.frames["+window.name+"]",false)}FB.Arbiter.inform(c,{frame:window.name||"iframe_canvas",time:(new Date()).getTime(),appId:parseInt(FB._apiKey,10),channelUrl:b})},_computeContentSize:function(){var a=document.body,e=document.documentElement,i=0,d=Math.max(a.offsetTop,0),h=Math.max(e.offsetTop,0),c=a.scrollHeight+d,b=a.offsetHeight+d,g=e.scrollHeight+h,f=e.offsetHeight+h;bottom=Math.max(c,b,g,f);if(a.offsetWidth<a.scrollWidth){i=a.scrollWidth+a.offsetLeft}else{FB.Array.forEach(a.childNodes,function(j){var k=j.offsetWidth+j.offsetLeft;if(k>i){i=k}})}if(e.clientLeft>0){i+=(e.clientLeft*2)}if(e.clientTop>0){bottom+=(e.clientTop*2)}return{height:bottom,width:i}}});FB.provide("Intl",{_punctCharClass:("[.!?\u3002\uFF01\uFF1F\u0964\u2026\u0EAF\u1801\u0E2F\uFF0E]"),_endsInPunct:function(a){if(typeof a!="string"){return false}return a.match(new RegExp(FB.Intl._punctCharClass+"[)\"'\u00BB\u0F3B\u0F3D\u2019\u201D\u203A\u3009\u300B\u300D\u300F\u3011\u3015\u3017\u3019\u301B\u301E\u301F\uFD3F\uFF07\uFF09\uFF3Ds]*$"))},_tx:function(d,a){if(a!==undefined){if(typeof a!="object"){FB.log("The second arg to FB.Intl._tx() must be an Object for tx("+d+", ...)")}else{var c;for(var b in a){if(a.hasOwnProperty(b)){if(FB.Intl._endsInPunct(a[b])){c=new RegExp("{"+b+"}"+FB.Intl._punctCharClass+"*","g")}else{c=new RegExp("{"+b+"}","g")}d=d.replace(c,a[b])}}}}return d},tx:function(b,a){function c(e,d){void (0)}if(!FB.Intl._stringTable){return null}return FB.Intl._tx(FB.Intl._stringTable[b],a)}});FB.provide("String",{trim:function(a){return a.replace(/^\s*|\s*$/g,"")},format:function(a){if(!FB.String.format._formatRE){FB.String.format._formatRE=/(\{[^\}^\{]+\})/g}var b=arguments;return a.replace(FB.String.format._formatRE,function(e,d){var c=parseInt(d.substr(1),10),f=b[c+1];if(f===null||f===undefined){return""}return f.toString()})},escapeHTML:function(b){var a=document.createElement("div");a.appendChild(document.createTextNode(b));return a.innerHTML.replace(/"/g,"&quot;").replace(/'/g,"&#39;")},quote:function(c){var a=/["\\\x00-\x1f\x7f-\x9f]/g,b={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return a.test(c)?'"'+c.replace(a,function(d){var e=b[d];if(e){return e}e=d.charCodeAt();return"\\u00"+Math.floor(e/16).toString(16)+(e%16).toString(16)})+'"':'"'+c+'"'}});FB.provide("Dom",{containsCss:function(c,a){var b=" "+c.className+" ";return b.indexOf(" "+a+" ")>=0},addCss:function(b,a){if(!FB.Dom.containsCss(b,a)){b.className=b.className+" "+a}},removeCss:function(b,a){if(FB.Dom.containsCss(b,a)){b.className=b.className.replace(a,"");FB.Dom.removeCss(b,a)}},getByClass:function(b,c){c=c||document.body;if(c.getElementsByClassName){return FB.Array.toArray(c.getElementsByClassName(b))}var a=c.getElementsByTagName("*"),d=[];for(var e=0,f=a.length;e<f;e++){if(this.containsCss(a[e],b)){d[d.length]=a[e]}}return d},getStyle:function(a,c){var d=false,b=a.style;if(a.currentStyle){FB.Array.forEach(c.match(/\-([a-z])/g),function(e){c=c.replace(e,e.substr(1,1).toUpperCase())});d=a.currentStyle[c]}else{FB.Array.forEach(c.match(/[A-Z]/g),function(e){c=c.replace(e,"-"+e.toLowerCase())});if(window.getComputedStyle){d=document.defaultView.getComputedStyle(a,null).getPropertyValue(c);if(c=="background-position-y"||c=="background-position-x"){if(d=="top"||d=="left"){d="0px"}}}}if(c=="opacity"){if(a.filters&&a.filters.alpha){return d}return d*100}return d},setStyle:function(a,c,d){var b=a.style;if(c=="opacity"){if(d>=100){d=99.999}if(d<0){d=0}b.opacity=d/100;b.MozOpacity=d/100;b.KhtmlOpacity=d/100;if(a.filters){if(a.filters.alpha==undefined){a.filter="alpha(opacity="+d+")"}else{a.filters.alpha.opacity=d}}}else{b[c]=d}},addScript:function(b){var a=document.createElement("script");a.type="text/javascript";a.src=b;return document.getElementsByTagName("head")[0].appendChild(a)},addCssRules:function(e,c){if(!FB.Dom._cssRules){FB.Dom._cssRules={}}var a=true;FB.Array.forEach(c,function(f){if(!(f in FB.Dom._cssRules)){a=false;FB.Dom._cssRules[f]=true}});if(a){return}if(!FB.UA.ie()){var d=document.createElement("style");d.type="text/css";d.textContent=e;document.getElementsByTagName("head")[0].appendChild(d)}else{try{document.createStyleSheet().cssText=e}catch(b){if(document.styleSheets[0]){document.styleSheets[0].cssText+=e}}}},getViewportInfo:function(){var a=(document.documentElement&&document.compatMode=="CSS1Compat")?document.documentElement:document.body;return{scrollTop:a.scrollTop,scrollLeft:a.scrollLeft,width:self.innerWidth?self.innerWidth:a.clientWidth,height:self.innerHeight?self.innerHeight:a.clientHeight}},ready:function(a){if(FB.Dom._isReady){a&&a()}else{FB.Event.subscribe("dom.ready",a)}}});(function(){function domReady(){FB.Dom._isReady=true;FB.Event.fire("dom.ready");FB.Event.clear("dom.ready")}if(FB.Dom._isReady||document.readyState=="complete"){return domReady()}if(document.addEventListener){document.addEventListener("DOMContentLoaded",domReady,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",domReady)}}if(FB.UA.ie()&&window===top){(function(){try{document.documentElement.doScroll("left")}catch(error){setTimeout(arguments.callee,0);return}domReady()})()}var oldonload=window.onload;window.onload=function(){domReady();if(oldonload){if(typeof oldonload=="string"){eval(oldonload)}else{oldonload()}}}})();FB.provide("",{bind:function(){var a=Array.prototype.slice.call(arguments),c=a.shift(),b=a.shift();return function(){return c.apply(b,a.concat(Array.prototype.slice.call(arguments)))}},Class:function(b,a,d){if(FB.CLASSES[b]){return FB.CLASSES[b]}var c=a||function(){};c.prototype=d;c.prototype.bind=function(e){return FB.bind(e,this)};c.prototype.constructor=c;FB.create(b,c);FB.CLASSES[b]=c;return c},subclass:function(d,b,c,e){if(FB.CLASSES[d]){return FB.CLASSES[d]}var a=FB.create(b);FB.copy(e,a.prototype);e._base=a;e._callBase=function(g){var f=Array.prototype.slice.call(arguments,1);return a.prototype[g].apply(this,f)};return FB.Class(d,c?c:function(){if(a.apply){a.apply(this,arguments)}},e)},CLASSES:{}});FB.provide("Type",{isType:function(a,b){while(a){if(a.constructor===b||a===b){return true}else{a=a._base}}return false}});FB.Class("Obj",null,FB.copy({setProperty:function(a,b){if(FB.JSON.stringify(b)!=FB.JSON.stringify(this[a])){this[a]=b;this.fire(a,b)}}},FB.EventProvider));FB.subclass("Dialog","Obj",function(a){this.id=a;if(!FB.Dialog._dialogs){FB.Dialog._dialogs={};FB.Dialog._addOrientationHandler()}FB.Dialog._dialogs[a]=this},{});FB.provide("Dialog",{_dialogs:null,_lastYOffset:0,_loaderEl:null,_overlayEl:null,_stack:[],_active:null,_popStateListenerOn:false,_hideOnPopState:function(a){FB.Dialog.hide(FB.Dialog._stack.pop())},get:function(a){return FB.Dialog._dialogs[a]},_findRoot:function(a){while(a){if(FB.Dom.containsCss(a,"fb_dialog")){return a}a=a.parentNode}},_createWWWLoader:function(a){a=parseInt(a,10);a=a?a:460;return FB.Dialog.create({content:('<div class="dialog_title">  <a id="fb_dialog_loader_close">    <div class="fb_dialog_close_icon"></div>  </a>  <span>Facebook</span>  <div style="clear:both;"></div></div><div class="dialog_content"></div><div class="dialog_footer"></div>'),width:a})},_createMobileLoader:function(){var a=FB.UA.nativeApp()?"":('<table>  <tbody>    <tr>      <td class="header_left">        <label class="touchable_button">          <input type="submit" value="'+FB.Intl._tx("Cancel")+'"            id="fb_dialog_loader_close"/>        </label>      </td>      <td class="header_center">        <div>'+FB.Intl._tx("Loading...")+'</div>      </td>      <td class="header_right">      </td>    </tr>  </tbody></table>');return FB.Dialog.create({classes:"loading"+(FB.UA.iPad()?" centered":""),content:('<div class="dialog_header">'+a+"</div>")})},_restoreBodyPosition:function(){if(!FB.UA.iPad()){var a=document.getElementsByTagName("body")[0];FB.Dom.removeCss(a,"fb_hidden")}},_showIPadOverlay:function(){if(!FB.UA.iPad()){return}if(!FB.Dialog._overlayEl){FB.Dialog._overlayEl=document.createElement("div");FB.Dialog._overlayEl.setAttribute("id","fb_dialog_ipad_overlay");FB.Content.append(FB.Dialog._overlayEl,null)}FB.Dialog._overlayEl.className=""},_hideIPadOverlay:function(){if(FB.UA.iPad()){FB.Dialog._overlayEl.className="hidden"}},showLoader:function(a,d){FB.Dialog._showIPadOverlay();if(!FB.Dialog._loaderEl){FB.Dialog._loaderEl=FB.Dialog._findRoot(FB.UA.mobile()?FB.Dialog._createMobileLoader():FB.Dialog._createWWWLoader(d))}if(!a){a=function(){}}var c=FB.$("fb_dialog_loader_close");FB.Dom.removeCss(c,"fb_hidden");c.onclick=function(){FB.Dialog._hideLoader();FB.Dialog._restoreBodyPosition();FB.Dialog._hideIPadOverlay();a()};var b=FB.$("fb_dialog_ipad_overlay");if(b){b.ontouchstart=c.onclick}FB.Dialog._makeActive(FB.Dialog._loaderEl)},_hideLoader:function(){if(FB.Dialog._loaderEl&&FB.Dialog._loaderEl==FB.Dialog._active){FB.Dialog._loaderEl.style.top="-10000px"}},_makeActive:function(a){FB.Dialog._setDialogSizes();FB.Dialog._lowerActive();FB.Dialog._active=a;var b=FB.Canvas.getPageInfo(function(c){FB.Dialog._centerActive(c)});FB.Dialog._centerActive(b)},_lowerActive:function(){if(!FB.Dialog._active){return}FB.Dialog._active.style.top="-10000px";FB.Dialog._active=null},_removeStacked:function(a){FB.Dialog._stack=FB.Array.filter(FB.Dialog._stack,function(b){return b!=a})},_centerActive:function(i){var b=FB.Dialog._active;if(!b){return}var k=FB.Dom.getViewportInfo();var l=parseInt(b.offsetWidth,10);var c=parseInt(b.offsetHeight,10);var d=k.scrollLeft+(k.width-l)/2;var f=(k.height-c)/2.5;if(d<f){f=d}var e=k.height-c-f;var j=i.scrollTop-i.offsetTop+(i.clientHeight-c)/2;if(j<f){j=f}else{if(j>e){j=e}}j+=k.scrollTop;if(FB.UA.mobile()){var h=100;if(FB.UA.iPad()){h+=(k.height-c)/2}else{var a=document.getElementsByTagName("body")[0];FB.Dom.addCss(a,"fb_hidden");d=10000;j=10000}var g=FB.Dom.getByClass("fb_dialog_padding",b);if(g.length){g[0].style.height=h+"px"}}b.style.left=(d>0?d:0)+"px";b.style.top=(j>0?j:0)+"px"},_setDialogSizes:function(){if(!FB.UA.mobile()||FB.UA.iPad()){return}for(var a in FB.Dialog._dialogs){if(document.getElementById(a)){var b=document.getElementById(a);b.style.width=FB.UIServer.getDefaultSize().width+"px";b.style.height=FB.UIServer.getDefaultSize().height+"px"}}},_handleOrientationChange:function(){if(FB.UA.iPad()){FB.Dialog._centerActive(FB.Canvas.getPageInfo())}else{for(var a in FB.Dialog._dialogs){if(document.getElementById(a)){document.getElementById(a).style.width=FB.UIServer.getDefaultSize().width+"px"}}}},_addOrientationHandler:function(){if(!FB.UA.mobile()){return}var a="onorientationchange" in window?"orientationchange":"resize";FB.Event.listen(window,a,FB.Dialog._handleOrientationChange)},create:function(e){e=e||{};var d=document.createElement("div"),c=document.createElement("div"),a="fb_dialog";if(e.closeIcon&&e.onClose){var b=document.createElement("a");b.className="fb_dialog_close_icon";b.onclick=e.onClose;d.appendChild(b)}a+=" "+(e.classes||"");if(FB.UA.ie()){a+=" fb_dialog_legacy";FB.Array.forEach(["vert_left","vert_right","horiz_top","horiz_bottom","top_left","top_right","bottom_left","bottom_right"],function(h){var i=document.createElement("span");i.className="fb_dialog_"+h;d.appendChild(i)})}else{a+=(FB.UA.mobile())?" fb_dialog_mobile":" fb_dialog_advanced"}if(e.content){FB.Content.append(e.content,c)}d.className=a;var g=parseInt(e.width,10);if(!isNaN(g)){d.style.width=g+"px"}c.className="fb_dialog_content";d.appendChild(c);if(FB.UA.mobile()){var f=document.createElement("div");f.className="fb_dialog_padding";d.appendChild(f)}FB.Content.append(d);if(e.visible){FB.Dialog.show(d)}return c},show:function(a){var b=FB.Dialog._findRoot(a);if(b){FB.Dialog._removeStacked(b);FB.Dialog._hideLoader();FB.Dialog._makeActive(b);FB.Dialog._stack.push(b);if("fbCallID" in a){FB.Dialog.get(a.fbCallID).fire("iframe_show")}if(!FB.Event._popStateListenerOn){FB.Event.listen(window,"popstate",FB.Dialog._hideOnPopState);FB.Event._popStateListenerOn=true}}},hide:function(a){var b=FB.Dialog._findRoot(a);if(b==FB.Dialog._active){FB.Dialog._lowerActive();FB.Dialog._restoreBodyPosition();FB.Dialog._hideIPadOverlay();if("fbCallID" in a){FB.Dialog.get(a.fbCallID).fire("iframe_hide")}if(FB.Event._popStateListenerOn){FB.Event.unlisten(window,"popstate",FB.Dialog._hideOnPopState);FB.Event._popStateListenerOn=false}}},remove:function(a){a=FB.Dialog._findRoot(a);if(a){var b=FB.Dialog._active==a;FB.Dialog._removeStacked(a);if(b){FB.Dialog._hideLoader();if(FB.Dialog._stack.length>0){FB.Dialog.show(FB.Dialog._stack.pop())}else{FB.Dialog._lowerActive();FB.Dialog._restoreBodyPosition();FB.Dialog._hideIPadOverlay()}}else{if(FB.Dialog._active===null&&FB.Dialog._stack.length>0){FB.Dialog.show(FB.Dialog._stack.pop())}}window.setTimeout(function(){a.parentNode.removeChild(a)},3000)}},isActive:function(a){var b=FB.Dialog._findRoot(a);return b&&b===FB.Dialog._active}});FB.provide("",{ui:function(f,b){if(!f.method){FB.log('"method" is a required parameter for FB.ui().');return null}if((f.method=="permissions.request"||f.method=="permissions.oauth")&&(f.display=="iframe"||f.display=="dialog")){var h;var i;if(FB._oauth){h=f.scope;i=h.split(/\s|,/g)}else{h=f.perms;i=h.split(",")}for(var e=0;e<i.length;e++){var g=FB.String.trim(i[e]);if(g&&!FB.initSitevars.iframePermissions[g]){f.display="popup";break}}}var a=FB.UIServer.prepareCall(f,b);if(!a){return null}var d=a.params.display;if(d==="dialog"){d="iframe"}else{if(d==="none"){d="hidden"}}var c=FB.UIServer[d];if(!c){FB.log('"display" must be one of "popup", "dialog", "iframe", "touch", "async", "hidden", or "none"');return null}c(a);return a.dialog}});FB.provide("UIServer",{Methods:{},_loadedNodes:{},_defaultCb:{},_resultToken:'"xxRESULTTOKENxx"',_forceHTTPS:false,genericTransform:function(a){if(a.params.display=="dialog"||a.params.display=="iframe"){a.params.display="iframe";a.params.channel=FB.UIServer._xdChannelHandler(a.id,"parent.parent")}return a},prepareCall:function(h,b){var g=h.method.toLowerCase(),f=FB.copy({},FB.UIServer.Methods[g]),e=FB.guid(),c=(f.noHttps!==true)&&(FB._https||(g!=="auth.status"&&g!="login.status"));FB.UIServer._forceHTTPS=c;FB.copy(h,{api_key:FB._apiKey,app_id:FB._apiKey,locale:FB._locale,sdk:"joey",access_token:c&&FB.getAccessToken()||undefined});h.display=FB.UIServer.getDisplayMode(f,h);if(!f.url){f.url="dialog/"+g}var a={cb:b,id:e,size:f.size||FB.UIServer.getDefaultSize(),url:FB.getDomain(c?"https_www":"www")+f.url,forceHTTPS:c,params:h,name:g,dialog:new FB.Dialog(e)};var j=f.transform?f.transform:FB.UIServer.genericTransform;if(j){a=j(a);if(!a){return}}var d=f.getXdRelation||FB.UIServer.getXdRelation;var i=d(a.params);if(!(a.id in FB.UIServer._defaultCb)&&!("next" in a.params)){a.params.next=FB.UIServer._xdResult(a.cb,a.id,i,true)}if(i==="parent"){a.params.channel_url=FB.UIServer._xdChannelHandler(e,"parent.parent")}a=FB.UIServer.prepareParams(a);return a},prepareParams:function(a){var c=a.params.method;if(!FB.Canvas.isTabIframe()){delete a.params.method}if(FB.TemplateUI&&FB.TemplateUI.supportsTemplate(c,a)){if(FB.reportTemplates){console.log("Using template for "+c+".")}FB.TemplateUI.useCachedUI(c,a)}else{a.params=FB.JSON.flatten(a.params);var b=FB.QS.encode(a.params);if(FB.UIServer.urlTooLongForIE(a.url+b)){a.post=true}else{if(b){a.url+="?"+b}}}return a},urlTooLongForIE:function(a){return a.length>2000},getDisplayMode:function(a,b){if(b.display==="hidden"||b.display==="none"){return b.display}if(FB.Canvas.isTabIframe()&&b.display!=="popup"){return"async"}if(FB.UA.mobile()||b.display==="touch"){return"touch"}if(!FB.getAccessToken()&&b.display=="dialog"&&!a.loggedOutIframe){FB.log('"dialog" mode can only be used when the user is connected.');return"popup"}if(a.connectDisplay&&!FB._inCanvas){return a.connectDisplay}return b.display||(FB.getAccessToken()?"dialog":"popup")},getXdRelation:function(b){var a=b.display;if(a==="popup"||a==="touch"){return"opener"}if(a==="dialog"||a==="iframe"||a==="hidden"||a==="none"){return"parent"}if(a==="async"){return"parent.frames["+window.name+"]"}},popup:function(b){var a=typeof window.screenX!="undefined"?window.screenX:window.screenLeft,i=typeof window.screenY!="undefined"?window.screenY:window.screenTop,g=typeof window.outerWidth!="undefined"?window.outerWidth:document.documentElement.clientWidth,f=typeof window.outerHeight!="undefined"?window.outerHeight:(document.documentElement.clientHeight-22),k=FB.UA.mobile()?null:b.size.width,d=FB.UA.mobile()?null:b.size.height,h=(a<0)?window.screen.width+a:a,e=parseInt(h+((g-k)/2),10),j=parseInt(i+((f-d)/2.5),10),c=[];if(k!==null){c.push("width="+k)}if(d!==null){c.push("height="+d)}c.push("left="+e);c.push("top="+j);c.push("scrollbars=1");if(b.name=="permissions.request"||b.name=="permissions.oauth"){c.push("location=1,toolbar=0")}c=c.join(",");if(b.post){FB.UIServer.setLoadedNode(b,window.open("about:blank",b.id,c));FB.Content.submitToTarget({url:b.url,target:b.id,params:b.params})}else{FB.UIServer.setLoadedNode(b,window.open(b.url,b.id,c))}if(b.id in FB.UIServer._defaultCb){FB.UIServer._popupMonitor()}},setLoadedNode:function(a,b){FB.UIServer._loadedNodes[a.id]=b;if(a.params){b.fbCallID=a.id}},getLoadedNode:function(a){return FB.UIServer._loadedNodes[a.id]},hidden:function(a){a.className="FB_UI_Hidden";a.root=FB.Content.appendHidden("");FB.UIServer._insertIframe(a)},iframe:function(a){a.className="FB_UI_Dialog";var b=function(){FB.UIServer._triggerDefault(a.id)};a.root=FB.Dialog.create({onClose:b,closeIcon:true,classes:(FB.UA.iPad()?"centered":"")});if(!a.hideLoader){FB.Dialog.showLoader(b,a.size.width)}FB.Dom.addCss(a.root,"fb_dialog_iframe");FB.UIServer._insertIframe(a)},touch:function(a){if(a.params&&a.params.in_iframe){if(a.ui_created){FB.Dialog.showLoader(function(){FB.UIServer._triggerDefault(a.id)},0)}else{FB.UIServer.iframe(a)}}else{if(FB.UA.nativeApp()&&!a.ui_created){a.frame=a.id;FB.Native.onready(function(){FB.UIServer.setLoadedNode(a,FB.Native.open(a.url+"#cb="+a.frameName))});FB.UIServer._popupMonitor()}else{if(!a.ui_created){FB.UIServer.popup(a)}}}},async:function(a){a.frame=window.name;delete a.url;delete a.size;FB.Arbiter.inform("showDialog",a)},getDefaultSize:function(){if(FB.UA.mobile()){if(FB.UA.iPad()){return{width:500,height:590}}else{if(FB.UA.android()){return{width:screen.availWidth,height:screen.availHeight}}else{var c=window.innerWidth;var a=window.innerHeight;var b=c/a>1.2;return{width:c,height:Math.max(a,(b?screen.width:screen.height))}}}}return{width:575,height:240}},_insertIframe:function(b){FB.UIServer._loadedNodes[b.id]=false;var a=function(c){if(b.id in FB.UIServer._loadedNodes){FB.UIServer.setLoadedNode(b,c)}};if(b.post){FB.Content.insertIframe({url:"about:blank",root:b.root,className:b.className,width:b.size.width,height:b.size.height,id:b.id,onInsert:a,onload:function(c){FB.Content.submitToTarget({url:b.url,target:c.name,params:b.params})}})}else{FB.Content.insertIframe({url:b.url,root:b.root,className:b.className,width:b.size.width,height:b.size.height,id:b.id,name:b.frameName,onInsert:a})}},_handleResizeMessage:function(b,a){var c=FB.UIServer._loadedNodes[b];if(a.height){c.style.height=a.height+"px"}if(a.width){c.style.width=a.width+"px"}FB.Arbiter.inform("resize.ack",a||{},"parent.frames["+c.name+"]",true);if(!FB.Dialog.isActive(c)){FB.Dialog.show(c)}},_triggerDefault:function(a){FB.UIServer._xdRecv({frame:a},FB.UIServer._defaultCb[a]||function(){})},_popupMonitor:function(){var a;for(var b in FB.UIServer._loadedNodes){if(FB.UIServer._loadedNodes.hasOwnProperty(b)&&b in FB.UIServer._defaultCb){var c=FB.UIServer._loadedNodes[b];try{if(c.tagName){continue}}catch(d){}try{if(c.closed){FB.UIServer._triggerDefault(b)}else{a=true}}catch(e){}}}if(a&&!FB.UIServer._popupInterval){FB.UIServer._popupInterval=window.setInterval(FB.UIServer._popupMonitor,100)}else{if(!a&&FB.UIServer._popupInterval){window.clearInterval(FB.UIServer._popupInterval);FB.UIServer._popupInterval=null}}},_xdChannelHandler:function(b,c){var a=(FB.UIServer._forceHTTPS&&FB.UA.ie()!==7);return FB.XD.handler(function(d){var e=FB.UIServer._loadedNodes[b];if(!e){return}if(d.type=="resize"){FB.UIServer._handleResizeMessage(b,d)}else{if(d.type=="hide"){FB.Dialog.hide(e)}else{if(d.type=="rendered"){var f=FB.Dialog._findRoot(e);FB.Dialog.show(f)}else{if(d.type=="fireevent"){FB.Event.fire(d.event)}}}}},c,true,null,a)},_xdNextHandler:function(a,b,d,c){if(c){FB.UIServer._defaultCb[b]=a}return FB.XD.handler(function(e){FB.UIServer._xdRecv(e,a)},d)+"&frame="+b},_xdRecv:function(b,a){var c=FB.UIServer._loadedNodes[b.frame];try{if(FB.Dom.containsCss(c,"FB_UI_Hidden")){window.setTimeout(function(){c.parentNode.parentNode.removeChild(c.parentNode)},3000)}else{if(FB.Dom.containsCss(c,"FB_UI_Dialog")){FB.Dialog.remove(c);if(FB.TemplateUI&&FB.UA.mobile()){FB.TemplateUI.populateCache()}}}}catch(d){}try{if(c.close){c.close();FB.UIServer._popupCount--}}catch(e){}delete FB.UIServer._loadedNodes[b.frame];delete FB.UIServer._defaultCb[b.frame];a(b)},_xdResult:function(a,b,d,c){return(FB.UIServer._xdNextHandler(function(e){a&&a(e.result&&e.result!=FB.UIServer._resultToken&&FB.JSON.parse(e.result))},b,d,c)+"&result="+encodeURIComponent(FB.UIServer._resultToken))}});FB.provide("",{getLoginStatus:function(a,b){if(!FB._apiKey){FB.log("FB.getLoginStatus() called before calling FB.init().");return}if(a){if(!b&&FB.Auth._loadState=="loaded"){if(FB._oauth){a({status:FB._userStatus,authResponse:FB._authResponse})}else{a({status:FB._userStatus,session:FB._session})}return}else{FB.Event.subscribe("FB.loginStatus",a)}}if(!b&&FB.Auth._loadState=="loading"){return}FB.Auth._loadState="loading";var c=function(d){FB.Auth._loadState="loaded";FB.Event.fire("FB.loginStatus",d);FB.Event.clear("FB.loginStatus")};if(FB.UA.mobile()&&window.postMessage&&window.localStorage){FB.Auth.staticAuthCheck(c)}else{if(FB._oauth){FB.ui({method:"login.status",display:"none"},c)}else{FB.ui({method:"auth.status",display:"hidden"},c)}}},getSession:function(){if(FB._oauth){throw new Error("FB.getSession incompatible with OAuth2.")}return FB._session},getAuthResponse:function(){if(!FB._oauth){throw new Error("getAuthResponse called when OAuth2 support is disabled.  Please fix.")}return FB._authResponse},getAccessToken:function(){if(FB._oauth){return(FB._authResponse&&FB._authResponse.accessToken)||null}else{return(FB._session&&FB._session.access_token)||null}},getUserID:function(){if(FB._oauth){return FB._userID}else{return(FB._session&&FB._session.uid)||0}},login:function(a,b){if(FB._oauth){if(b&&b.perms){throw new Error("OAuth2 specification states that 'perms' should now be called 'scope'.  Please update.")}FB.ui(FB.copy({method:"permissions.oauth",display:"popup"},b||{}),a)}else{FB.ui(FB.copy({method:"permissions.request",display:"popup"},b||{}),a)}},logout:function(a){FB.ui({method:"auth.logout",display:"hidden"},a)}});FB.provide("Auth",{_callbacks:[],_xdStorePath:"xd_localstorage/",staticAuthCheck:function(b){var a=FB.getDomain("https_staticfb");FB.Content.insertIframe({root:FB.Content.appendHidden(""),className:"FB_UI_Hidden",url:a+FB.Auth._xdStorePath,onload:function(f){var g=frames[f.name];var d=FB.guid();var e=false;var c=function(h){if(!e){e=true;FB.Auth._staticAuthHandler(b,h)}};FB.XD.handler(c,"parent",true,d);setTimeout(c,500);g.postMessage(FB.JSON.stringify({method:"getItem",params:["LoginInfo_"+FB._apiKey,true],returnCb:d}),a)}})},_staticAuthHandler:function(b,d){if(d&&d.data&&d.data.status&&d.data.status=="connected"){var c;var f=d.data.status;if(FB._oauth){var a=d.data.authResponse||null;c=FB.Auth.setAuthResponse(a,f)}else{var e=d.data.session||null;c=FB.Auth.setSession(e,f)}b&&b(c)}else{if(FB._oauth){FB.ui({method:"login.status",display:"none"},b)}else{FB.ui({method:"auth.status",display:"hidden"},b)}}},setSession:function(e,g){if(FB._oauth){throw new Error("FB.Auth.setSession incompatible with OAuth2.")}var b=!FB._session&&e,c=FB._session&&!e,a=FB._session&&e&&FB._session.uid!=e.uid,f=b||c||(FB._session&&e&&FB._session.access_token!=e.access_token),h=g!=FB._userStatus;var d={session:e,status:g};FB._session=e;FB._userStatus=g;if(f&&FB.Cookie&&FB.Cookie.getEnabled()){FB.Cookie.set(e)}if(h){FB.Event.fire("auth.statusChange",d)}if(c||a){FB.Event.fire("auth.logout",d)}if(b||a){FB.Event.fire("auth.login",d)}if(f){FB.Event.fire("auth.sessionChange",d)}if(FB.Auth._refreshTimer){window.clearTimeout(FB.Auth._refreshTimer);delete FB.Auth._refreshTimer}if(FB.Auth._loadState&&e&&e.expires){FB.Auth._refreshTimer=window.setTimeout(function(){FB.getLoginStatus(null,true)},1200000)}return d},setAuthResponse:function(a,h){if(!FB._oauth){throw new Error("FB.Auth.setAuthResponse only compatible with OAuth2.")}var j=0;if(a){if(a.userID){j=a.userID}else{if(a.signedRequest){var f=FB.Auth.parseSignedRequest(a.signedRequest);if(f&&f.user_id){j=f.user_id}}}}var d=!FB._userID&&a,e=FB._userID&&!a,c=a&&FB._userID!=j,b=d||e||c,i=h!=FB._userStatus;var g={authResponse:a,status:h};FB._authResponse=a;FB._userID=j;FB._userStatus=h;if(e||c){FB.Event.fire("auth.logout",g)}if(d||c){FB.Event.fire("auth.login",g)}if(b){FB.Event.fire("auth.authResponseChange",g)}if(i){FB.Event.fire("auth.statusChange",g)}if(FB.Auth._refreshTimer){window.clearTimeout(FB.Auth._refreshTimer);delete FB.Auth._refreshTimer}if(FB.Auth._loadState&&a){FB.Auth._refreshTimer=window.setTimeout(function(){FB.getLoginStatus(null,true)},1200000)}return g},xdHandler:function(a,b,f,c,e,d){return FB.UIServer._xdNextHandler(FB.Auth.xdResponseWrapper(a,e,d),b,f,c)},xdResponseWrapper:function(a,c,b){return function(e){try{b=FB.JSON.parse(e.session)}catch(i){}if(b){c="connected"}if(e&&e.fb_https&&!FB._https){FB._https=true}var h=FB.Auth.setSession(b||null,c);h.perms=e&&e.perms||null;if(e&&e.required_perms&&FB.UA.nativeApp()){var g=JSON.parse(e.required_perms);var d=[];FB.Array.forEach(g,function(k,j){d=d.concat(k)});var f=d.join(",");FB.login(a,{perms:f})}else{a&&a(h)}}},_getSessionOrigin:function(){return FB.UA.nativeApp()?3:(FB.UA.mobile()?2:1)},xdNewHandler:function(b,c,d,a){if(!FB._oauth){throw new Error("xdNewHandler should not be invoked unless OAuth2 is being used.")}return FB.UIServer._xdNextHandler(FB.Auth.xdNewResponseWrapper(b,a),c,d,true)},xdNewResponseWrapper:function(b,a){if(!FB._oauth){throw new Error("xdNewResponseWrapper should not be invoked unless OAuth2 is being used.")}return function(d){if(d.access_token){var e=FB.Auth.parseSignedRequest(d.signed_request);a={accessToken:d.access_token,userID:e.user_id,expiresIn:parseInt(d.expires_in,10),signedRequest:d.signed_request};FB.Auth.setAuthResponse(a,"connected");if(FB.Cookie.getEnabled()){var c=(new Date()).getTime()+1000*a.expiresIn;FB.Cookie.setSignedRequestCookie(d.signed_request,c)}}else{if(!FB._authResponse&&a){FB.Auth.setAuthResponse(a,"connected")}else{var f;if(d.error&&d.error==="not_authorized"){f="not_authorized"}else{f="unknown"}FB.Auth.setAuthResponse(null,f);if(FB.Cookie.getEnabled()){FB.Cookie.clearSignedRequestCookie()}}}if(d&&d.fb_https&&!FB._https){FB._https=true}response={authResponse:FB._authResponse,status:FB._userStatus};b&&b(response)}},getOrigin:function(){if(FB.UA.nativeApp()){return 3}else{if(FB._inMobileCanvas){return 2}else{return 1}}},parseSignedRequest:function(d){if(!d){return null}var a=d.split(".",2);var c=a[1];var b=FB.Auth.base64URLDecode(c);return FB.JSON.parse(b)},base64URLDecode:function(j){j=j.replace(/\-/g,"+").replace(/\_/g,"/");if(j.length%4!==0){var m=4-j.length%4;for(var d=0;d<m;d++){j=j+"="}}var k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var l="";var a,b,c="";var e,f,g,h="";for(var i=0;i<j.length;i+=4){e=k.indexOf(j.charAt(i));f=k.indexOf(j.charAt(i+1));g=k.indexOf(j.charAt(i+2));h=k.indexOf(j.charAt(i+3));a=(e<<2)|(f>>4);b=((f&15)<<4)|(g>>2);c=((g&3)<<6)|h;l=l+String.fromCharCode(a);if(g!=64){l=l+String.fromCharCode(b)}if(h!=64){l=l+String.fromCharCode(c)}a=b=c="";e=f=g=h=""}return unescape(l)}});FB.provide("UIServer.Methods",{"permissions.request":{size:{width:(FB.UA.mobile()?null:640),height:(FB.UA.mobile()?null:241)},transform:function(a){if(!FB._apiKey){FB.log("FB.login() called before calling FB.init().");return}if(FB._session&&!a.params.perms&&!a.params.auth_type){FB.log("FB.login() called when user is already connected.");a.cb&&a.cb({status:FB._userStatus,session:FB._session});return}a=FB.UIServer.genericTransform(a);a.cb=FB.Auth.xdResponseWrapper(a.cb,FB._userStatus,FB._session);a.params.method="permissions.request";FB.copy(a.params,{fbconnect:FB._inCanvas?0:1,return_session:1,session_version:3});return a}},"permissions.oauth":{url:"dialog/oauth",size:{width:(FB.UA.mobile()?null:627),height:(FB.UA.mobile()?null:326)},transform:function(a){if(!FB._apiKey){FB.log("FB.login() called before FB.init().");return}if(FB._authResponse&&!a.params.scope){FB.log("FB.login() called when user is already connected.");a.cb&&a.cb({status:FB._userStatus,authResponse:FB._authResponse});return}var b=a.cb,c=a.id;delete a.cb;FB.copy(a.params,{client_id:FB._apiKey,redirect_uri:FB.Auth.xdNewHandler(b,c,"opener"),origin:FB.Auth.getOrigin(),response_type:"token,signed_request"});return a}},"auth.logout":{url:"logout.php",transform:function(a){if(!FB._apiKey){FB.log("FB.logout() called before calling FB.init().")}else{if(FB._oauth&&!FB._authResponse){FB.log("FB.logout() called without an access token.")}else{if(!FB._oauth&&!FB._session){FB.log("FB.logout() called without a session.")}else{if(FB._oauth){a.params.next=FB.Auth.xdNewHandler(a.cb,a.id,"parent")}else{a.params.next=FB.Auth.xdHandler(a.cb,a.id,"parent",false,"unknown")}return a}}}}},"auth.status":{url:"extern/login_status.php",transform:function(a){var b=a.cb,c=a.id,d=FB.Auth.xdHandler;delete a.cb;FB.copy(a.params,{no_session:d(b,c,"parent",false,"notConnected"),no_user:d(b,c,"parent",false,"unknown"),ok_session:d(b,c,"parent",false,"connected"),session_version:3,extern:FB._inCanvas?0:2,session_origin:FB.Auth._getSessionOrigin()});return a}},"login.status":{url:"dialog/oauth",transform:function(a){var b=a.cb,c=a.id;delete a.cb;FB.copy(a.params,{client_id:FB._apiKey,redirect_uri:FB.Auth.xdNewHandler(b,c,"parent"),origin:FB.Auth.getOrigin(),response_type:"token,signed_request,code"});return a}}});FB.provide("CanvasInsights",{setDoneLoading:function(a){FB.Canvas.setDoneLoading(a)}});FB.provide("Cookie",{_domain:null,_enabled:false,setEnabled:function(a){FB.Cookie._enabled=a},getEnabled:function(){return FB.Cookie._enabled},load:function(){var a=document.cookie.match("\\bfbs_"+FB._apiKey+'="([^;]*)\\b'),b;if(a){b=FB.QS.decode(a[1]);b.expires=parseInt(b.expires,10);FB.Cookie._domain=b.base_domain}return b},loadSignedRequest:function(){var a=document.cookie.match("\\bfbsr_"+FB._apiKey+"=([^;]*)\\b");if(!a){return null}return a[1]},setSignedRequestCookie:function(b,a){if(!FB._oauth){throw new Error("FB.Cookie.setSignedRequestCookie should only be used with OAuth2.")}if(!b){throw new Error("Value passed to FB.Cookie.setSignedRequestCookie was empty.")}if(!FB.Cookie.getEnabled()){return}FB.Cookie.setRaw("fbsr_",b,a)},clearSignedRequestCookie:function(){if(!FB._oauth){throw new Error("FB.Cookie.setSignedRequestCookie should only be used with OAuth2.")}if(!FB.Cookie.getEnabled()){return}FB.Cookie.setRaw("fbsr_","",0)},setRaw:function(c,e,d,a){var b=new Date(d*1000).toGMTString();document.cookie=c+FB._apiKey+"="+e+(e&&d===0?"":"; expires="+b)+"; path=/"+(a?"; domain=."+a:"")},set:function(a){if(!a){FB.Cookie.clear();return}FB.Cookie.setRaw("fbs_",'"'+FB.QS.encode(a)+'"',a.expires,a.base_domain);FB.Cookie._domain=a.base_domain},clear:function(){FB.Cookie.setRaw("fbs_","",0,FB.Cookie._domain)}});FB.provide("Frictionless",{_allowedRecipients:{},_useFrictionless:false,_updateRecipients:function(){FB.Frictionless._allowedRecipients={};FB.api("/me/apprequestformerrecipients",function(a){if(!a||a.error){return}FB.Array.forEach(a.data,function(b){FB.Frictionless._allowedRecipients[b.recipient_id]=true},false)})},init:function(){FB.Frictionless._useFrictionless=true;FB.getLoginStatus(function(a){if(a.status=="connected"){FB.Frictionless._updateRecipients()}});FB.Event.subscribe("auth.login",function(a){if(a.session){FB.Frictionless._updateRecipients()}})},_processRequestResponse:function(a,b){return function(e){var d=e&&typeof e.frictionless_value!=="undefined";var f=e&&e.updated_frictionless;if(FB.Frictionless._useFrictionless&&(f||d)){FB.Frictionless._updateRecipients();if(d){var c=[];FB.Array.forEach(e.request_ids,function(g){c.push(g)},false);e.request_ids=c}}if(e){if(!b&&e.frictionless){FB.Dialog._hideLoader();FB.Dialog._restoreBodyPosition();FB.Dialog._hideIPadOverlay()}delete e.frictionless}a&&a(e)}},isAllowed:function(c){if(!c){return false}if(typeof c==="number"){return FB.Frictionless._allowedRecipients[c]}if(typeof c==="string"){c=c.split(",")}c=FB.Array.map(c,FB.String.trim);var a=true;var b=false;FB.Array.forEach(c,function(d){a=a&&FB.Frictionless._allowedRecipients[d];b=true},false);return a&&b}});FB.provide("_originalFB",{initSitevars:{},init:function(a){a=FB.copy(a||{},{logging:true,status:true});FB._userID=0;FB._apiKey=a.appId||a.apiKey;FB._oauth=FB.forceOAuth||!!a.oauth;if(!a.logging&&window.location.toString().indexOf("fb_debug=1")<0){FB._logging=false}if(FB.initSitevars.enableMobile){FB.UA._enableMobile=true}FB.XD.init(a.channelUrl);if(FB.UA.mobile()&&FB.TemplateUI&&FB.TemplateData&&FB.TemplateData._enabled&&a.useCachedDialogs!==false){FB.TemplateUI.init();FB.Event.subscribe("auth.statusChange",FB.TemplateData.update)}if(a.reportTemplates){FB.reportTemplates=true}if(a.frictionlessRequests){FB.Frictionless.init()}if(FB._apiKey){FB.Cookie.setEnabled(a.cookie);if(FB._oauth){if(a.authResponse){FB.Auth.setAuthResponse(a.authResponse,"connected")}else{var c=FB.Cookie.loadSignedRequest();var b=FB.Auth.parseSignedRequest(c);FB._userID=(b&&b.user_id)||0}}else{a.session=a.session||FB.Cookie.load();FB.Auth.setSession(a.session,a.session?"connected":"unknown")}if(a.status){FB.getLoginStatus()}}if(FB._inCanvas){FB.Canvas.init()}FB.Event.subscribe("xfbml.parse",function(){FB.XFBML.IframeWidget.batchWidgetPipeRequests()});if(a.xfbml){window.setTimeout(function(){if(FB.XFBML){if(FB.initSitevars.parseXFBMLBeforeDomReady){FB.XFBML.parse();var d=window.setInterval(function(){FB.XFBML.parse()},100);FB.Dom.ready(function(){window.clearInterval(d);FB.XFBML.parse()})}else{FB.Dom.ready(FB.XFBML.parse)}}},0)}if(FB.Canvas&&FB.Canvas.Prefetcher){FB.Canvas.Prefetcher._maybeSample()}}});FB.provide("Canvas.Prefetcher",{_sampleRate:0,_appIdsBlacklist:[],_links:[],COLLECT_AUTOMATIC:0,COLLECT_MANUAL:1,_collectionMode:0,addStaticResource:function(a){if(!FB._inCanvas||!FB._apiKey){return}FB.Canvas.Prefetcher._links.push(a)},setCollectionMode:function(a){if(!FB._inCanvas||!FB._apiKey){return false}if(a!=FB.Canvas.Prefetcher.COLLECT_AUTOMATIC&&a!=FB.Canvas.Prefetcher.COLLECT_MANUAL){return false}FB.Canvas.Prefetcher._collectionMode=a},_maybeSample:function(){if(!FB._inCanvas||!FB._apiKey||!FB.Canvas.Prefetcher._sampleRate){return}if(window.name.indexOf("_fb_https")>-1){return}var a=Math.random();if(a>1/FB.Canvas.Prefetcher._sampleRate){return}if(FB.Canvas.Prefetcher._appIdsBlacklist=="*"){return}if(FB.Array.indexOf(FB.Canvas.Prefetcher._appIdsBlacklist,parseInt(FB._apiKey,10))!=-1){return}window.setTimeout(FB.Canvas.Prefetcher._sample,30000)},_sample:function(){var b={object:"data",link:"href",script:"src"};if(FB.Canvas.Prefetcher._collectionMode==FB.Canvas.Prefetcher.COLLECT_AUTOMATIC){FB.Array.forEach(b,function(c,d){FB.Array.forEach(window.document.getElementsByTagName(d),function(e){if(e[c]){FB.Canvas.Prefetcher._links.push(e[c])}})})}var a=FB.JSON.stringify(FB.Canvas.Prefetcher._links);FB.api(FB._apiKey+"/staticresources","post",{urls:a});FB.Canvas.Prefetcher._links=[]}});FB.provide("Canvas.EarlyFlush",{addResource:function(a){return FB.Canvas.Prefetcher.addStaticResource(a)},setCollectionMode:function(a){return FB.Canvas.Prefetcher.setCollectionMode(a)}});FB.provide("UIServer.MobileIframableMethod",{transform:function(a){if(a.params.display==="touch"&&a.params.access_token&&window.postMessage){a.params.channel=FB.UIServer._xdChannelHandler(a.id,"parent");if(!FB.UA.nativeApp()){a.params.in_iframe=1}return a}else{return FB.UIServer.genericTransform(a)}},getXdRelation:function(b){var a=b.display;if(a==="touch"&&window.postMessage&&b.in_iframe){return"parent"}return FB.UIServer.getXdRelation(b)}});FB.provide("UIServer.Methods",{"stream.share":{size:{width:575,height:380},url:"sharer.php",transform:function(a){if(!a.params.u){a.params.u=window.location.toString()}return a}},"fbml.dialog":{size:{width:575,height:300},url:"render_fbml.php",loggedOutIframe:true,transform:function(a){return a}},"auth.logintofacebook":{size:{width:530,height:287},url:"login.php",transform:function(a){a.params.skip_api_login=1;var c=FB.UIServer.getXdRelation(a.params);var b=FB.UIServer._xdResult(a.cb,a.id,c,true);a.params.next=FB.getDomain(FB._https?"https_www":"www")+"login.php?"+FB.QS.encode({api_key:FB._apiKey,next:b,skip_api_login:1});return a}},apprequests:{transform:function(a){a=FB.UIServer.MobileIframableMethod.transform(a);a.params.frictionless=FB.Frictionless&&FB.Frictionless._useFrictionless;if(a.params.frictionless){a.hideLoader=FB.Frictionless.isAllowed(a.params.to);a.cb=FB.Frictionless._processRequestResponse(a.cb,a.hideLoader)}return a},getXdRelation:function(a){return FB.UIServer.MobileIframableMethod.getXdRelation(a)}},feed:FB.UIServer.MobileIframableMethod});FB.provide("",{share:function(a){FB.log("FB.share() has been deprecated. Please use FB.ui() instead.");FB.ui({display:"popup",method:"stream.share",u:a})},publish:function(b,a){FB.log("FB.publish() has been deprecated. Please use FB.ui() instead.");b=b||{};FB.ui(FB.copy({display:"popup",method:"stream.publish",preview:1},b||{}),a)},addFriend:function(b,a){FB.log("FB.addFriend() has been deprecated. Please use FB.ui() instead.");FB.ui({display:"popup",id:b,method:"friend.add"},a)}});FB.UIServer.Methods["auth.login"]=FB.UIServer.Methods["permissions.request"];FB.provide("XFBML",{_renderTimeout:30000,getElements:function(b,f,d){var a=FB.Array,e=FB.XFBML._getDomElements(b,f,d),c=FB.Dom.getByClass(f+"-"+d,b);e=a.toArray(e);c=a.toArray(c);c=a.filter(c,function(g){return !g.hasChildNodes()||(g.childNodes.length===1&&g.childNodes[0].nodeType===3)});return a.merge(e,c)},parse:function(d,b){d=d||document.body;var c=1,e=function(){c--;if(c===0){b&&b();FB.Event.fire("xfbml.render")}};var a={};if(FB.XFBML._widgetPipeIsEnabled()){FB.Array.forEach(FB.XFBML._tagInfos,function(f){if(f.supportsWidgetPipe){var h=f.xmlns?f.xmlns:"fb";var g=FB.XFBML.getElements(d,h,f.localName);a[f.localName]=g;FB.XFBML._widgetPipeEnabledTagCount+=g.length}})}FB.Array.forEach(FB.XFBML._tagInfos,function(g){if(!g.xmlns){g.xmlns="fb"}var h;if(a[g.localName]!==undefined){h=a[g.localName]}else{h=FB.XFBML.getElements(d,g.xmlns,g.localName)}for(var f=0;f<h.length;f++){c++;FB.XFBML._processElement(h[f],g,e)}});FB.Event.fire("xfbml.parse");window.setTimeout(function(){if(c>0){FB.log(c+" XFBML tags failed to render in "+FB.XFBML._renderTimeout+"ms.")}},FB.XFBML._renderTimeout);e()},registerTag:function(a){FB.XFBML._tagInfos.push(a)},shouldUseWidgetPipe:function(){if(!FB.XFBML._widgetPipeIsEnabled()){return false}var a=FB.XFBML._widgetPipeEnabledTagCount>1;return a},getBoolAttr:function(b,a){a=FB.XFBML.getAttr(b,a);return(a&&FB.Array.indexOf(["true","1","yes","on"],a.toLowerCase())>-1)},getAttr:function(b,a){return(b.getAttribute(a)||b.getAttribute(a.replace(/_/g,"-"))||b.getAttribute(a.replace(/-/g,"_"))||b.getAttribute(a.replace(/-/g,""))||b.getAttribute(a.replace(/_/g,""))||b.getAttribute("data-"+a)||b.getAttribute("data-"+a.replace(/_/g,"-"))||b.getAttribute("data-"+a.replace(/-/g,"_"))||b.getAttribute("data-"+a.replace(/-/g,""))||b.getAttribute("data-"+a.replace(/_/g,""))||null)},_processElement:function(dom,tagInfo,cb){var element=dom._element;if(element){element.subscribe("render",cb);element.process()}else{var processor=function(){var fn=eval(tagInfo.className);var isLogin=false;var showFaces=true;var renderInIframe=false;var addToTimeline=(tagInfo.className==="FB.XFBML.AddToTimeline");if((tagInfo.className==="FB.XFBML.LoginButton")||addToTimeline){renderInIframe=FB.XFBML.getBoolAttr(dom,"render-in-iframe");mode=FB.XFBML.getAttr(dom,"mode");showFaces=(addToTimeline&&mode!="button")||FB.XFBML.getBoolAttr(dom,"show-faces");isLogin=addToTimeline||renderInIframe||showFaces||FB.XFBML.getBoolAttr(dom,"oneclick");if(isLogin&&!addToTimeline){fn=FB.XFBML.Login}}element=dom._element=new fn(dom);if(isLogin){showFaces=!!showFaces;var extraParams={show_faces:showFaces,add_to_profile:addToTimeline,mode:mode};var scope=FB.XFBML.getAttr(dom,"scope");if(scope){if(FB._oauth){extraParams.scope=scope}else{extraParams.perms=scope}}else{var perms=FB.XFBML.getAttr(dom,"perms");if(perms){extraParams.perms=perms}}element.setExtraParams(extraParams)}element.subscribe("render",cb);element.process()};if(FB.CLASSES[tagInfo.className.substr(3)]){processor()}else{FB.log("Tag "+tagInfo.className+" was not found.")}}},_getDomElements:function(a,e,d){var c=e+":"+d;if(FB.UA.firefox()){return a.getElementsByTagNameNS(document.body.namespaceURI,c)}else{if(FB.UA.ie()<9){try{var docNamespaces=document.namespaces;if(docNamespaces&&docNamespaces[e]){var nodes=a.getElementsByTagName(d);if(!document.addEventListener||nodes.length>0){return nodes}}}catch(b){}return a.getElementsByTagName(c)}else{return a.getElementsByTagName(c)}}},_tagInfos:[{localName:"activity",className:"FB.XFBML.Activity"},{localName:"add-profile-tab",className:"FB.XFBML.AddProfileTab"},{localName:"add-to-timeline",className:"FB.XFBML.AddToTimeline"},{localName:"bookmark",className:"FB.XFBML.Bookmark"},{localName:"comments",className:"FB.XFBML.Comments"},{localName:"comments-count",className:"FB.XFBML.CommentsCount"},{localName:"connect-bar",className:"FB.XFBML.ConnectBar"},{localName:"fan",className:"FB.XFBML.Fan"},{localName:"like",className:"FB.XFBML.Like",supportsWidgetPipe:true},{localName:"like-box",className:"FB.XFBML.LikeBox"},{localName:"live-stream",className:"FB.XFBML.LiveStream"},{localName:"login",className:"FB.XFBML.Login"},{localName:"login-button",className:"FB.XFBML.LoginButton"},{localName:"facepile",className:"FB.XFBML.Facepile"},{localName:"friendpile",className:"FB.XFBML.Friendpile"},{localName:"name",className:"FB.XFBML.Name"},{localName:"profile-pic",className:"FB.XFBML.ProfilePic"},{localName:"question",className:"FB.XFBML.Question"},{localName:"recommendations",className:"FB.XFBML.Recommendations"},{localName:"recommendations-bar",className:"FB.XFBML.RecommendationsBar"},{localName:"registration",className:"FB.XFBML.Registration"},{localName:"send",className:"FB.XFBML.Send"},{localName:"serverfbml",className:"FB.XFBML.ServerFbml"},{localName:"share-button",className:"FB.XFBML.ShareButton"},{localName:"social-bar",className:"FB.XFBML.RecommendationsBar"}],_widgetPipeEnabledTagCount:0,_widgetPipeIsEnabled:function(){return FB.widgetPipeEnabledApps&&FB.widgetPipeEnabledApps[FB._apiKey]!==undefined}});(function(){try{if(document.namespaces&&!document.namespaces.item.fb){document.namespaces.add("fb")}}catch(a){}}());FB.provide("XFBML",{set:function(b,c,a){FB.log("FB.XFBML.set() has been deprecated.");b.innerHTML=c;FB.XFBML.parse(b,a)}});FB.subclass("Waitable","Obj",function(){},{set:function(a){this.setProperty("value",a)},error:function(a){this.fire("error",a)},wait:function(a,b){if(b){this.subscribe("error",b)}this.monitor("value",this.bind(function(){if(this.value!==undefined){a(this.value);return true}}))}});FB.subclass("Data.Query","Waitable",function(){if(!FB.Data.Query._c){FB.Data.Query._c=1}this.name="v_"+FB.Data.Query._c++},{parse:function(a){var b=FB.String.format.apply(null,a),d=(/^select (.*?) from (\w+)\s+where (.*)$/i).exec(b);this.fields=this._toFields(d[1]);this.table=d[2];this.where=this._parseWhere(d[3]);for(var c=1;c<a.length;c++){if(FB.Type.isType(a[c],FB.Data.Query)){a[c].hasDependency=true}}return this},toFql:function(){var a="select "+this.fields.join(",")+" from "+this.table+" where ";switch(this.where.type){case"unknown":a+=this.where.value;break;case"index":a+=this.where.key+"="+this._encode(this.where.value);break;case"in":if(this.where.value.length==1){a+=this.where.key+"="+this._encode(this.where.value[0])}else{a+=this.where.key+" in ("+FB.Array.map(this.where.value,this._encode).join(",")+")"}break}return a},_encode:function(a){return typeof(a)=="string"?FB.String.quote(a):a},toString:function(){return"#"+this.name},_toFields:function(a){return FB.Array.map(a.split(","),FB.String.trim)},_parseWhere:function(s){var re=(/^\s*(\w+)\s*=\s*(.*)\s*$/i).exec(s),result,value,type="unknown";if(re){value=re[2];if(/^(["'])(?:\\?.)*?\1$/.test(value)){value=eval(value);type="index"}else{if(/^\d+\.?\d*$/.test(value)){type="index"}}}if(type=="index"){result={type:"index",key:re[1],value:value}}else{result={type:"unknown",value:s}}return result}});FB.provide("Data",{query:function(c,a){var b=new FB.Data.Query().parse(arguments);FB.Data.queue.push(b);FB.Data._waitToProcess();return b},waitOn:function(dependencies,callback){var result=new FB.Waitable(),count=dependencies.length;if(typeof(callback)=="string"){var s=callback;callback=function(args){return eval(s)}}FB.Array.forEach(dependencies,function(item){item.monitor("value",function(){var done=false;if(FB.Data._getValue(item)!==undefined){count--;done=true}if(count===0){var value=callback(FB.Array.map(dependencies,FB.Data._getValue));result.set(value!==undefined?value:true)}return done})});return result},_getValue:function(a){return FB.Type.isType(a,FB.Waitable)?a.value:a},_selectByIndex:function(a,d,b,e){var c=new FB.Data.Query();c.fields=a;c.table=d;c.where={type:"index",key:b,value:e};FB.Data.queue.push(c);FB.Data._waitToProcess();return c},_waitToProcess:function(){if(FB.Data.timer<0){FB.Data.timer=setTimeout(FB.Data._process,10)}},_process:function(){FB.Data.timer=-1;var c={},e=FB.Data.queue;FB.Data.queue=[];for(var a=0;a<e.length;a++){var b=e[a];if(b.where.type=="index"&&!b.hasDependency){FB.Data._mergeIndexQuery(b,c)}else{c[b.name]=b}}var d={method:"fql.multiquery",queries:{}};FB.copy(d.queries,c,true,function(f){return f.toFql()});d.queries=FB.JSON.stringify(d.queries);FB.api(d,function(f){if(f.error_msg){FB.Array.forEach(c,function(g){g.error(Error(f.error_msg))})}else{FB.Array.forEach(f,function(g){c[g.name].set(g.fql_result_set)})}})},_mergeIndexQuery:function(a,d){var b=a.where.key,f=a.where.value;var e="index_"+a.table+"_"+b;var c=d[e];if(!c){c=d[e]=new FB.Data.Query();c.fields=[b];c.table=a.table;c.where={type:"in",key:b,value:[]}}FB.Array.merge(c.fields,a.fields);FB.Array.merge(c.where.value,[f]);c.wait(function(g){a.set(FB.Array.filter(g,function(h){return h[b]==f}))})},timer:-1,queue:[]});window.setTimeout(function(){var a=/(connect.facebook.net|facebook.com\/assets.php).*?#(.*)/;FB.Array.forEach(document.getElementsByTagName("script"),function(d){if(d.src){var b=a.exec(d.src);if(b){var c=FB.QS.decode(b[2]);FB.Array.forEach(c,function(f,e){if(f=="0"){c[e]=0}});FB.init(c)}}});if(window.fbAsyncInit&&!window.fbAsyncInit.hasRun){window.fbAsyncInit.hasRun=true;fbAsyncInit()}},0);FB.provide("Native",{NATIVE_READY_EVENT:"fbNativeReady",onready:function(a){if(!FB.UA.nativeApp()){FB.log("FB.Native.onready only works when the page is rendered in a WebView of the native Facebook app. Test if this is the case calling FB.UA.nativeApp()");return}if(window.__fbNative&&!this.nativeReady){FB.provide("Native",window.__fbNative)}if(this.nativeReady){a()}else{var b=function(c){window.removeEventListener(FB.Native.NATIVE_READY_EVENT,b);FB.Native.onready(a)};window.addEventListener(FB.Native.NATIVE_READY_EVENT,b,false)}}});FB.provide("UIServer.Methods",{"pay.prompt":{transform:function(a){var b=FB.XD.handler(function(c){a.cb(FB.JSON.parse(c.response))},"parent.frames["+(window.name||"iframe_canvas")+"]");a.params.channel=b;FB.Arbiter.inform("Pay.Prompt",a.params);return false}}});FB.provide("UIServer.Methods",{pay:{size:{width:555,height:120},noHttps:true,connectDisplay:"popup",transform:function(a){if(!FB._inCanvas){a.params.order_info=FB.JSON.stringify(a.params.order_info);return a}var b=FB.XD.handler(function(c){a.cb(FB.JSON.parse(c.response))},"parent.frames["+(window.name||"iframe_canvas")+"]");a.params.channel=b;a.params.uiserver=true;FB.Arbiter.inform("Pay.Prompt",a.params);return false}}});FB.provide("Helper",{isUser:function(a){return a<2200000000||(a>=100000000000000&&a<=100099999989999)},getLoggedInUser:function(){return FB.getUserID()},upperCaseFirstChar:function(a){if(a.length>0){return a.substr(0,1).toUpperCase()+a.substr(1)}else{return a}},getProfileLink:function(c,b,a){a=a||(c?FB.getDomain("www")+"profile.php?id="+c.uid:null);if(a){b='<a class="fb_link" href="'+a+'">'+b+"</a>"}return b},invokeHandler:function(handler,scope,args){if(handler){if(typeof handler==="string"){eval(handler)}else{if(handler.apply){handler.apply(scope,args||[])}}}},fireEvent:function(a,b){var c=b._attr.href;b.fire(a,c);FB.Event.fire(a,c,b)},executeFunctionByName:function(d){var a=Array.prototype.slice.call(arguments,1);var f=d.split(".");var c=f.pop();var b=window;for(var e=0;e<f.length;e++){b=b[f[e]]}return b[c].apply(this,a)}});FB.provide("TemplateData",{_initialized:false,_version:0,_response:null,_localStorageTimeout:60*60*24,_enabled:true,enabled:function(){return FB.TemplateData._enabled&&FB.TemplateData._initialized&&FB.TemplateData.supportsLocalStorage()&&FB._userStatus=="connected"&&FB.TemplateData.getResponse()},supportsLocalStorage:function(){try{return"localStorage" in window&&window.localStorage!==null}catch(a){return false}},_isStale:function(b){if(!b||!b.version||b.version!=FB.TemplateData._version||b.currentUserID!=FB.getUserID()){return true}var a=Math.round((new Date()).getTime());return(a-b.setAt)/1000>FB.TemplateData._localStorageTimeout},getResponse:function(){var b=FB.TemplateData;try{b._response=b._response||(b.supportsLocalStorage()&&FB.JSON.parse(localStorage.FB_templateDataResponse||"null"))}catch(a){b._response=null}if(b._isStale(b._response)){b.saveResponse(null)}return b._response},saveResponse:function(a){FB.TemplateData._response=a;if(FB.TemplateData.supportsLocalStorage()){localStorage.FB_templateDataResponse=FB.JSON.stringify(a)}},getData:function(){var a=FB.TemplateData.getResponse();return a?a.data:{}},init:function(a){if(!a){return}FB.TemplateData._initialized=true;FB.TemplateData._version=a;if(FB.TemplateData.supportsLocalStorage()&&!("FB_templateDataResponse" in localStorage)){FB.TemplateData.clear()}},clear:function(){FB.TemplateData.saveResponse(null)},update:function(a){if(FB._userStatus!="connected"){FB.TemplateData.clear()}if(FB._userStatus=="connected"&&!FB.TemplateData.getResponse()){FB.api({method:"dialog.template_data"},function(c){if("error_code" in c){return}var b={data:c,currentUserID:FB.getUserID(),setAt:(new Date()).getTime(),version:FB.TemplateData._version};FB.TemplateData.saveResponse(b)})}}});FB.subclass("TemplateUI","Obj",function(d,c){this.method=d;var b=FB.UA.nativeApp()?0:1;var e={display:"touch",preview_template:1,in_iframe:b,locale:FB._locale,v:FB.TemplateUI._version,user_agent:navigator.userAgent};if(window.devicePixelRatio){e.m_pixel_ratio=window.devicePixelRatio}var f=FB.QS.encode(e);this.cachedCall={url:FB.getDomain("staticfb")+"dialog/"+d+"?"+f,frameName:FB.guid(),id:FB.guid(),size:FB.UIServer.getDefaultSize(),hideLoader:true};FB.XD.handler(this.bind(function(g){if(g.type=="getParams"){this.setProperty("getParamsCb",g.returnCb)}}),"parent",true,this.cachedCall.frameName);if(b){FB.UIServer.iframe(this.cachedCall);FB.Dialog.hide(this.cachedCall.root)}else{if(c&&!FB.TemplateUI._preloads[this.cachedCall.url]){var a=document.createElement("div");FB.TemplateUI._preloads[this.cachedCall.url]={container:a};FB.Content.insertIframe({url:this.cachedCall.url,root:FB.Content.appendHidden(a)})}}},{use:function(a){if(!this.cachedCall.root){FB.UIServer.touch(this.cachedCall);var c=FB.TemplateUI._preloads[this.cachedCall.url];if(c&&c.container){c.container.parentNode.removeChild(c.container);delete c.container}}a.ui_created=true;a.root=this.cachedCall.root;FB.UIServer.setLoadedNode(a,FB.UIServer._loadedNodes[this.cachedCall.id]);delete FB.UIServer._loadedNodes[this.cachedCall.id];var b=FB.Dialog._dialogs[a.id];FB.Dialog._dialogs[this.cachedCall.id]=b;b.id=this.cachedCall.id;delete FB.Dialog._dialogs[a.id];FB.UIServer.getLoadedNode(a).fbCallID=this.cachedCall.id;this.cachedCall.id=a.id;var d={};FB.copy(d,a.params);FB.copy(d,FB.TemplateData.getData()[this.method]);d.frictionless=FB.TemplateUI.isFrictionlessAppRequest(this.method,d);d.common=FB.TemplateData.getData().common;d.method=this.method;this.setParams(d);if(FB.UA.nativeApp()){FB.UIServer._popupMonitor()}},setParams:function(a){this.monitor("getParamsCb",this.bind(function(){if(this.getParamsCb){var b=frames[this.cachedCall.frameName]||FB.UIServer.getLoadedNode(this.cachedCall);b.postMessage(FB.JSON.stringify({params:a,cb:this.getParamsCb}),"*");return true}}))}});FB.provide("TemplateUI",{_timer:null,_cache:{},_preloads:{},_version:0,init:function(){FB.TemplateData.init(FB.TemplateUI._version);FB.TemplateUI.initCache()},useCachedUI:function(c,a){try{FB.TemplateUI.populateCache();cache=FB.TemplateUI._cache[c];delete FB.TemplateUI._cache[c];cache.use(a)}catch(b){FB.TemplateData.clear()}},populateCache:function(a){if(!FB.TemplateData.enabled()||!FB.UA.mobile()){return}clearInterval(FB.TemplateUI._timer);var c={feed:true,apprequests:true};for(var b in c){if(!(b in FB.TemplateUI._cache)){FB.TemplateUI._cache[b]=new FB.TemplateUI(b,a)}}},initCache:function(){FB.TemplateUI._timer=setInterval(function(){FB.TemplateUI.populateCache(true)},2000)},supportsTemplate:function(b,a){return FB.TemplateData.enabled()&&FB.TemplateUI.paramsAllowTemplate(b,a.params)&&a.params.display==="touch"&&FB.UA.mobile()},paramsAllowTemplate:function(c,a){var b={feed:{to:1,attachment:1,source:1},apprequests:{}};if(!(c in b)){return false}for(var d in b[c]){if(a[d]){return false}}return !FB.TemplateUI.willWriteOnGet(c,a)},isFrictionlessAppRequest:function(b,a){return b==="apprequests"&&FB.Frictionless&&FB.Frictionless._useFrictionless},willWriteOnGet:function(b,a){return FB.TemplateUI.isFrictionlessAppRequest(b,a)&&a.to&&FB.Frictionless.isAllowed(a.to)}});FB.Class("XFBML.Element",function(a){this.dom=a},FB.copy({getAttribute:function(b,a,c){var d=FB.XFBML.getAttr(this.dom,b);return d?(c?c(d):d):a},_getBoolAttribute:function(b,a){if(FB.XFBML.getAttr(this.dom,b)===null){return a}return FB.XFBML.getBoolAttr(this.dom,b)},_getPxAttribute:function(b,a){return this.getAttribute(b,a,function(c){var d=parseInt(c.replace("px",""),10);if(isNaN(d)){return a}else{return d}})},_getAttributeFromList:function(c,b,a){return this.getAttribute(c,b,function(d){d=d.toLowerCase();if(FB.Array.indexOf(a,d)>-1){return d}else{return b}})},isValid:function(){for(var a=this.dom;a;a=a.parentNode){if(a==document.body){return true}}},clear:function(){this.dom.innerHTML=""}},FB.EventProvider));FB.subclass("XFBML.IframeWidget","XFBML.Element",null,{_iframeName:null,_showLoader:true,_refreshOnAuthChange:false,_allowReProcess:false,_fetchPreCachedLoader:false,_visibleAfter:"load",_widgetPipeEnabled:false,getUrlBits:function(){throw new Error("Inheriting class needs to implement getUrlBits().")},setupAndValidate:function(){return true},oneTimeSetup:function(){},getSize:function(){},getIframeName:function(){if(!this._iframeName&&this._widgetPipeEnabled&&FB.XFBML.shouldUseWidgetPipe()){this._iframeName=this.generateWidgetPipeIframeName();FB.XFBML.IframeWidget.allWidgetPipeIframes[this._iframeName]=this;if(FB.XFBML.IframeWidget.masterWidgetPipeIframe===null){FB.XFBML.IframeWidget.masterWidgetPipeIframe=this}}return this._iframeName},getIframeTitle:function(){},getChannelUrl:function(){if(!this._channelUrl){var a=this;this._channelUrl=FB.XD.handler(function(b){a.fire("xd."+b.type,b)},"parent.parent",true)}return this._channelUrl},getIframeNode:function(){return this.dom.getElementsByTagName("iframe")[0]},arbiterInform:function(event,b,a){if(this.loaded){this._arbiterInform(event,b,a)}else{this.subscribe("iframe.onload",FB.bind(this._arbiterInform,this,event,b,a))}},_arbiterInform:function(event,b,a){var c='parent.frames["'+this.getIframeNode().name+'"]';FB.Arbiter.inform(event,b,c,window.location.protocol=="https:",a)},getDefaultWebDomain:function(){return"www"},getDefaultStaticDomain:function(){return"cdn"},process:function(a){if(this._done){if(!this._allowReProcess&&!a){return}this.clear()}else{this._oneTimeSetup()}this._done=true;if(!this.setupAndValidate()){this.fire("render");return}if(this._showLoader){this._addLoader()}FB.Dom.addCss(this.dom,"fb_iframe_widget");if(this._visibleAfter!="immediate"){FB.Dom.addCss(this.dom,"fb_hide_iframes")}else{this.subscribe("iframe.onload",FB.bind(this.fire,this,"render"))}var b=this.getSize()||{};var c=this.getFullyQualifiedURL();FB.Content.insertIframe({url:c,root:this.dom.appendChild(document.createElement("span")),name:this.getIframeName(),title:this.getIframeTitle(),className:FB._localeIsRtl?"fb_rtl":"fb_ltr",height:b.height,width:b.width,onload:FB.bind(this.fire,this,"iframe.onload")});this.loaded=false;this.subscribe("iframe.onload",FB.bind(function(){this.loaded=true},this))},generateWidgetPipeIframeName:function(){FB.XFBML.IframeWidget.widgetPipeIframeCount++;return"fb_iframe_"+FB.XFBML.IframeWidget.widgetPipeIframeCount},getFullyQualifiedURL:function(){if(FB.XFBML.shouldUseWidgetPipe()&&this._widgetPipeEnabled){return this._getWidgetPipeShell()}var b=this._getURL();if(!this._fetchPreCachedLoader){b+="?"+FB.QS.encode(this._getQS())}if(b.length>2000){b="about:blank";var a=FB.bind(function(){this._postRequest();this.unsubscribe("iframe.onload",a)},this);this.subscribe("iframe.onload",a)}return b},_getWidgetPipeShell:function(){return FB.getDomain("www")+"common/widget_pipe_shell.php"},_oneTimeSetup:function(){this.subscribe("xd.resize",FB.bind(this._handleResizeMsg,this));if(FB.getLoginStatus){this.subscribe("xd.refreshLoginStatus",FB.bind(FB.getLoginStatus,FB,function(){},true));this.subscribe("xd.logout",FB.bind(FB.logout,FB,function(){}))}if(this._refreshOnAuthChange){this._setupAuthRefresh()}if(this._visibleAfter=="load"){this.subscribe("iframe.onload",FB.bind(this._makeVisible,this))}this.oneTimeSetup()},_makeVisible:function(){this._removeLoader();FB.Dom.removeCss(this.dom,"fb_hide_iframes");this.fire("render")},_setupAuthRefresh:function(){FB.getLoginStatus(FB.bind(function(b){var a=b.status;FB.Event.subscribe("auth.statusChange",FB.bind(function(c){if(!this.isValid()){return}if(a=="unknown"||c.status=="unknown"){this.process(true)}a=c.status},this))},this))},_handleResizeMsg:function(b){if(!this.isValid()){return}var a=this.getIframeNode();a.style.height=b.height+"px";if(b.width){a.style.width=b.width+"px"}a.style.border="none";this._makeVisible()},_addLoader:function(){if(!this._loaderDiv){FB.Dom.addCss(this.dom,"fb_iframe_widget_loader");this._loaderDiv=document.createElement("div");this._loaderDiv.className="FB_Loader";this.dom.appendChild(this._loaderDiv)}},_removeLoader:function(){if(this._loaderDiv){FB.Dom.removeCss(this.dom,"fb_iframe_widget_loader");if(this._loaderDiv.parentNode){this._loaderDiv.parentNode.removeChild(this._loaderDiv)}this._loaderDiv=null}},_getQS:function(){return FB.copy({api_key:FB._apiKey,locale:FB._locale,sdk:"joey",session_key:FB._session&&FB._session.session_key,ref:this.getAttribute("ref")},this.getUrlBits().params)},_getURL:function(){var a=this.getDefaultWebDomain(),b="";if(this._fetchPreCachedLoader){a=this.getDefaultStaticDomain();b="static/"}return FB.getDomain(a)+"plugins/"+b+this.getUrlBits().name+".php"},_postRequest:function(){FB.Content.submitToTarget({url:this._getURL(),target:this.getIframeNode().name,params:this._getQS()})}});FB.provide("XFBML.IframeWidget",{widgetPipeIframeCount:0,masterWidgetPipeIframe:null,allWidgetPipeIframes:{},batchWidgetPipeRequests:function(){if(!FB.XFBML.IframeWidget.masterWidgetPipeIframe){return}var c=FB.XFBML.IframeWidget._groupWidgetPipeDescriptions();var e={widget_pipe:FB.JSON.stringify(c),href:window.location,site:location.hostname,channel:FB.XFBML.IframeWidget.masterWidgetPipeIframe.getChannelUrl(),api_key:FB._apiKey,locale:FB._locale,sdk:"joey",session_key:FB._session&&FB._session.session_key};var d=FB.guid();var a=FB.XFBML.IframeWidget.masterWidgetPipeIframe.dom;var b=a.appendChild(document.createElement("span"));FB.Content.insertIframe({url:"about:blank",root:b,name:d,className:"fb_hidden fb_invisible",onload:function(){FB.Content.submitToTarget({url:FB._domain.www+"widget_pipe.php?widget_pipe=1",target:d,params:e})}})},_groupWidgetPipeDescriptions:function(){var e={};for(var b in FB.XFBML.IframeWidget.allWidgetPipeIframes){var a=FB.XFBML.IframeWidget.allWidgetPipeIframes[b];var c=a.getUrlBits();var d={widget:c.name};FB.copy(d,c.params);e[b]=d}return e}});FB.subclass("XFBML.Activity","XFBML.IframeWidget",null,{_visibleAfter:"load",_refreshOnAuthChange:true,setupAndValidate:function(){this._attr={border_color:this.getAttribute("border-color"),colorscheme:this.getAttribute("color-scheme"),filter:this.getAttribute("filter"),action:this.getAttribute("action"),max_age:this.getAttribute("max_age"),font:this.getAttribute("font"),linktarget:this.getAttribute("linktarget","_blank"),header:this._getBoolAttribute("header"),height:this._getPxAttribute("height",300),recommendations:this._getBoolAttribute("recommendations"),site:this.getAttribute("site",location.hostname),width:this._getPxAttribute("width",300)};return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"activity",params:this._attr}}});FB.subclass("XFBML.ButtonElement","XFBML.Element",null,{_allowedSizes:["icon","small","medium","large","xlarge"],onClick:function(){throw new Error("Inheriting class needs to implement onClick().")},setupAndValidate:function(){return true},getButtonMarkup:function(){return this.getOriginalHTML()},getOriginalHTML:function(){return this._originalHTML},process:function(){if(!("_originalHTML" in this)){this._originalHTML=FB.String.trim(this.dom.innerHTML)}if(!this.setupAndValidate()){this.fire("render");return}var d=this._getAttributeFromList("size","medium",this._allowedSizes),a="",b="";if(d=="icon"){a="fb_button_simple"}else{var c=FB._localeIsRtl?"_rtl":"";b=this.getButtonMarkup();a="fb_button"+c+" fb_button_"+d+c}if(b!==""){this.dom.innerHTML=('<a class="'+a+'"><span class="fb_button_text">'+b+"</span></a>");this.dom.firstChild.onclick=FB.bind(this.onClick,this)}this.fire("render")}});FB.subclass("XFBML.AddProfileTab","XFBML.ButtonElement",null,{getButtonMarkup:function(){return FB.Intl._tx("Add Profile Tab on Facebook")},onClick:function(){FB.ui({method:"profile.addtab"},this.bind(function(a){if(a.tab_added){FB.Helper.invokeHandler(this.getAttribute("on-add"),this)}}))}});FB.subclass("XFBML.Facepile","XFBML.IframeWidget",null,{_visibleAfter:"load",_extraParams:{},setupAndValidate:function(){this._attr={href:this.getAttribute("href"),channel:this.getChannelUrl(),colorscheme:this.getAttribute("colorscheme","light"),max_rows:this.getAttribute("max-rows"),action:this.getAttribute("action","like"),tense:this.getAttribute("tense","past"),width:this._getPxAttribute("width",200),ref:this.getAttribute("ref"),size:this.getAttribute("size","small"),extended_social_context:this.getAttribute("extended_social_context",false),login_text:this.dom.innerHTML};this.clear();for(var a in this._extraParams){this._attr[a]=this._extraParams[a]}return true},setExtraParams:function(a){this._extraParams=a},oneTimeSetup:function(){var a=FB._userStatus;FB.Event.subscribe("auth.statusChange",FB.bind(function(b){if(a=="connected"||b.status=="connected"){this.process(true)}a=b.status},this))},getSize:function(){if(this._attr.size=="large"){return{width:this._attr.width,height:90}}return{width:this._attr.width,height:70}},getUrlBits:function(){return{name:"facepile",params:this._attr}}});FB.subclass("XFBML.AddToTimeline","XFBML.Facepile",null,{_visibleAfter:"load",getSize:function(){return{width:300,height:250}},getUrlBits:function(){return{name:"add_to_timeline",params:this._attr}}});FB.subclass("XFBML.Bookmark","XFBML.ButtonElement",null,{getButtonMarkup:function(){return FB.Intl._tx("Bookmark on Facebook")},onClick:function(){FB.ui({method:"bookmark.add"},this.bind(function(a){if(a.bookmarked){FB.Helper.invokeHandler(this.getAttribute("on-add"),this)}}))}});FB.subclass("XFBML.Comments","XFBML.IframeWidget",null,{_visibleAfter:"immediate",_refreshOnAuthChange:true,setupAndValidate:function(){var a={channel_url:this.getChannelUrl(),colorscheme:this.getAttribute("colorscheme"),numposts:this.getAttribute("num-posts",10),width:this._getPxAttribute("width",550),href:this.getAttribute("href"),permalink:this.getAttribute("permalink"),publish_feed:this.getAttribute("publish_feed")};if(!a.href){a.migrated=this.getAttribute("migrated");a.xid=this.getAttribute("xid");a.title=this.getAttribute("title",document.title);a.url=this.getAttribute("url",document.URL);a.quiet=this.getAttribute("quiet");a.reverse=this.getAttribute("reverse");a.simple=this.getAttribute("simple");a.css=this.getAttribute("css");a.notify=this.getAttribute("notify");if(!a.xid){var c=document.URL.indexOf("#");if(c>0){a.xid=encodeURIComponent(document.URL.substring(0,c))}else{a.xid=encodeURIComponent(document.URL)}}if(a.migrated){a.href="http://www.facebook.com/plugins/comments_v1.php?app_id="+FB._apiKey+"&xid="+encodeURIComponent(a.xid)+"&url="+encodeURIComponent(a.url)}}else{var b=this.getAttribute("fb_comment_id");if(!b){b=FB.QS.decode(document.URL.substring(document.URL.indexOf("?")+1)).fb_comment_id;if(b&&b.indexOf("#")>0){b=b.substring(0,b.indexOf("#"))}}if(b){a.fb_comment_id=b;this.subscribe("render",FB.bind(function(){window.location.hash=this.getIframeNode().id},this))}}this._attr=a;return true},oneTimeSetup:function(){this.subscribe("xd.addComment",FB.bind(this._handleCommentMsg,this));this.subscribe("xd.commentCreated",FB.bind(this._handleCommentCreatedMsg,this));this.subscribe("xd.commentRemoved",FB.bind(this._handleCommentRemovedMsg,this))},getSize:function(){return{width:this._attr.width,height:200}},getUrlBits:function(){return{name:"comments",params:this._attr}},getDefaultWebDomain:function(){return"https_www"},_handleCommentMsg:function(a){if(!this.isValid()){return}FB.Event.fire("comments.add",{post:a.post,user:a.user,widget:this})},_handleCommentCreatedMsg:function(b){if(!this.isValid()){return}var a={href:b.href,commentID:b.commentID,parentCommentID:b.parentCommentID};FB.Event.fire("comment.create",a)},_handleCommentRemovedMsg:function(b){if(!this.isValid()){return}var a={href:b.href,commentID:b.commentID};FB.Event.fire("comment.remove",a)}});FB.subclass("XFBML.CommentsCount","XFBML.Element",null,{process:function(){this._href=this.getAttribute("href",window.location.href);this._count=FB.Data._selectByIndex(["commentsbox_count"],"link_stat","url",this._href);FB.Dom.addCss(this.dom,"fb_comments_count_zero");this._count.wait(FB.bind(function(){var a=this._count.value[0].commentsbox_count;this.dom.innerHTML=FB.String.format('<span class="fb_comments_count">{0}</span>',a);if(a>0){FB.Dom.removeCss(this.dom,"fb_comments_count_zero")}this.fire("render")},this))}});FB.provide("Anim",{ate:function(c,g,d,b){d=!isNaN(parseFloat(d))&&d>=0?d:750;var e=40,f={},j={},a=null,h=c.style,i=setInterval(FB.bind(function(){if(!a){a=new Date().getTime()}var k=1;if(d!=0){k=Math.min((new Date().getTime()-a)/d,1)}FB.Array.forEach(g,FB.bind(function(o,m){if(!f[m]){var n=FB.Dom.getStyle(c,m);if(n===false){return}f[m]=this._parseCSS(n+"")}if(!j[m]){j[m]=this._parseCSS(o.toString())}var l="";FB.Array.forEach(f[m],function(q,p){if(isNaN(j[m][p].numPart)&&j[m][p].textPart=="?"){l=q.numPart+q.textPart}else{if(isNaN(q.numPart)){l=q.textPart}else{l+=(q.numPart+Math.ceil((j[m][p].numPart-q.numPart)*Math.sin(Math.PI/2*k)))+j[m][p].textPart+" "}}});FB.Dom.setStyle(c,m,l)},this));if(k==1){clearInterval(i);if(b){b(c)}}},this),e)},_parseCSS:function(a){var b=[];FB.Array.forEach(a.split(" "),function(d){var c=parseInt(d,10);b.push({numPart:c,textPart:d.replace(c,"")})});return b}});FB.provide("Insights",{impression:function(e,a){var b=FB.guid(),g="//ah8.facebook.com/impression.php/"+b+"/",c=new Image(1,1),f=[];if(!e.api_key&&FB._apiKey){e.api_key=FB._apiKey}for(var d in e){f.push(encodeURIComponent(d)+"="+encodeURIComponent(e[d]))}g+="?"+f.join("&");if(a){c.onload=a}c.src=g}});FB.subclass("XFBML.ConnectBar","XFBML.Element",null,{_initialHeight:null,_initTopMargin:0,_picFieldName:"pic_square",_page:null,_displayed:false,_notDisplayed:false,_container:null,_animationSpeed:0,process:function(){FB.getLoginStatus(this.bind(function(a){FB.Event.monitor("auth.statusChange",this.bind(function(){if(this.isValid()&&FB._userStatus=="connected"){this._uid=FB.Helper.getLoggedInUser();FB.api({method:"Connect.shouldShowConnectBar"},this.bind(function(b){if(b!=2){this._animationSpeed=(b==0)?750:0;this._showBar()}else{this._noRender()}}))}else{this._noRender()}return false}))}))},_showBar:function(){var a=FB.Data._selectByIndex(["first_name","profile_url",this._picFieldName],"user","uid",this._uid);var b=FB.Data._selectByIndex(["display_name"],"application","api_key",FB._apiKey);FB.Data.waitOn([a,b],FB.bind(function(c){c[0][0].site_name=c[1][0].display_name;if(!this._displayed){this._displayed=true;this._notDisplayed=false;this._renderConnectBar(c[0][0]);this.fire("render");FB.Insights.impression({lid:104,name:"widget_load"});this.fire("connectbar.ondisplay");FB.Event.fire("connectbar.ondisplay",this);FB.Helper.invokeHandler(this.getAttribute("on-display"),this)}},this))},_noRender:function(){if(this._displayed){this._displayed=false;this._closeConnectBar()}if(!this._notDisplayed){this._notDisplayed=true;this.fire("render");this.fire("connectbar.onnotdisplay");FB.Event.fire("connectbar.onnotdisplay",this);FB.Helper.invokeHandler(this.getAttribute("on-not-display"),this)}},_renderConnectBar:function(d){var b=document.createElement("div"),c=document.createElement("div");b.className="fb_connect_bar";c.className="fb_reset fb_connect_bar_container";c.appendChild(b);document.body.appendChild(c);this._container=c;this._initialHeight=Math.round(parseFloat(FB.Dom.getStyle(c,"height"))+parseFloat(FB.Dom.getStyle(c,"borderBottomWidth")));b.innerHTML=FB.String.format('<div class="fb_buttons"><a href="#" class="fb_bar_close"><img src="{1}" alt="{2}" title="{2}"/></a></div><a href="{7}" class="fb_profile" target="_blank"><img src="{3}" alt="{4}" title="{4}"/></a>{5} <span><a href="{8}" class="fb_learn_more" target="_blank">{6}</a> &ndash; <a href="#" class="fb_no_thanks">{0}</a></span>',FB.Intl._tx("No Thanks"),FB.getDomain("cdn")+FB.XFBML.ConnectBar.imgs.buttonUrl,FB.Intl._tx("Close"),d[this._picFieldName]||FB.getDomain("cdn")+FB.XFBML.ConnectBar.imgs.missingProfileUrl,FB.String.escapeHTML(d.first_name),FB.Intl._tx("Hi {firstName}. \u003cstrong>{siteName}\u003c/strong> is using Facebook to personalize your experience.",{firstName:FB.String.escapeHTML(d.first_name),siteName:FB.String.escapeHTML(d.site_name)}),FB.Intl._tx("Learn More"),d.profile_url,FB.getDomain("www")+"sitetour/connect.php");var a=this;FB.Array.forEach(b.getElementsByTagName("a"),function(g){g.onclick=FB.bind(a._clickHandler,a)});this._page=document.body;var f=0;if(this._page.parentNode){f=Math.round((parseFloat(FB.Dom.getStyle(this._page.parentNode,"height"))-parseFloat(FB.Dom.getStyle(this._page,"height")))/2)}else{f=parseInt(FB.Dom.getStyle(this._page,"marginTop"),10)}f=isNaN(f)?0:f;this._initTopMargin=f;if(!window.XMLHttpRequest){c.className+=" fb_connect_bar_container_ie6"}else{c.style.top=(-1*this._initialHeight)+"px";FB.Anim.ate(c,{top:"0px"},this._animationSpeed)}var e={marginTop:this._initTopMargin+this._initialHeight+"px"};if(FB.UA.ie()){e.backgroundPositionY=this._initialHeight+"px"}else{e.backgroundPosition="? "+this._initialHeight+"px"}FB.Anim.ate(this._page,e,this._animationSpeed)},_clickHandler:function(a){a=a||window.event;var b=a.target||a.srcElement;while(b.nodeName!="A"){b=b.parentNode}switch(b.className){case"fb_bar_close":FB.api({method:"Connect.connectBarMarkAcknowledged"});FB.Insights.impression({lid:104,name:"widget_user_closed"});this._closeConnectBar();break;case"fb_learn_more":case"fb_profile":window.open(b.href);break;case"fb_no_thanks":this._closeConnectBar();FB.api({method:"Connect.connectBarMarkAcknowledged"});FB.Insights.impression({lid:104,name:"widget_user_no_thanks"});FB.api({method:"auth.revokeAuthorization",block:true},this.bind(function(){this.fire("connectbar.ondeauth");FB.Event.fire("connectbar.ondeauth",this);FB.Helper.invokeHandler(this.getAttribute("on-deauth"),this);if(this._getBoolAttribute("auto-refresh",true)){window.location.reload()}}));break}return false},_closeConnectBar:function(){this._notDisplayed=true;var a={marginTop:this._initTopMargin+"px"};if(FB.UA.ie()){a.backgroundPositionY="0px"}else{a.backgroundPosition="? 0px"}var b=(this._animationSpeed==0)?0:300;FB.Anim.ate(this._page,a,b);FB.Anim.ate(this._container,{top:(-1*this._initialHeight)+"px"},b,function(c){c.parentNode.removeChild(c)});this.fire("connectbar.onclose");FB.Event.fire("connectbar.onclose",this);FB.Helper.invokeHandler(this.getAttribute("on-close"),this)}});FB.provide("XFBML.ConnectBar",{imgs:{buttonUrl:"images/facebook-widgets/close_btn.png",missingProfileUrl:"pics/q_silhouette.gif"}});FB.subclass("XFBML.Fan","XFBML.IframeWidget",null,{_visibleAfter:"load",setupAndValidate:function(){this._attr={api_key:FB._apiKey,connections:this.getAttribute("connections","10"),css:this.getAttribute("css"),height:this._getPxAttribute("height"),id:this.getAttribute("profile-id"),logobar:this._getBoolAttribute("logo-bar"),name:this.getAttribute("name"),stream:this._getBoolAttribute("stream",true),width:this._getPxAttribute("width",300)};if(!this._attr.id&&!this._attr.name){FB.log('<fb:fan> requires one of the "id" or "name" attributes.');return false}var a=this._attr.height;if(!a){if((!this._attr.connections||this._attr.connections==="0")&&!this._attr.stream){a=65}else{if(!this._attr.connections||this._attr.connections==="0"){a=375}else{if(!this._attr.stream){a=250}else{a=550}}}}if(this._attr.logobar){a+=25}this._attr.height=a;return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"fan",params:this._attr}}});FB.subclass("XFBML.Friendpile","XFBML.Facepile",null,{});FB.subclass("XFBML.EdgeCommentWidget","XFBML.IframeWidget",function(a){this._iframeWidth=a.width+1;this._iframeHeight=a.height;this._attr={master_frame_name:a.masterFrameName};this.dom=a.commentNode;this.dom.style.top=a.relativeHeightOffset;if(a.relativeWidthOffset){if(FB._localeIsRtl){this.dom.style.right=a.relativeWidthOffset}else{this.dom.style.left=a.relativeWidthOffset}}this.dom.style.zIndex=FB.XFBML.EdgeCommentWidget.NextZIndex++;FB.Dom.addCss(this.dom,"fb_edge_comment_widget")},{_visibleAfter:"load",_showLoader:false,getSize:function(){return{width:this._iframeWidth,height:this._iframeHeight}},getUrlBits:function(){return{name:"comment_widget_shell",params:this._attr}}});FB.provide("XFBML.EdgeCommentWidget",{NextZIndex:10000});FB.subclass("XFBML.EdgeWidget","XFBML.IframeWidget",null,{_visibleAfter:"immediate",_showLoader:false,setupAndValidate:function(){FB.Dom.addCss(this.dom,"fb_edge_widget_with_comment");this._attr={channel_url:this.getChannelUrl(),debug:this._getBoolAttribute("debug"),href:this.getAttribute("href",window.location.href),is_permalink:this._getBoolAttribute("is-permalink"),node_type:this.getAttribute("node-type","link"),width:this._getWidgetWidth(),font:this.getAttribute("font"),layout:this._getLayout(),colorscheme:this.getAttribute("color-scheme"),action:this.getAttribute("action"),ref:this.getAttribute("ref"),show_faces:this._shouldShowFaces(),no_resize:this._getBoolAttribute("no_resize"),send:this.getAttribute("send"),url_map:this.getAttribute("url_map"),extended_social_context:this._getBoolAttribute("extended_social_context",false)};return true},oneTimeSetup:function(){this.subscribe("xd.authPrompted",FB.bind(this._onAuthPrompt,this));this.subscribe("xd.edgeCreated",FB.bind(this._onEdgeCreate,this));this.subscribe("xd.edgeRemoved",FB.bind(this._onEdgeRemove,this));this.subscribe("xd.presentEdgeCommentDialog",FB.bind(this._handleEdgeCommentDialogPresentation,this));this.subscribe("xd.dismissEdgeCommentDialog",FB.bind(this._handleEdgeCommentDialogDismissal,this));this.subscribe("xd.hideEdgeCommentDialog",FB.bind(this._handleEdgeCommentDialogHide,this));this.subscribe("xd.showEdgeCommentDialog",FB.bind(this._handleEdgeCommentDialogShow,this))},getSize:function(){return{width:this._getWidgetWidth(),height:this._getWidgetHeight()}},_getWidgetHeight:function(){var b=this._getLayout();var e=this._shouldShowFaces()?"show":"hide";var d=this.getAttribute("send");var a=65+(d&&d!=="false"?25:0);var c={standard:{show:80,hide:35},box_count:{show:a,hide:a},button_count:{show:21,hide:21},simple:{show:20,hide:20}};return c[b][e]},_getWidgetWidth:function(){var e=this._getLayout();var g=this.getAttribute("send");var h=this._shouldShowFaces()?"show":"hide";var c=(this.getAttribute("action")==="recommend"?130:90)+(g&&g!=="false"?60:0);var b=this.getAttribute("action")==="recommend"?100:55;var i=this.getAttribute("action")==="recommend"?90:50;var f={standard:{show:450,hide:450},box_count:{show:b,hide:b},button_count:{show:c,hide:c},simple:{show:i,hide:i}};var d=f[e][h];var j=this._getPxAttribute("width",d);var a={standard:{min:225,max:900},box_count:{min:b,max:900},button_count:{min:c,max:900},simple:{min:49,max:900}};if(j<a[e].min){j=a[e].min}else{if(j>a[e].max){j=a[e].max}}return j},_getLayout:function(){return this._getAttributeFromList("layout","standard",["standard","button_count","box_count","simple"])},_shouldShowFaces:function(){return this._getLayout()==="standard"&&this._getBoolAttribute("show-faces",true)},_handleEdgeCommentDialogPresentation:function(b){if(!this.isValid()){return}var a=document.createElement("span");this._commentSlave=this._createEdgeCommentWidget(b,a);this.dom.appendChild(a);this._commentSlave.process();this._commentWidgetNode=a},_createEdgeCommentWidget:function(b,a){var c={commentNode:a,externalUrl:b.externalURL,width:400,height:225,masterFrameName:b.masterFrameName,layout:this._getLayout(),relativeHeightOffset:this._getHeightOffset(b),relativeWidthOffset:this._getWidthOffset(b)};return new FB.XFBML.EdgeCommentWidget(c)},_getHeightOffset:function(c){if(c&&c.preComputedHeightOffset){return parseInt(c.preComputedHeightOffset,10)+"px"}var a=this._getLayout();var b={standard:"22px",button_count:"19px",box_count:"-5px",simple:"18px"};return b[a]},_getCommonEdgeCommentWidgetOpts:function(c,a,d,b){return{colorscheme:this._attr.colorscheme,commentNode:a,controllerID:c.controllerID,nodeImageURL:c.nodeImageURL,nodeRef:this._attr.ref,nodeTitle:c.nodeTitle,nodeURL:c.nodeURL,nodeSummary:c.nodeSummary,width:400,height:300,relativeHeightOffset:(b?this._getHeightOffset(c):this._getHeightOffset()),relativeWidthOffset:(d?this._getWidthOffset(c):this._getWidthOffset()),error:c.error,siderender:c.siderender,extended_social_context:c.extended_social_context}},_getWidthOffset:function(c){if(c&&c.preComputedWidthOffset){return parseInt(c.preComputedWidthOffset,10)+"px"}var a=this._getLayout();var b={standard:"0px",box_count:"0px",button_count:"0px",simple:"0px"};return b[a]},_handleEdgeCommentDialogDismissal:function(a){if(this._commentWidgetNode){this.dom.removeChild(this._commentWidgetNode);delete this._commentWidgetNode}},_handleEdgeCommentDialogHide:function(){if(this._commentWidgetNode){this._commentWidgetNode.style.display="none"}},_handleEdgeCommentDialogShow:function(){if(this._commentWidgetNode){this._commentWidgetNode.style.display="block"}},_fireEventAndInvokeHandler:function(b,a){FB.Helper.fireEvent(b,this);FB.Helper.invokeHandler(this.getAttribute(a),this,[this._attr.href])},_onEdgeCreate:function(){this._fireEventAndInvokeHandler("edge.create","on-create")},_onEdgeRemove:function(){this._fireEventAndInvokeHandler("edge.remove","on-remove")},_onAuthPrompt:function(){this._fireEventAndInvokeHandler("auth.prompt","on-prompt")}});FB.subclass("XFBML.SendButtonFormWidget","XFBML.EdgeCommentWidget",function(a){this._base(a);FB.Dom.addCss(this.dom,"fb_send_button_form_widget");FB.Dom.addCss(this.dom,a.colorscheme);FB.Dom.addCss(this.dom,(typeof a.siderender!="undefined"&&a.siderender)?"siderender":"");this._attr.nodeImageURL=a.nodeImageURL;this._attr.nodeRef=a.nodeRef;this._attr.nodeTitle=a.nodeTitle;this._attr.nodeURL=a.nodeURL;this._attr.nodeSummary=a.nodeSummary;this._attr.channel=this.getChannelUrl();this._attr.controllerID=a.controllerID;this._attr.colorscheme=a.colorscheme;this._attr.error=a.error;this._attr.siderender=a.siderender;this._attr.extended_social_context=a.extended_social_context},{_showLoader:true,getUrlBits:function(){return{name:"send_button_form_shell",params:this._attr}},oneTimeSetup:function(){this.subscribe("xd.messageSent",FB.bind(this._onMessageSent,this))},_onMessageSent:function(){FB.Event.fire("message.send",this._attr.nodeURL,this)}});FB.subclass("XFBML.Send","XFBML.EdgeWidget",null,{setupAndValidate:function(){FB.Dom.addCss(this.dom,"fb_edge_widget_with_comment");this._attr={channel:this.getChannelUrl(),api_key:FB._apiKey,font:this.getAttribute("font"),colorscheme:this.getAttribute("colorscheme","light"),href:this.getAttribute("href",window.location.href),ref:this.getAttribute("ref"),extended_social_context:this.getAttribute("extended_social_context",false)};return true},getUrlBits:function(){return{name:"send",params:this._attr}},_createEdgeCommentWidget:function(b,a){var c=this._getCommonEdgeCommentWidgetOpts(b,a);return new FB.XFBML.SendButtonFormWidget(c)},_getHeightOffset:function(){return"21px"},_getWidthOffset:function(){return"0px"},getSize:function(){return{width:FB.XFBML.Send.Dimensions.width,height:FB.XFBML.Send.Dimensions.height}}});FB.provide("XFBML.Send",{Dimensions:{width:80,height:25}});FB.subclass("XFBML.Like","XFBML.EdgeWidget",null,{_widgetPipeEnabled:true,getUrlBits:function(){return{name:"like",params:this._attr}},_createEdgeCommentWidget:function(b,a){if("send" in this._attr&&"widget_type" in b&&b.widget_type=="send"){var c=this._getCommonEdgeCommentWidgetOpts(b,a,true,true);return new FB.XFBML.SendButtonFormWidget(c)}else{return this._callBase("_createEdgeCommentWidget",b,a)}},getIframeTitle:function(){return"Like this content on Facebook."}});FB.subclass("XFBML.LikeBox","XFBML.IframeWidget",null,{_visibleAfter:"load",setupAndValidate:function(){this._attr={channel:this.getChannelUrl(),api_key:FB._apiKey,connections:this.getAttribute("connections"),css:this.getAttribute("css"),height:this.getAttribute("height"),id:this.getAttribute("profile-id"),header:this._getBoolAttribute("header",true),name:this.getAttribute("name"),show_faces:this._getBoolAttribute("show-faces",true),stream:this._getBoolAttribute("stream",true),width:this._getPxAttribute("width",300),href:this.getAttribute("href"),colorscheme:this.getAttribute("colorscheme","light"),border_color:this.getAttribute("border_color")};if(this._getBoolAttribute("force_wall",false)){this._attr.force_wall=true}if(this._attr.connections==="0"){this._attr.show_faces=false}else{if(this._attr.connections){this._attr.show_faces=true}}if(!this._attr.id&&!this._attr.name&&!this._attr.href){FB.log('<fb:like-box> requires one of the "id" or "name" attributes.');return false}var a=this._attr.height;if(!a){if(!this._attr.show_faces&&!this._attr.stream){a=62}else{a=95;if(this._attr.show_faces){a+=163}if(this._attr.stream){a+=300}if(this._attr.header&&this._attr.header!=="0"){a+=32}}}this._attr.height=a;this.subscribe("xd.likeboxLiked",FB.bind(this._onLiked,this));this.subscribe("xd.likeboxUnliked",FB.bind(this._onUnliked,this));return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"likebox",params:this._attr}},_onLiked:function(){FB.Helper.fireEvent("edge.create",this)},_onUnliked:function(){FB.Helper.fireEvent("edge.remove",this)}});FB.subclass("XFBML.LiveStream","XFBML.IframeWidget",null,{_visibleAfter:"load",setupAndValidate:function(){this._attr={app_id:this.getAttribute("event-app-id"),height:this._getPxAttribute("height",500),hideFriendsTab:this.getAttribute("hide-friends-tab"),redesigned:this._getBoolAttribute("redesigned-stream"),width:this._getPxAttribute("width",400),xid:this.getAttribute("xid","default"),always_post_to_friends:this._getBoolAttribute("always-post-to-friends",false),via_url:this.getAttribute("via_url")};return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){var a=this._attr.redesigned?"live_stream_box":"livefeed";return{name:a,params:this._attr}}});FB.subclass("XFBML.Login","XFBML.Facepile",null,{_visibleAfter:"load",getSize:function(){return{width:this._attr.width,height:94}},getUrlBits:function(){return{name:"login",params:this._attr}}});FB.subclass("XFBML.LoginButton","XFBML.ButtonElement",null,{setupAndValidate:function(){if(this._alreadySetup){return true}this._alreadySetup=true;this._attr={autologoutlink:this._getBoolAttribute("auto-logout-link"),length:this._getAttributeFromList("length","short",["long","short"]),onlogin:this.getAttribute("on-login"),perms:this.getAttribute("perms"),scope:this.getAttribute("scope"),registration_url:this.getAttribute("registration-url"),status:"unknown"};if(this._attr.autologoutlink){FB.Event.subscribe("auth.statusChange",FB.bind(this.process,this))}if(this._attr.registration_url){FB.Event.subscribe("auth.statusChange",this._saveStatus(this.process,false));FB.getLoginStatus(this._saveStatus(this.process,false))}return true},getButtonMarkup:function(){var a=this.getOriginalHTML();if(a){return a}if(!this._attr.registration_url){if(FB.getAccessToken()&&this._attr.autologoutlink){return FB.Intl._tx("Facebook Logout")}else{if(FB.getAccessToken()){return""}else{return this._getLoginText()}}}else{switch(this._attr.status){case"unknown":return this._getLoginText();case"notConnected":case"not_authorized":return FB.Intl._tx("Register");case"connected":if(FB.getAccessToken()&&this._attr.autologoutlink){return FB.Intl._tx("Facebook Logout")}return"";default:FB.log("Unknown status: "+this._attr.status);return FB.Intl._tx("Log In")}}},_getLoginText:function(){return this._attr.length=="short"?FB.Intl._tx("Log In"):FB.Intl._tx("Log In with Facebook")},onClick:function(){if(!this._attr.registration_url){if(!FB.getAccessToken()||!this._attr.autologoutlink){FB.login(FB.bind(this._authCallback,this),{perms:this._attr.perms,scope:this._attr.scope})}else{FB.logout(FB.bind(this._authCallback,this))}}else{switch(this._attr.status){case"unknown":FB.ui({method:"auth.logintoFacebook"},FB.bind(function(a){FB.bind(FB.getLoginStatus(this._saveStatus(this._authCallback,true),true),this)},this));break;case"notConnected":case"not_authorized":window.top.location=this._attr.registration_url;break;case"connected":if(!FB.getAccessToken()||!this._attr.autologoutlink){this._authCallback()}else{FB.logout(FB.bind(this._authCallback,this))}break;default:FB.log("Unknown status: "+this._attr.status)}}},_authCallback:function(a){FB.Helper.invokeHandler(this._attr.onlogin,this,[a])},_saveStatus:function(a,b){return FB.bind(function(c){if(b&&this._attr.registration_url&&(this._attr.status=="notConnected"||this._attr.status=="not_authorized")&&(c.status=="notConnected"||c.status=="not_authorized")){window.top.location=this._attr.registration_url}this._attr.status=c.status;if(a){a=this.bind(a,this);return a(c)}},this)}});FB.subclass("XFBML.Name","XFBML.Element",null,{process:function(){FB.copy(this,{_uid:this.getAttribute("uid"),_firstnameonly:this._getBoolAttribute("first-name-only"),_lastnameonly:this._getBoolAttribute("last-name-only"),_possessive:this._getBoolAttribute("possessive"),_reflexive:this._getBoolAttribute("reflexive"),_objective:this._getBoolAttribute("objective"),_linked:this._getBoolAttribute("linked",true),_subjectId:this.getAttribute("subject-id")});if(!this._uid){FB.log('"uid" is a required attribute for <fb:name>');this.fire("render");return}var b=[];if(this._firstnameonly){b.push("first_name")}else{if(this._lastnameonly){b.push("last_name")}else{b.push("name")}}if(this._subjectId){b.push("sex");if(this._subjectId==FB.Helper.getLoggedInUser()){this._reflexive=true}}var a;FB.Event.monitor("auth.statusChange",this.bind(function(){if(!this.isValid()){this.fire("render");return true}if(!this._uid||this._uid=="loggedinuser"){this._uid=FB.Helper.getLoggedInUser()}if(!this._uid){return}if(FB.Helper.isUser(this._uid)){a=FB.Data._selectByIndex(b,"user","uid",this._uid)}else{a=FB.Data._selectByIndex(["name","id"],"profile","id",this._uid)}a.wait(this.bind(function(c){if(this._subjectId==this._uid){this._renderPronoun(c[0])}else{this._renderOther(c[0])}this.fire("render")}))}))},_renderPronoun:function(b){var c="",a=this._objective;if(this._subjectId){a=true;if(this._subjectId===this._uid){this._reflexive=true}}if(this._uid==FB.Connect.get_loggedInUser()&&this._getBoolAttribute("use-you",true)){if(this._possessive){if(this._reflexive){c="your own"}else{c="your"}}else{if(this._reflexive){c="yourself"}else{c="you"}}}else{switch(b.sex){case"male":if(this._possessive){c=this._reflexive?"his own":"his"}else{if(this._reflexive){c="himself"}else{if(a){c="him"}else{c="he"}}}break;case"female":if(this._possessive){c=this._reflexive?"her own":"her"}else{if(this._reflexive){c="herself"}else{if(a){c="her"}else{c="she"}}}break;default:if(this._getBoolAttribute("use-they",true)){if(this._possessive){if(this._reflexive){c="their own"}else{c="their"}}else{if(this._reflexive){c="themselves"}else{if(a){c="them"}else{c="they"}}}}else{if(this._possessive){if(this._reflexive){c="his/her own"}else{c="his/her"}}else{if(this._reflexive){c="himself/herself"}else{if(a){c="him/her"}else{c="he/she"}}}}break}}if(this._getBoolAttribute("capitalize",false)){c=FB.Helper.upperCaseFirstChar(c)}this.dom.innerHTML=c},_renderOther:function(c){var b="",a="";if(this._uid==FB.Helper.getLoggedInUser()&&this._getBoolAttribute("use-you",true)){if(this._reflexive){if(this._possessive){b="your own"}else{b="yourself"}}else{if(this._possessive){b="your"}else{b="you"}}}else{if(c){if(null===c.first_name){c.first_name=""}if(null===c.last_name){c.last_name=""}if(this._firstnameonly&&c.first_name!==undefined){b=FB.String.escapeHTML(c.first_name)}else{if(this._lastnameonly&&c.last_name!==undefined){b=FB.String.escapeHTML(c.last_name)}}if(!b){b=FB.String.escapeHTML(c.name)}if(b!==""&&this._possessive){b+="'s"}}}if(!b){b=FB.String.escapeHTML(this.getAttribute("if-cant-see","Facebook User"))}if(b){if(this._getBoolAttribute("capitalize",false)){b=FB.Helper.upperCaseFirstChar(b)}if(c&&this._linked){a=FB.Helper.getProfileLink(c,b,this.getAttribute("href",null))}else{a=b}}this.dom.innerHTML=a}});FB.subclass("XFBML.ProfilePic","XFBML.Element",null,{process:function(){var d=this.getAttribute("size","thumb"),b=FB.XFBML.ProfilePic._sizeToPicFieldMap[d],g=this._getPxAttribute("width"),a=this._getPxAttribute("height"),e=this.dom.style,f=this.getAttribute("uid");if(this._getBoolAttribute("facebook-logo")){b+="_with_logo"}if(g){g=g+"px";e.width=g}if(a){a=a+"px";e.height=a}var c=this.bind(function(j){var l=j?j[0]:null,i=l?l[b]:null;if(!i){i=FB.getDomain("cdn")+FB.XFBML.ProfilePic._defPicMap[b]}var k=((g?"width:"+g+";":"")+(a?"height:"+g+";":"")),h=FB.String.format('<img src="{0}" alt="{1}" title="{1}" style="{2}" class="{3}" />',i,l?FB.String.escapeHTML(l.name):"",k,this.dom.className);if(this._getBoolAttribute("linked",true)){h=FB.Helper.getProfileLink(l,h,this.getAttribute("href",null))}this.dom.innerHTML=h;FB.Dom.addCss(this.dom,"fb_profile_pic_rendered");this.fire("render")});FB.Event.monitor("auth.statusChange",this.bind(function(){if(!this.isValid()){this.fire("render");return true}if(this.getAttribute("uid",null)=="loggedinuser"){f=FB.Helper.getLoggedInUser()}if(FB._userStatus&&f){FB.Data._selectByIndex(["name",b],FB.Helper.isUser(f)?"user":"profile",FB.Helper.isUser(f)?"uid":"id",f).wait(c)}else{c()}}))}});FB.provide("XFBML.ProfilePic",{_defPicMap:{pic:"pics/s_silhouette.jpg",pic_big:"pics/d_silhouette.gif",pic_big_with_logo:"pics/d_silhouette_logo.gif",pic_small:"pics/t_silhouette.jpg",pic_small_with_logo:"pics/t_silhouette_logo.gif",pic_square:"pics/q_silhouette.gif",pic_square_with_logo:"pics/q_silhouette_logo.gif",pic_with_logo:"pics/s_silhouette_logo.gif"},_sizeToPicFieldMap:{n:"pic_big",normal:"pic_big",q:"pic_square",s:"pic",small:"pic",square:"pic_square",t:"pic_small",thumb:"pic_small"}});FB.subclass("XFBML.Question","XFBML.IframeWidget",null,{_visibleAfter:"load",setupAndValidate:function(){this._attr={channel:this.getChannelUrl(),api_key:FB._apiKey,permalink:this.getAttribute("permalink"),width:this.getAttribute("width",400),height:0};this.subscribe("xd.firstVote",FB.bind(this._onInitialVote,this));this.subscribe("xd.vote",FB.bind(this._onChangedVote,this));return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"question",params:this._attr}},_onInitialVote:function(a){FB.Event.fire("question.firstVote",this._attr.permalink,a.vote)},_onChangedVote:function(a){FB.Event.fire("question.vote",this._attr.permalink,a.vote)}});FB.subclass("XFBML.Recommendations","XFBML.IframeWidget",null,{_visibleAfter:"load",_refreshOnAuthChange:true,setupAndValidate:function(){this._attr={border_color:this.getAttribute("border-color"),colorscheme:this.getAttribute("color-scheme"),filter:this.getAttribute("filter"),font:this.getAttribute("font"),action:this.getAttribute("action"),linktarget:this.getAttribute("linktarget","_blank"),max_age:this.getAttribute("max_age"),header:this._getBoolAttribute("header"),height:this._getPxAttribute("height",300),site:this.getAttribute("site",location.hostname),width:this._getPxAttribute("width",300)};return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"recommendations",params:this._attr}}});FB.subclass("XFBML.RecommendationsBar","XFBML.IframeWidget",null,{getUrlBits:function(){return{name:"recommendations_bar",params:this._attr}},setupAndValidate:function(){function b(j,i){var k=0;var l=null;function m(){i();l=null;k=(new Date()).getTime()}return function(){if(!l){var n=(new Date()).getTime();if(n-k<j){l=window.setTimeout(m,j-(n-k))}else{m()}}return true}}function g(j){if(j.match(/^\d+(?:\.\d+)?%$/)){var i=Math.min(Math.max(parseInt(j,10),0),100);j=i/100}else{if(j!="manual"&&j!="onvisible"){j="onvisible"}}return j}function f(i){return Math.max(parseInt(i,10)||30,10)}this._attr={channel:this.getChannelUrl(),api_key:FB._apiKey,font:this.getAttribute("font"),colorscheme:this.getAttribute("colorscheme"),side:this.getAttribute("side"),href:this.getAttribute("href",window.location.href),site:this.getAttribute("site"),action:this.getAttribute("action"),ref:this.getAttribute("ref"),trigger:g(this.getAttribute("trigger","")),read_time:f(this.getAttribute("read_time"))};FB._inPlugin=true;this._showLoader=false;this.subscribe("iframe.onload",FB.bind(function(){var i=this._attr.side||(FB._localeIsRtl?"left":"right");var j=this.dom.children[0];j.className="fbpluginrecommendationsbar fbpluginrecommendationsbar"+i},this));var a=FB.bind(function(){FB.Event.unlisten(window,"scroll",a);FB.Event.unlisten(document.documentElement,"click",a);FB.Event.unlisten(document.documentElement,"mousemove",a);window.setTimeout(FB.bind(this.arbiterInform,this,"platform/plugins/social_bar/action",null,FB.Arbiter.BEHAVIOR_STATE),this._attr.read_time*1000);return true},this);FB.Event.listen(window,"scroll",a);FB.Event.listen(document.documentElement,"click",a);FB.Event.listen(document.documentElement,"mousemove",a);if(this._attr.trigger=="manual"){var c=FB.bind(function(i){if(i==this._attr.href){FB.Event.unsubscribe("xfbml.recommendationsbar.read",c);this.arbiterInform("platform/plugins/social_bar/trigger",null,FB.Arbiter.BEHAVIOR_STATE)}return true},this);FB.Event.subscribe("xfbml.recommendationsbar.read",c)}else{var e=b(500,FB.bind(function(){if(this.calculateVisibility()){FB.Event.unlisten(window,"scroll",e);FB.Event.unlisten(window,"resize",e);this.arbiterInform("platform/plugins/social_bar/trigger",null,FB.Arbiter.BEHAVIOR_STATE)}return true},this));FB.Event.listen(window,"scroll",e);FB.Event.listen(window,"resize",e);e()}this.visible=false;var h=b(500,FB.bind(function(){if(!this.visible&&this.calculateVisibility()){this.visible=true;this.arbiterInform("platform/plugins/social_bar/visible")}else{if(this.visible&&!this.calculateVisibility()){this.visible=false;this.arbiterInform("platform/plugins/social_bar/invisible")}}return true},this));FB.Event.listen(window,"scroll",h);FB.Event.listen(window,"resize",h);h();this.focused=true;var d=FB.bind(function(){this.focused=!this.focused;return true},this);FB.Event.listen(window,"blur",d);FB.Event.listen(window,"focus",d);this.resize_running=false;this.animate=false;this.subscribe("xd.signal_animation",FB.bind(function(){this.animate=true},this));return true},getSize:function(){return{height:25,width:(this._attr.action=="recommend"?140:96)}},calculateVisibility:function(){var b=document.documentElement.clientHeight;if(!this.focused&&window.console&&window.console.firebug){return this.visible}switch(this._attr.trigger){case"manual":return false;case"onvisible":var a=this.dom.getBoundingClientRect().top;return a<=b;default:var d=window.scrollY+b;var c=document.documentElement.scrollHeight;return d/c>=this._attr.trigger}},_handleResizeMsg:function(a){if(!this.isValid()){return}if(a.width){this.getIframeNode().style.width=a.width+"px"}if(a.height){this._setNextResize(a.height);this._checkNextResize()}this._makeVisible()},_setNextResize:function(a){this.next_resize=a},_checkNextResize:function(){if(!this.next_resize||this.resize_running){return}var b=this.getIframeNode();var a=this.next_resize;this.next_resize=null;if(this.animate){this.animate=false;this.resize_running=true;FB.Anim.ate(b,{height:a+"px"},300,FB.bind(function(){this.resize_running=false;this._checkNextResize()},this))}else{b.style.height=a+"px"}}});FB.XFBML.RecommendationsBar.markRead=function(a){FB.Event.fire("xfbml.recommendationsbar.read",a||window.location.href)};FB.subclass("XFBML.Registration","XFBML.IframeWidget",null,{_visibleAfter:"immediate",_baseHeight:167,_fieldHeight:28,_skinnyWidth:520,_skinnyBaseHeight:173,_skinnyFieldHeight:52,setupAndValidate:function(){this._attr={action:this.getAttribute("action"),border_color:this.getAttribute("border-color"),channel_url:this.getChannelUrl(),client_id:FB._apiKey,fb_only:this._getBoolAttribute("fb-only",false),fb_register:this._getBoolAttribute("fb-register",false),fields:this.getAttribute("fields"),height:this._getPxAttribute("height"),redirect_uri:this.getAttribute("redirect-uri",window.location.href),no_footer:this._getBoolAttribute("no-footer"),no_header:this._getBoolAttribute("no-header"),onvalidate:this.getAttribute("onvalidate"),width:this._getPxAttribute("width",600),target:this.getAttribute("target")};if(this._attr.onvalidate){this.subscribe("xd.validate",this.bind(function(b){var d=FB.JSON.parse(b.value);var a=this.bind(function(e){FB.Arbiter.inform("Registration.Validation",{errors:e,id:b.id},'parent.frames["'+this.getIframeNode().name+'"]',window.location.protocol=="https:")});var c=FB.Helper.executeFunctionByName(this._attr.onvalidate,d,a);if(c){a(c)}}))}this.subscribe("xd.authLogin",FB.bind(this._onAuthLogin,this));this.subscribe("xd.authLogout",FB.bind(this._onAuthLogout,this));return true},getSize:function(){return{width:this._attr.width,height:this._getHeight()}},_getHeight:function(){if(this._attr.height){return this._attr.height}var b;if(!this._attr.fields){b=["name"]}else{try{b=FB.JSON.parse(this._attr.fields)}catch(a){b=this._attr.fields.split(/,/)}}if(this._attr.width<this._skinnyWidth){return this._skinnyBaseHeight+b.length*this._skinnyFieldHeight}else{return this._baseHeight+b.length*this._fieldHeight}},getUrlBits:function(){return{name:"registration",params:this._attr}},getDefaultWebDomain:function(){return"https_www"},_onAuthLogin:function(){if(!FB.getSession()){FB.getLoginStatus()}FB.Helper.fireEvent("auth.login",this)},_onAuthLogout:function(){if(!FB.getSession()){FB.getLoginStatus()}FB.Helper.fireEvent("auth.logout",this)}});FB.subclass("XFBML.ServerFbml","XFBML.IframeWidget",null,{_visibleAfter:"resize",setupAndValidate:function(){this._attr={channel_url:this.getChannelUrl(),fbml:this.getAttribute("fbml"),width:this._getPxAttribute("width")};if(!this._attr.fbml){var a=this.dom.getElementsByTagName("script")[0];if(a&&a.type==="text/fbml"){this._attr.fbml=a.innerHTML}}if(!this._attr.fbml){FB.log('<fb:serverfbml> requires the "fbml" attribute.');return false}return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"serverfbml",params:this._attr}}});FB.subclass("XFBML.ShareButton","XFBML.Element",null,{process:function(){this._href=this.getAttribute("href",window.location.href);this._type=this.getAttribute("type","icon_link");FB.Dom.addCss(this.dom,"fb_share_count_hidden");this._renderButton(true)},_renderButton:function(h){if(!this.isValid()){this.fire("render");return}var d="",e="",f="",c="",g=FB.Intl._tx("Share"),i="";switch(this._type){case"icon":case"icon_link":c="fb_button_simple";d=('<span class="fb_button_text">'+(this._type=="icon_link"?g:"&nbsp;")+"</span>");h=false;break;case"link":d=FB.Intl._tx("Share on Facebook");h=false;break;case"button":d='<span class="fb_button_text">'+g+"</span>";c="fb_button fb_button_small";h=false;break;case"button_count":d='<span class="fb_button_text">'+g+"</span>";e=('<span class="fb_share_count_nub_right">&nbsp;</span><span class="fb_share_count fb_share_count_right">'+this._getCounterMarkup()+"</span>");c="fb_button fb_button_small";break;default:d='<span class="fb_button_text">'+g+"</span>";f=('<span class="fb_share_count_nub_top">&nbsp;</span><span class="fb_share_count fb_share_count_top">'+this._getCounterMarkup()+"</span>");c="fb_button fb_button_small";i="fb_share_count_wrapper"}var b=FB.guid();this.dom.innerHTML=FB.String.format('<span class="{0}">{4}<a id="{1}" class="{2}" target="_blank">{3}</a>{5}</span>',i,b,c,d,f,e);var a=document.getElementById(b);a.href=this._href;a.onclick=function(){FB.ui({method:"stream.share",u:this.href});return false};if(!h){this.fire("render")}},_getCounterMarkup:function(){if(!this._count){this._count=FB.Data._selectByIndex(["total_count"],"link_stat","url",this._href)}var b="0";if(this._count.value!==undefined){if(this._count.value.length>0){var a=this._count.value[0].total_count;if(a>3){FB.Dom.removeCss(this.dom,"fb_share_count_hidden");b=a>=10000000?Math.round(a/1000000)+"M":(a>=10000?Math.round(a/1000)+"K":a)}}}else{this._count.wait(FB.bind(this._renderButton,this,false))}return'<span class="fb_share_count_inner">'+b+"</span>"}});void (0);FB.provide("",{_domain:{api:"https://api.facebook.com/",api_read:"https://api-read.facebook.com/",cdn:"http://static.ak.fbcdn.net/",cdn_foreign:"http://connect.facebook.net/",graph:"https://graph.facebook.com/",https_cdn:"https://s-static.ak.fbcdn.net/",https_staticfb:"https://s-static.ak.facebook.com/",https_www:"https://www.facebook.com/",staticfb:"http://static.ak.facebook.com/",www:"http://www.facebook.com/",m:"http://m.facebook.com/",https_m:"https://m.facebook.com/"},_locale:"en_US",_localeIsRtl:false},true);FB.provide("Flash",{_minVersions:[[10,0,22,87],[11,0,0]],_swfPath:"rsrc.php/v1/yK/r/RIxWozDt5Qq.swf"},true);FB.provide("XD",{_xdProxyUrl:"connect/xd_proxy.php?version=3"},true);FB.provide("Arbiter",{_canvasProxyUrl:"connect/canvas_proxy.php?version=3"},true);FB.provide("Auth",{_xdStorePath:"xd_localstorage/v2"},true);FB.initSitevars={parseXFBMLBeforeDomReady:false,computeContentSizeVersion:0,enableMobile:1,iframePermissions:{read_stream:false,manage_mailbox:false,manage_friendlists:false,read_mailbox:false,publish_checkins:true,status_update:true,photo_upload:true,video_upload:true,sms:false,create_event:true,rsvp_event:true,offline_access:true,email:true,xmpp_login:false,create_note:true,share_item:true,export_stream:false,publish_stream:true,publish_likes:true,ads_management:false,contact_email:true,access_private_data:false,read_insights:false,read_requests:false,read_friendlists:true,manage_pages:false,physical_login:false,manage_groups:false,read_deals:false}};FB.forceOAuth=false;FB.widgetPipeEnabledApps={"111476658864976":1,cca6477272fc5cb805f85a84f20fca1d:1,"179150165472010":1};FB.widgetPipeTagCountThreshold=4;FB.provide("Canvas.Prefetcher",{_appIdsBlacklist:[144959615576466],_sampleRate:500},true);FB.provide("TemplateData",{_enabled:true},true);FB.provide("TemplateUI",{_version:17},true);FB.provide("XFBML.ConnectBar",{imgs:{buttonUrl:"rsrc.php/v1/yD/r/vTpCGF2NWj7.png",missingProfileUrl:"rsrc.php/v1/ym/r/nMw9YWcvr3_.gif"}},true);FB.provide("XFBML.ProfilePic",{_defPicMap:{pic:"rsrc.php/v1/yp/r/2cLuhrLzxsT.jpg",pic_big:"rsrc.php/v1/ya/r/Vh4HEOBGqoq.gif",pic_big_with_logo:"rsrc.php/v1/yl/r/gbd23PK7Uts.gif",pic_small:"rsrc.php/v1/yJ/r/uLqQ0MPKchK.jpg",pic_small_with_logo:"rsrc.php/v1/yh/r/vMk65SFB5Ka.gif",pic_square:"rsrc.php/v1/ym/r/nMw9YWcvr3_.gif",pic_square_with_logo:"rsrc.php/v1/y6/r/KqC4dWrYX1S.gif",pic_with_logo:"rsrc.php/v1/yG/r/-So-t1Fe5ja.gif"}},true);if(FB.Dom&&FB.Dom.addCssRules){FB.Dom.addCssRules('.fb_hidden{position:absolute;top:-10000px;z-index:10001}\n.fb_invisible{display:none}\n.fb_reset{background:none;border-spacing:0;border:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size: 11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}\n.fb_link img{border:none}\n.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}\n.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px}\n.fb_dialog_content{background:#fff;color:#333}\n.fb_dialog_close_icon{background:url(http://static.ak.fbcdn.net/rsrc.php/v1/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v1/yL/r/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px;top:8px\\9;right:7px\\9}\n.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}\n.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}\n.fb_dialog_close_icon:hover{background:url(http://static.ak.fbcdn.net/rsrc.php/v1/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v1/yL/r/s816eWC-2sl.gif)}\n.fb_dialog_close_icon:active{background:url(http://static.ak.fbcdn.net/rsrc.php/v1/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v1/yL/r/s816eWC-2sl.gif)}\n.fb_dialog_loader{background-color:#f2f2f2;border:1px solid #606060;font-size: 24px;padding:20px}\n.fb_dialog_top_left,\n.fb_dialog_top_right,\n.fb_dialog_bottom_left,\n.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}\n.fb_dialog_top_left{background:url(http://static.ak.fbcdn.net/rsrc.php/v1/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}\n.fb_dialog_top_right{background:url(http://static.ak.fbcdn.net/rsrc.php/v1/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}\n.fb_dialog_bottom_left{background:url(http://static.ak.fbcdn.net/rsrc.php/v1/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}\n.fb_dialog_bottom_right{background:url(http://static.ak.fbcdn.net/rsrc.php/v1/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}\n.fb_dialog_vert_left,\n.fb_dialog_vert_right,\n.fb_dialog_horiz_top,\n.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}\n.fb_dialog_vert_left,\n.fb_dialog_vert_right{width:10px;height:100\u0025}\n.fb_dialog_vert_left{margin-left:-10px}\n.fb_dialog_vert_right{right:0;margin-right:-10px}\n.fb_dialog_horiz_top,\n.fb_dialog_horiz_bottom{width:100\u0025;height:10px}\n.fb_dialog_horiz_top{margin-top:-10px}\n.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}\n.fb_dialog_iframe{line-height:0}\n.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #3b5998;color:#fff;font-size: 14px;font-weight:bold;margin:0}\n.fb_dialog_content .dialog_title > span{background:url(http://static.ak.fbcdn.net/rsrc.php/v1/yd/r/Cou7n-nqK52.gif)\nno-repeat 5px 50\u0025;float:left;padding:5px 0 7px 26px}\nbody.fb_hidden{-webkit-transform:none;height:100\u0025;margin:0;left:-10000px;overflow:visible;position:absolute;top:-10000px;width:100\u0025\n}\n.fb_dialog.fb_dialog_mobile.loading{background:url(http://static.ak.fbcdn.net/rsrc.php/v1/yO/r/_j03izEX40U.gif)\nwhite no-repeat 50\u0025 50\u0025;min-height:100\u0025;min-width:100\u0025;overflow:hidden;position:absolute;top:0;z-index:10001}\n.fb_dialog.fb_dialog_mobile.loading.centered{max-height:590px;min-height:590px;max-width:500px;min-width:500px}\n#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;left:0;top:0;width:100\u0025;min-height:100\u0025;z-index:10000}\n#fb-root #fb_dialog_ipad_overlay.hidden{display:none}\n.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}\n.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0 0, 0 100\u0025, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle\nwhite-space:nowrap}\n.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100\u0025\n}\n.fb_dialog_content .dialog_header td.header_left{font-size: 12px;padding-left:5px;vertical-align:middle;width:60px\n}\n.fb_dialog_content .dialog_header td.header_right{font-size: 12px;padding-right:5px;vertical-align:middle;width:60px\n}\n.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0 0, 0 100\u0025, from(#4966A6),\ncolor-stop(0.5, #355492), to(#2A4887));border:1px solid #29447e;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset,\nrgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}\n.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}\n.fb_dialog_content .dialog_header .header_center{color:#fff;font-size: 16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}\n.fb_dialog_content .dialog_content{background:url(http://static.ak.fbcdn.net/rsrc.php/v1/y9/r/jKEcVPZFk-2.gif) no-repeat 50\u0025 50\u0025;border:1px solid #555;border-bottom:0;border-top:0;height:150px}\n.fb_dialog_content .dialog_footer{background:#f2f2f2;border:1px solid #555;border-top-color:#ccc;height:40px}\n#fb_dialog_loader_close{float:left}\n.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}\n.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}\n.fb_iframe_widget{position:relative;display:-moz-inline-block;display:inline-block}\n.fb_iframe_widget iframe{position:relative;vertical-align:text-bottom}\n.fb_iframe_widget span{position:relative}\n.fb_hide_iframes iframe{position:relative;left:-10000px}\n.fb_iframe_widget_loader{position:relative;display:inline-block}\n.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}\n.fb_iframe_widget_loader .FB_Loader{background:url(http://static.ak.fbcdn.net/rsrc.php/v1/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50\u0025;z-index:4}\n.fb_button_simple,\n.fb_button_simple_rtl{background-image:url(http://static.ak.fbcdn.net/rsrc.php/v1/yH/r/eIpbnVKI9lR.png);background-repeat:no-repeat;cursor:pointer;outline:none;text-decoration:none}\n.fb_button_simple_rtl{background-position:right 0}\n.fb_button_simple .fb_button_text{margin:0 0 0 20px;padding-bottom:1px}\n.fb_button_simple_rtl .fb_button_text{margin:0 10px 0 0}\na.fb_button_simple:hover .fb_button_text,\na.fb_button_simple_rtl:hover .fb_button_text,\n.fb_button_simple:hover .fb_button_text,\n.fb_button_simple_rtl:hover .fb_button_text{text-decoration:underline}\n.fb_button,\n.fb_button_rtl{background:#29447e url(http://static.ak.fbcdn.net/rsrc.php/v1/yL/r/FGFbc80dUKj.png);background-repeat:no-repeat;cursor:pointer;display:inline-block;padding:0 0 0 1px;text-decoration:none;outline:none}\n.fb_button .fb_button_text,\n.fb_button_rtl .fb_button_text{background:#5f78ab url(http://static.ak.fbcdn.net/rsrc.php/v1/yL/r/FGFbc80dUKj.png);border-top:solid 1px #879ac0;border-bottom:solid 1px #1a356e;color:#fff;display:block;font-family:"lucida grande",tahoma,verdana,arial,sans-serif;font-weight:bold;padding:2px 6px 3px 6px;margin:1px 1px 0 21px;text-shadow:none}\na.fb_button,\na.fb_button_rtl,\n.fb_button,\n.fb_button_rtl{text-decoration:none}\na.fb_button:active .fb_button_text,\na.fb_button_rtl:active .fb_button_text,\n.fb_button:active .fb_button_text,\n.fb_button_rtl:active .fb_button_text{border-bottom:solid 1px #29447e;border-top:solid 1px #45619d;background:#4f6aa3;text-shadow:none}\n.fb_button_xlarge,\n.fb_button_xlarge_rtl{background-position:left -60px;font-size: 24px;line-height:30px}\n.fb_button_xlarge .fb_button_text{padding:3px 8px 3px 12px;margin-left:38px}\na.fb_button_xlarge:active{background-position:left -99px}\n.fb_button_xlarge_rtl{background-position:right -268px}\n.fb_button_xlarge_rtl .fb_button_text{padding:3px 8px 3px 12px;margin-right:39px}\na.fb_button_xlarge_rtl:active{background-position:right -307px}\n.fb_button_large,\n.fb_button_large_rtl{background-position:left -138px;font-size: 13px;line-height:16px}\n.fb_button_large .fb_button_text{margin-left:24px;padding:2px 6px 4px 6px}\na.fb_button_large:active{background-position:left -163px}\n.fb_button_large_rtl{background-position:right -346px}\n.fb_button_large_rtl .fb_button_text{margin-right:25px}\na.fb_button_large_rtl:active{background-position:right -371px}\n.fb_button_medium,\n.fb_button_medium_rtl{background-position:left -188px;font-size: 11px;line-height:14px}\na.fb_button_medium:active{background-position:left -210px}\n.fb_button_medium_rtl{background-position:right -396px}\n.fb_button_text_rtl,\n.fb_button_medium_rtl .fb_button_text{padding:2px 6px 3px 6px;margin-right:22px}\na.fb_button_medium_rtl:active{background-position:right -418px}\n.fb_button_small,\n.fb_button_small_rtl{background-position:left -232px;font-size: 10px;line-height:10px}\n.fb_button_small .fb_button_text{padding:2px 6px 3px;margin-left:17px}\na.fb_button_small:active,\n.fb_button_small:active{background-position:left -250px}\n.fb_button_small_rtl{background-position:right -440px}\n.fb_button_small_rtl .fb_button_text{padding:2px 6px;margin-right:18px}\na.fb_button_small_rtl:active{background-position:right -458px}\n.fb_share_count_wrapper{position:relative;float:left}\n.fb_share_count{background:#b0b9ec none repeat scroll 0 0;color:#333;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;text-align:center}\n.fb_share_count_inner{background:#e8ebf2;display:block}\n.fb_share_count_right{margin-left:-1px;display:inline-block}\n.fb_share_count_right .fb_share_count_inner{border-top:solid 1px #e8ebf2;border-bottom:solid 1px #b0b9ec;margin:1px 1px 0 1px;font-size: 10px;line-height:10px;padding:2px 6px 3px;font-weight:bold}\n.fb_share_count_top{display:block;letter-spacing:-1px;line-height:34px;margin-bottom:7px;font-size: 22px;border:solid 1px #b0b9ec}\n.fb_share_count_nub_top{border:none;display:block;position:absolute;left:7px;top:35px;margin:0;padding:0;width:6px;height:7px;background-repeat:no-repeat;background-image:url(http://static.ak.fbcdn.net/rsrc.php/v1/yU/r/bSOHtKbCGYI.png)}\n.fb_share_count_nub_right{border:none;display:inline-block;padding:0;width:5px;height:10px;background-repeat:no-repeat;background-image:url(http://static.ak.fbcdn.net/rsrc.php/v1/yX/r/i_oIVTKMYsL.png);vertical-align:top;background-position:right 5px;z-index:10;left:2px;margin:0 2px 0 0;position:relative}\n.fb_share_no_count{display:none}\n.fb_share_size_Small .fb_share_count_right .fb_share_count_inner{font-size: 10px}\n.fb_share_size_Medium .fb_share_count_right .fb_share_count_inner{font-size: 11px;padding:2px 6px 3px;letter-spacing:-1px;line-height:14px}\n.fb_share_size_Large .fb_share_count_right .fb_share_count_inner{font-size: 13px;line-height:16px;padding:2px 6px 4px;font-weight:normal;letter-spacing:-1px}\n.fb_share_count_hidden .fb_share_count_nub_top,\n.fb_share_count_hidden .fb_share_count_top,\n.fb_share_count_hidden .fb_share_count_nub_right,\n.fb_share_count_hidden .fb_share_count_right{visibility:hidden}\n.fb_connect_bar_container div,\n.fb_connect_bar_container span,\n.fb_connect_bar_container a,\n.fb_connect_bar_container img,\n.fb_connect_bar_container strong{background:none;border-spacing:0;border:0;direction:ltr;font-style:normal;font-variant:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal;vertical-align:baseline}\n.fb_connect_bar_container{position:fixed;left:0 !important;right:0 !important;height:42px !important;padding:0 25px !important;margin:0 !important;vertical-align:middle !important;border-bottom:1px solid #333 !important;background:#3b5998 !important;z-index:99999999 !important;overflow:hidden !important}\n.fb_connect_bar_container_ie6{position:absolute;top:expression(document.compatMode=="CSS1Compat"? document.documentElement.scrollTop+"px":body.scrollTop+"px")}\n.fb_connect_bar{position:relative;margin:auto;height:100\u0025;width:100\u0025;padding:6px 0 0 0 !important;background:none;color:#fff !important;font-family:"lucida grande", tahoma, verdana, arial, sans-serif !important;font-size: 13px !important;font-style:normal !important;font-variant:normal !important;font-weight:normal !important;letter-spacing:normal !important;line-height:1 !important;text-decoration:none !important;text-indent:0 !important;text-shadow:none !important;text-transform:none !important;white-space:normal !important;word-spacing:normal !important}\n.fb_connect_bar a:hover{color:#fff}\n.fb_connect_bar .fb_profile img{height:30px;width:30px;vertical-align:middle;margin:0 6px 5px 0}\n.fb_connect_bar div a,\n.fb_connect_bar span,\n.fb_connect_bar span a{color:#bac6da;font-size: 11px;text-decoration:none}\n.fb_connect_bar .fb_buttons{float:right;margin-top:7px}\n.fb_edge_widget_with_comment{position:relative;*z-index:1000}\n.fb_edge_widget_with_comment span.fb_edge_comment_widget{position:absolute}\n.fb_edge_widget_with_comment span.fb_edge_comment_widget iframe.fb_ltr{left:-4px}\n.fb_edge_widget_with_comment span.fb_edge_comment_widget iframe.fb_rtl{left:2px}\n.fb_edge_widget_with_comment span.fb_send_button_form_widget{left:0;z-index:1}\n.fb_edge_widget_with_comment span.fb_send_button_form_widget .FB_Loader{left:0;top:1px;margin-top:6px;margin-left:0;background-position:50\u0025 50\u0025;background-color:#fff;height:150px;width:394px;border:1px #666 solid;border-bottom:2px solid #283e6c;z-index:1}\n.fb_edge_widget_with_comment span.fb_send_button_form_widget.dark .FB_Loader{background-color:#000;border-bottom:2px solid #ccc}\n.fb_edge_widget_with_comment span.fb_send_button_form_widget.siderender\n.FB_Loader{margin-top:0}\n.fbpluginrecommendationsbar{position:fixed !important;bottom:0;z-index:999}\n.fbpluginrecommendationsbarleft{left:10px}\n.fbpluginrecommendationsbarright{right:10px}\n',["fb.css.base","fb.css.dialog","fb.css.iframewidget","fb.css.button","fb.css.sharebutton","fb.css.connectbarwidget","fb.css.edgecommentwidget","fb.css.sendbuttonformwidget","fb.css.plugin.recommendationsbar"])}FB.provide("L10n",{setLocale:function(locale){FB._ylang=locale;FB._locale=locale.replace(/-Han[t|s]/,"").replace("-","_")},getLocale:function(){return FB._ylang}},true);FB.YUI=Y;FB.provide("",{init:function(options){FB._originalFB.init(options);if(typeof YAHOO=="undefined"){YAHOO={}}if(typeof YAHOO.Media=="undefined"){YAHOO.Media={}}if(typeof YAHOO.Media.Facebook=="undefined"){YAHOO.Media.Facebook={}}YAHOO.Media.Facebook._initialized=true;YUI.namespace("Env.FB").isInitialized=function(){return true};YUI.namespace("Env.FB").getInitOptions=function(){return options};Y.publish("FB:init",{emitFacade:true,broadcast:2});Y.fire("FB:init",{_options:options})}},true);try{if(!Y.one("#fb-root")){var fbroot=Y.Node.create('<div id="fb-root"></div>'),body=Y.one("body");body.insertBefore(fbroot,body.get("firstChild"))}}catch(e){}},"2.0.0",{requires:["io-xdr","node-base","event-base"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.3.0
build: 3167
*/
YUI.add("io-base",function(d){var D="io:start",p="io:complete",b="io:success",f="io:failure",E="io:end",y=0,o={"X-Requested-With":"XMLHttpRequest"},z={},k=d.config.win;function l(){return k.XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");}function e(){var w=y;y++;return w;}function x(G,w){var F={};F.id=d.Lang.isNumber(w)?w:e();G=G||{};if(!G.use&&!G.upload){F.c=l();}else{if(G.use){if(G.use==="native"){if(k.XDomainRequest){F.c=new XDomainRequest();F.t=G.use;}else{F.c=l();}}else{F.c=d.io._transport[G.use];F.t=G.use;}}else{F.c={};F.t="io:iframe";}}return F;}function i(w){if(k){if(w.c&&k.XMLHttpRequest){w.c.onreadystatechange=null;}else{if(d.UA.ie===6&&!w.t){w.c.abort();}}}w.c=null;w=null;}function q(H,I){var G=new d.EventTarget().publish("transaction:"+H),w=I.arguments,F=I.context||d;if(w){G.on(I.on[H],F,w);}else{G.on(I.on[H],F);}return G;}function u(G,F){var w=F.arguments;if(w){d.fire(D,G,w);}else{d.fire(D,G);}if(F.on&&F.on.start){q("start",F).fire(G);}}function g(G,H){var F=G.e?{status:0,statusText:G.e}:G.c,w=H.arguments;if(w){d.fire(p,G.id,F,w);}else{d.fire(p,G.id,F);}if(H.on&&H.on.complete){q("complete",H).fire(G.id,F);}}function j(F,G){var w=G.arguments;if(w){d.fire(E,F.id,w);}else{d.fire(E,F.id);}if(G.on&&G.on.end){q("end",G).fire(F.id);}i(F);}function t(F,G){var w=G.arguments;if(w){d.fire(b,F.id,F.c,w);}else{d.fire(b,F.id,F.c);}if(G.on&&G.on.success){q("success",G).fire(F.id,F.c);}j(F,G);}function h(G,H){var F=G.e?{status:0,statusText:G.e}:G.c,w=H.arguments;if(w){d.fire(f,G.id,F,w);}else{d.fire(f,G.id,F);}if(H.on&&H.on.failure){q("failure",H).fire(G.id,F);}j(G,H);}function a(G,w,H,F){i(G);H.xdr.use="flash";H.data=H.form&&F?F:null;return d.io(w,H,G.id);}function r(w,F){w+=((w.indexOf("?")==-1)?"?":"&")+F;return w;}function v(w,F){if(F){o[w]=F;}else{delete o[w];}}function c(G,w){var F;w=w||{};for(F in o){if(o.hasOwnProperty(F)){if(!w[F]){w[F]=o[F];}}}for(F in w){if(w.hasOwnProperty(F)){if(w[F]!=="disable"){G.setRequestHeader(F,w[F]);}}}}function n(F,w){if(F&&F.c){F.e=w;F.c.abort();}}function s(F,w){z[F.id]=k.setTimeout(function(){n(F,"timeout");},w);}function m(w){k.clearTimeout(z[w]);delete z[w];}function B(G,H){var w;try{w=(G.c.status&&G.c.status!==0)?G.c.status:0;}catch(F){w=0;}if(w>=200&&w<300||w===1223){t(G,H);}else{h(G,H);}}function C(w,F){if(w.c.readyState===4){if(F.timeout){m(w.id);}k.setTimeout(function(){g(w,F);B(w,F);},0);}}function A(G,O,K){var L,F,M,H,w,S,J,Q,I,R=G;O=d.Object(O);F=x(O.xdr||O.form,K);H=O.method?O.method=O.method.toUpperCase():O.method="GET";S=O.sync;J=O.data;if(d.Lang.isObject(O.data)&&d.QueryString){O.data=d.QueryString.stringify(O.data);}if(O.form){if(O.form.upload){return d.io.upload(F,G,O);}else{L=d.io._serialize(O.form,O.data);if(H==="POST"||H==="PUT"){O.data=L;}else{if(H==="GET"){G=r(G,L);}}}}if(O.data&&H==="GET"){G=r(G,O.data);}if(O.data&&H==="POST"){O.headers=d.merge({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},O.headers);}if(F.t){return d.io.xdr(G,F,O);}if(!S){F.c.onreadystatechange=function(){C(F,O);};}try{F.c.open(H,G,S?false:true);if(O.xdr&&O.xdr.credentials){F.c.withCredentials=true;}}catch(P){if(O.xdr){return a(F,R,O,J);}}c(F.c,O.headers);u(F.id,O);try{F.c.send(O.data||"");if(S){M=F.c;Q=["status","statusText","responseText","responseXML"];w=O.arguments?{id:F.id,arguments:O.arguments}:{id:F.id};for(I=0;I<4;I++){w[Q[I]]=F.c[Q[I]];}w.getAllResponseHeaders=function(){return M.getAllResponseHeaders();};w.getResponseHeader=function(T){return M.getResponseHeader(T);};g(F,O);B(F,O);return w;}}catch(N){if(O.xdr){return a(F,R,O,J);}}if(O.timeout){s(F,O.timeout);}return{id:F.id,abort:function(){return F.c?n(F,"abort"):false;},isInProgress:function(){return F.c?F.c.readyState!==4&&F.c.readyState!==0:false;}};}A.start=u;A.complete=g;A.success=t;A.failure=h;A.end=j;A._id=e;A._timeout=z;A.header=v;d.io=A;d.io.http=A;},"3.3.0",{requires:["event-custom-base","querystring-stringify-simple"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.3.0
build: 3167
*/
YUI.add("datatype-xml-parse",function(b){var a=b.Lang;b.mix(b.namespace("DataType.XML"),{parse:function(f){var d=null;if(a.isString(f)){try{if(!a.isUndefined(ActiveXObject)){d=new ActiveXObject("Microsoft.XMLDOM");d.async=false;d.loadXML(f);}}catch(c){try{if(!a.isUndefined(DOMParser)){d=new DOMParser().parseFromString(f,"text/xml");}}catch(g){}}}if((a.isNull(d))||(a.isNull(d.documentElement))||(d.documentElement.nodeName==="parsererror")){}return d;}});b.namespace("Parsers").xml=b.DataType.XML.parse;},"3.3.0",{requires:["yui-base"]});YUI.add("datatype-xml-format",function(b){var a=b.Lang;b.mix(b.namespace("DataType.XML"),{format:function(c){try{if(!a.isUndefined(XMLSerializer)){return(new XMLSerializer()).serializeToString(c);}}catch(d){if(c&&c.xml){return c.xml;}else{return(a.isValue(c)&&c.toString)?c.toString():"";}}}});},"3.3.0",{requires:["yui-base"]});YUI.add("datatype-xml",function(a){},"3.3.0",{use:["datatype-xml-parse","datatype-xml-format"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.3.0
build: 3167
*/
YUI.add("io-xdr",function(c){var l=c.publish("io:xdrReady",{fireOnce:true}),g={},h={},k=c.config.doc,m=c.config.win,b=m&&m.XDomainRequest;function i(d,q){var n='<object id="yuiIoSwf" type="application/x-shockwave-flash" data="'+d+'" width="0" height="0">'+'<param name="movie" value="'+d+'">'+'<param name="FlashVars" value="yid='+q+'">'+'<param name="allowScriptAccess" value="always">'+"</object>",p=k.createElement("div");k.body.appendChild(p);p.innerHTML=n;}function a(d,n){d.c.onprogress=function(){h[d.id]=3;};d.c.onload=function(){h[d.id]=4;c.io.xdrResponse(d,n,"success");};d.c.onerror=function(){h[d.id]=4;c.io.xdrResponse(d,n,"failure");};if(n.timeout){d.c.ontimeout=function(){h[d.id]=4;c.io.xdrResponse(d,n,"timeout");};d.c.timeout=n.timeout;}}function e(r,q,n){var p,d;if(!r.e){p=q?decodeURI(r.c.responseText):r.c.responseText;d=n==="xml"?c.DataType.XML.parse(p):null;return{id:r.id,c:{responseText:p,responseXML:d}};}else{return{id:r.id,e:r.e};}}function j(d,n){return d.c.abort(d.id,n);}function f(d){return b?h[d.id]!==4:d.c.isInProgress(d.id);}c.mix(c.io,{_transport:{},xdr:function(d,n,p){if(p.xdr.use==="flash"){g[n.id]={on:p.on,context:p.context,arguments:p.arguments};p.context=null;p.form=null;m.setTimeout(function(){if(n.c&&n.c.send){n.c.send(d,p,n.id);}else{c.io.xdrResponse(n,p,"transport error");}},c.io.xdr.delay);}else{if(b){a(n,p);n.c.open(p.method||"GET",d);n.c.send(p.data);}else{n.c.send(d,n,p);}}return{id:n.id,abort:function(){return n.c?j(n,p):false;},isInProgress:function(){return n.c?f(n.id):false;}};},xdrResponse:function(s,u,r){var n,d=b?h:g,q=u.xdr.use==="flash"?true:false,p=u.xdr.dataType;u.on=u.on||{};if(q){n=g[s.id]?g[s.id]:null;if(n){u.on=n.on;u.context=n.context;u.arguments=n.arguments;}}switch(r){case"start":c.io.start(s.id,u);break;case"complete":c.io.complete(s,u);break;case"success":c.io.success(p||q?e(s,q,p):s,u);delete d[s.id];break;case"timeout":case"abort":case"transport error":s.e=r;case"failure":c.io.failure(p||q?e(s,q,p):s,u);delete d[s.id];break;}},xdrReady:function(d){c.io.xdr.delay=0;c.fire(l,d);},transport:function(p){var q=p.yid||c.id,d=p.id||"flash",n=c.UA.ie?p.src+"?d="+new Date().valueOf().toString():p.src;if(d==="native"||d==="flash"){i(n,q);this._transport.flash=k.getElementById("yuiIoSwf");}else{if(d){this._transport[p.id]=p.src;}}}});c.io.xdr.delay=50;},"3.3.0",{requires:["io-base","datatype-xml"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.3.0
build: 3167
*/
YUI.add("attribute-base",function(c){c.State=function(){this.data={};};c.State.prototype={add:function(B,C,E){var D=this.data;D[C]=D[C]||{};D[C][B]=E;},addAll:function(B,D){var C;for(C in D){if(D.hasOwnProperty(C)){this.add(B,C,D[C]);}}},remove:function(B,C){var D=this.data;if(D[C]&&(B in D[C])){delete D[C][B];}},removeAll:function(B,D){var C=this.data;c.each(D||C,function(F,E){if(c.Lang.isString(E)){this.remove(B,E);}else{this.remove(B,F);}},this);},get:function(B,C){var D=this.data;return(D[C]&&B in D[C])?D[C][B]:undefined;},getAll:function(B){var D=this.data,C;c.each(D,function(F,E){if(B in D[E]){C=C||{};C[E]=F[B];}},this);return C;}};var k=c.Object,f=c.Lang,l=c.EventTarget,w=".",t="Change",n="getter",m="setter",o="readOnly",x="writeOnce",u="initOnly",A="validator",h="value",p="valueFn",e="broadcast",r="lazyAdd",j="_bypassProxy",z="added",b="initializing",i="initValue",v="published",s="defaultValue",a="lazy",q="isLazyAdd",g,y={};y[o]=1;y[x]=1;y[n]=1;y[e]=1;function d(){var D=this,B=this.constructor.ATTRS,C=c.Base;D._ATTR_E_FACADE={};l.call(D,{emitFacade:true});D._conf=D._state=new c.State();D._stateProxy=D._stateProxy||null;D._requireAddAttr=D._requireAddAttr||false;if(B&&!(C&&c.instanceOf(D,C))){D.addAttrs(this._protectAttrs(B));}}d.INVALID_VALUE={};g=d.INVALID_VALUE;d._ATTR_CFG=[m,n,A,h,p,x,o,r,e,j];d.prototype={addAttr:function(C,B,E){var F=this,H=F._state,G,D;E=(r in B)?B[r]:E;if(E&&!F.attrAdded(C)){H.add(C,a,B||{});H.add(C,z,true);}else{if(!F.attrAdded(C)||H.get(C,q)){B=B||{};D=(h in B);if(D){G=B.value;delete B.value;}B.added=true;B.initializing=true;H.addAll(C,B);if(D){F.set(C,G);}H.remove(C,b);}}return F;},attrAdded:function(B){return !!this._state.get(B,z);},modifyAttr:function(C,B){var D=this,F,E;if(D.attrAdded(C)){if(D._isLazyAttr(C)){D._addLazyAttr(C);}E=D._state;for(F in B){if(y[F]&&B.hasOwnProperty(F)){E.add(C,F,B[F]);if(F===e){E.remove(C,v);}}}}},removeAttr:function(B){this._state.removeAll(B);},get:function(B){return this._getAttr(B);},_isLazyAttr:function(B){return this._state.get(B,a);},_addLazyAttr:function(C){var D=this._state,B=D.get(C,a);D.add(C,q,true);D.remove(C,a);this.addAttr(C,B);},set:function(B,D,C){return this._setAttr(B,D,C);},reset:function(B){var D=this,C;if(B){if(D._isLazyAttr(B)){D._addLazyAttr(B);}D.set(B,D._state.get(B,i));}else{C=D._state.data.added;c.each(C,function(E,F){D.reset(F);},D);}return D;},_set:function(B,D,C){return this._setAttr(B,D,C,true);},_getAttr:function(D){var E=this,I=D,F=E._state,G,B,H,C;if(D.indexOf(w)!==-1){G=D.split(w);D=G.shift();}if(E._tCfgs&&E._tCfgs[D]){C={};C[D]=E._tCfgs[D];delete E._tCfgs[D];E._addAttrs(C,E._tVals);}if(E._isLazyAttr(D)){E._addLazyAttr(D);}H=E._getStateVal(D);B=F.get(D,n);if(B&&!B.call){B=this[B];}H=(B)?B.call(E,H,I):H;H=(G)?k.getValue(H,G):H;return H;},_setAttr:function(D,G,B,E){var K=true,C=this._state,H=this._stateProxy,M=C.data,J,N,O,F,I,L;if(D.indexOf(w)!==-1){N=D;O=D.split(w);D=O.shift();}if(this._isLazyAttr(D)){this._addLazyAttr(D);}J=(!M.value||!(D in M.value));if(H&&D in H&&!this._state.get(D,j)){J=false;}if(this._requireAddAttr&&!this.attrAdded(D)){}else{I=C.get(D,x);L=C.get(D,b);if(!J&&!E){if(I){K=false;}if(C.get(D,o)){K=false;}}if(!L&&!E&&I===u){K=false;}if(K){if(!J){F=this.get(D);}if(O){G=k.setValue(c.clone(F),O,G);if(G===undefined){K=false;}}if(K){if(L){this._setAttrVal(D,N,F,G);}else{this._fireAttrChange(D,N,F,G,B);}}}}return this;},_fireAttrChange:function(H,G,E,D,B){var J=this,F=H+t,C=J._state,I;if(!C.get(H,v)){J.publish(F,{queuable:false,defaultTargetOnly:true,defaultFn:J._defAttrChangeFn,silent:true,broadcast:C.get(H,e)});C.add(H,v,true);}I=(B)?c.merge(B):J._ATTR_E_FACADE;I.attrName=H;I.subAttrName=G;I.prevVal=E;I.newVal=D;J.fire(F,I);},_defAttrChangeFn:function(B){if(!this._setAttrVal(B.attrName,B.subAttrName,B.prevVal,B.newVal)){B.stopImmediatePropagation();}else{B.newVal=this.get(B.attrName);}},_getStateVal:function(B){var C=this._stateProxy;return C&&(B in C)&&!this._state.get(B,j)?C[B]:this._state.get(B,h);},_setStateVal:function(B,D){var C=this._stateProxy;if(C&&(B in C)&&!this._state.get(B,j)){C[B]=D;}else{this._state.add(B,h,D);}},_setAttrVal:function(M,L,I,G){var O=this,J=true,D=O._state,E=D.get(M,A),H=D.get(M,m),K=D.get(M,b),N=this._getStateVal(M),C=L||M,F,B;if(E){if(!E.call){E=this[E];}if(E){B=E.call(O,G,C);if(!B&&K){G=D.get(M,s);B=true;}}}if(!E||B){if(H){if(!H.call){H=this[H];}if(H){F=H.call(O,G,C);if(F===g){J=false;}else{if(F!==undefined){G=F;}}}}if(J){if(!L&&(G===N)&&!f.isObject(G)){J=false;}else{if(D.get(M,i)===undefined){D.add(M,i,G);}O._setStateVal(M,G);}}}else{J=false;}return J;},setAttrs:function(B,C){return this._setAttrs(B,C);},_setAttrs:function(C,D){for(var B in C){if(C.hasOwnProperty(B)){this.set(B,C[B]);}}return this;},getAttrs:function(B){return this._getAttrs(B);},_getAttrs:function(E){var G=this,I={},F,C,B,H,D=(E===true);E=(E&&!D)?E:k.keys(G._state.data.added);for(F=0,C=E.length;F<C;F++){B=E[F];H=G.get(B);if(!D||G._getStateVal(B)!=G._state.get(B,i)){I[B]=G.get(B);}}return I;},addAttrs:function(B,C,D){var E=this;if(B){E._tCfgs=B;E._tVals=E._normAttrVals(C);E._addAttrs(B,E._tVals,D);E._tCfgs=E._tVals=null;}return E;},_addAttrs:function(C,D,E){var G=this,B,F,H;for(B in C){if(C.hasOwnProperty(B)){F=C[B];F.defaultValue=F.value;H=G._getAttrInitVal(B,F,G._tVals);if(H!==undefined){F.value=H;}if(G._tCfgs[B]){delete G._tCfgs[B];}G.addAttr(B,F,E);}}},_protectAttrs:function(C){if(C){C=c.merge(C);for(var B in C){if(C.hasOwnProperty(B)){C[B]=c.merge(C[B]);}}}return C;},_normAttrVals:function(B){return(B)?c.merge(B):null;},_getAttrInitVal:function(B,C,E){var F,D;if(!C[o]&&E&&E.hasOwnProperty(B)){F=E[B];}else{F=C[h];D=C[p];if(D){if(!D.call){D=this[D];}if(D){F=D.call(this);}}}return F;},_getAttrCfg:function(B){var D,C=this._state.data;if(C){D={};c.each(C,function(E,F){if(B){if(B in E){D[F]=E[B];}}else{c.each(E,function(H,G){D[G]=D[G]||{};D[G][F]=H;});}});}return D;}};c.mix(d,l,false,null,1);c.Attribute=d;},"3.3.0",{requires:["event-custom"]});YUI.add("attribute-complex",function(b){var a=b.Object,c=".";
b.Attribute.Complex=function(){};b.Attribute.Complex.prototype={_normAttrVals:function(g){var i={},h={},j,d,f,e;if(g){for(e in g){if(g.hasOwnProperty(e)){if(e.indexOf(c)!==-1){j=e.split(c);d=j.shift();f=h[d]=h[d]||[];f[f.length]={path:j,value:g[e]};}else{i[e]=g[e];}}}return{simple:i,complex:h};}else{return null;}},_getAttrInitVal:function(m,j,p){var e=j.value,o=j.valueFn,d,f,h,g,q,n,k;if(o){if(!o.call){o=this[o];}if(o){e=o.call(this);}}if(!j.readOnly&&p){d=p.simple;if(d&&d.hasOwnProperty(m)){e=d[m];}f=p.complex;if(f&&f.hasOwnProperty(m)){k=f[m];for(h=0,g=k.length;h<g;++h){q=k[h].path;n=k[h].value;a.setValue(e,q,n);}}}return e;}};b.mix(b.Attribute,b.Attribute.Complex,true,null,1);},"3.3.0",{requires:["attribute-base"]});YUI.add("attribute",function(a){},"3.3.0",{use:["attribute-base","attribute-complex"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.3.0
build: 3167
*/
YUI.add("base-pluginhost",function(c){var a=c.Base,b=c.Plugin.Host;c.mix(a,b,false,null,1);a.plug=b.plug;a.unplug=b.unplug;},"3.3.0",{requires:["base-base","pluginhost"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.3.0
build: 3167
*/
YUI.add("classnamemanager",function(C){var B="classNamePrefix",D="classNameDelimiter",A=C.config;A[B]=A[B]||"yui3";A[D]=A[D]||"-";C.ClassNameManager=function(){var E=A[B],F=A[D];return{getClassName:C.cached(function(){var G=C.Array(arguments);if(G[G.length-1]!==true){G.unshift(E);}else{G.pop();}return G.join(F);})};}();},"3.3.0");/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.3.0
build: 3167
*/
YUI.add("widget-base",function(b){var g=b.Lang,r=b.Node,e=b.ClassNameManager,w=e.getClassName,M,s=b.cached(function(L){return L.substring(0,1).toUpperCase()+L.substring(1);}),F="content",P="visible",K="hidden",y="disabled",B="focused",d="width",A="height",N="boundingBox",v="contentBox",k="parentNode",m="ownerDocument",x="auto",j="srcNode",I="body",H="tabIndex",q="id",i="render",J="rendered",n="destroyed",a="strings",o="<div></div>",z="Change",p="loading",E="_uiSet",D="",G=function(){},u=true,O=false,t,l={},f=[P,y,A,d,B],C=b.UA.webkit,h={};function c(Q){var T=this,L,S,R=T.constructor;T._strs={};T._cssPrefix=R.CSS_PREFIX||w(R.NAME.toLowerCase());c.superclass.constructor.apply(T,arguments);S=T.get(i);if(S){if(S!==u){L=S;}T.render(L);}}c.NAME="widget";t=c.UI_SRC="ui";c.ATTRS=l;l[q]={valueFn:"_guid",writeOnce:u};l[J]={value:O,readOnly:u};l[N]={value:null,setter:"_setBB",writeOnce:u};l[v]={valueFn:"_defaultCB",setter:"_setCB",writeOnce:u};l[H]={value:null,validator:"_validTabIndex"};l[B]={value:O,readOnly:u};l[y]={value:O};l[P]={value:u};l[A]={value:D};l[d]={value:D};l[a]={value:{},setter:"_strSetter",getter:"_strGetter"};l[i]={value:O,writeOnce:u};c.CSS_PREFIX=w(c.NAME.toLowerCase());c.getClassName=function(){return w.apply(e,[c.CSS_PREFIX].concat(b.Array(arguments),true));};M=c.getClassName;c.getByNode=function(L){var R,Q=M();L=r.one(L);if(L){L=L.ancestor("."+Q,true);if(L){R=h[b.stamp(L,u)];}}return R||null;};b.extend(c,b.Base,{getClassName:function(){return w.apply(e,[this._cssPrefix].concat(b.Array(arguments),true));},initializer:function(L){h[b.stamp(this.get(N))]=this;if(this._applyParser){this._applyParser(L);}},destructor:function(){var Q=this.get(N),L=this.get(v),R=b.stamp(Q,u);if(R in h){delete h[R];}if(this.UI_EVENTS){this._destroyUIEvents();}this._unbindUI(Q);if(L){L.remove(u);}Q.remove(u);},render:function(L){if(!this.get(n)&&!this.get(J)){this.publish(i,{queuable:O,fireOnce:u,defaultTargetOnly:u,defaultFn:this._defRenderFn});this.fire(i,{parentNode:(L)?r.one(L):null});}return this;},_defRenderFn:function(L){this._parentNode=L.parentNode;this.renderer();this._set(J,u);this._removeLoadingClassNames();},renderer:function(){var L=this;L._renderUI();L.renderUI();L._bindUI();L.bindUI();L._syncUI();L.syncUI();},bindUI:G,renderUI:G,syncUI:G,hide:function(){return this.set(P,O);},show:function(){return this.set(P,u);},focus:function(){return this._set(B,u);},blur:function(){return this._set(B,O);},enable:function(){return this.set(y,O);},disable:function(){return this.set(y,u);},_uiSizeCB:function(L){this.get(v).toggleClass(M(F,"expanded"),L);},_renderBox:function(L){var T=this,Q=T.get(v),R=T.get(N),V=T.get(j),S=T.DEF_PARENT_NODE,U=(V&&V.get(m))||R.get(m)||Q.get(m);if(V&&!V.compareTo(Q)&&!Q.inDoc(U)){V.replace(Q);}if(!R.compareTo(Q.get(k))&&!R.compareTo(Q)){if(Q.inDoc(U)){Q.replace(R);}R.appendChild(Q);}L=L||(S&&r.one(S));if(L){L.appendChild(R);}else{if(!R.inDoc(U)){r.one(I).insert(R,0);}}},_setBB:function(L){return this._setBox(this.get(q),L,this.BOUNDING_TEMPLATE);},_setCB:function(L){return(this.CONTENT_TEMPLATE===null)?this.get(N):this._setBox(null,L,this.CONTENT_TEMPLATE);},_defaultCB:function(L){return this.get(j)||null;},_setBox:function(R,Q,L){Q=r.one(Q)||r.create(L);if(!Q.get(q)){Q.set(q,R||b.guid());}return Q;},_renderUI:function(){this._renderBoxClassNames();this._renderBox(this._parentNode);},_renderBoxClassNames:function(){var S=this._getClasses(),L,Q=this.get(N),R;Q.addClass(M());for(R=S.length-3;R>=0;R--){L=S[R];Q.addClass(L.CSS_PREFIX||w(L.NAME.toLowerCase()));}this.get(v).addClass(this.getClassName(F));},_removeLoadingClassNames:function(){var R=this.get(N),L=this.get(v),Q=this.getClassName(p),S=M(p);R.removeClass(S).removeClass(Q);L.removeClass(S).removeClass(Q);},_bindUI:function(){this._bindAttrUI(this._UI_ATTRS.BIND);this._bindDOM();},_unbindUI:function(L){this._unbindDOM(L);},_bindDOM:function(){var L=this.get(N).get(m);this._hDocFocus=L.on("focus",this._onDocFocus,this);if(C){this._hDocMouseDown=L.on("mousedown",this._onDocMouseDown,this);}},_unbindDOM:function(L){if(this._hDocFocus){this._hDocFocus.detach();}if(C&&this._hDocMouseDown){this._hDocMouseDown.detach();}},_syncUI:function(){this._syncAttrUI(this._UI_ATTRS.SYNC);},_uiSetHeight:function(L){this._uiSetDim(A,L);this._uiSizeCB((L!==D&&L!==x));},_uiSetWidth:function(L){this._uiSetDim(d,L);},_uiSetDim:function(L,Q){this.get(N).setStyle(L,g.isNumber(Q)?Q+this.DEF_UNIT:Q);},_uiSetVisible:function(L){this.get(N).toggleClass(this.getClassName(K),!L);},_uiSetDisabled:function(L){this.get(N).toggleClass(this.getClassName(y),L);},_uiSetFocused:function(R,Q){var L=this.get(N);L.toggleClass(this.getClassName(B),R);if(Q!==t){if(R){L.focus();}else{L.blur();}}},_uiSetTabIndex:function(Q){var L=this.get(N);if(g.isNumber(Q)){L.set(H,Q);}else{L.removeAttribute(H);}},_onDocMouseDown:function(L){if(this._domFocus){this._onDocFocus(L);}},_onDocFocus:function(L){this._domFocus=this.get(N).contains(L.target);this._set(B,this._domFocus,{src:t});},toString:function(){return this.name+"["+this.get(q)+"]";},DEF_UNIT:"px",DEF_PARENT_NODE:null,CONTENT_TEMPLATE:o,BOUNDING_TEMPLATE:o,_guid:function(){return b.guid();},_validTabIndex:function(L){return(g.isNumber(L)||g.isNull(L));},_bindAttrUI:function(Q){var R,L=Q.length;for(R=0;R<L;R++){this.after(Q[R]+z,this._setAttrUI);}},_syncAttrUI:function(R){var S,Q=R.length,L;for(S=0;S<Q;S++){L=R[S];this[E+s(L)](this.get(L));}},_setAttrUI:function(L){this[E+s(L.attrName)](L.newVal,L.src);},_strSetter:function(L){return b.merge(this.get(a),L);},getString:function(L){return this.get(a)[L];},getStrings:function(){return this.get(a);},_UI_ATTRS:{BIND:f,SYNC:f.concat(H)}});b.Widget=c;},"3.3.0",{requires:["attribute","event-focus","base-base","base-pluginhost","node-base","node-style","node-event-delegate","classnamemanager"]});YUI.add("widget-uievents",function(g){var f="boundingBox",e=g.Widget,d="render",a=g.Lang,c=":",b=g.Widget._uievts=g.Widget._uievts||{};g.mix(e.prototype,{_destroyUIEvents:function(){var h=g.stamp(this,true);
g.each(b,function(j,i){if(j.instances[h]){delete j.instances[h];if(g.Object.isEmpty(j.instances)){j.handle.detach();if(b[i]){delete b[i];}}}});},UI_EVENTS:g.Node.DOM_EVENTS,_getUIEventNode:function(){return this.get(f);},_createUIEvent:function(i){var l=this._getUIEventNode(),h=(g.stamp(l)+i),k=b[h],j;if(!k){j=l.delegate(i,function(m){var n=e.getByNode(this);n.fire(m.type,{domEvent:m});},"."+g.Widget.getClassName());b[h]=k={instances:{},handle:j};}k.instances[g.stamp(this)]=1;},_getUIEvent:function(j){if(a.isString(j)){var k=this.parseType(j)[1],h,i;if(k){h=k.indexOf(c);if(h>-1){k=k.substring(h+c.length);}if(this.UI_EVENTS[k]){i=k;}}return i;}},_initUIEvent:function(i){var j=this._getUIEvent(i),h=this._uiEvtsInitQueue||{};if(j&&!h[j]){this._uiEvtsInitQueue=h[j]=1;this.after(d,function(){this._createUIEvent(j);delete this._uiEvtsInitQueue[j];});}},on:function(h){this._initUIEvent(h);return e.superclass.on.apply(this,arguments);},publish:function(i,h){var j=this._getUIEvent(i);if(j&&h&&h.defaultFn){this._initUIEvent(j);}return e.superclass.publish.apply(this,arguments);}},true);},"3.3.0",{requires:["widget-base","node-event-delegate"]});YUI.add("widget-htmlparser",function(f){var e=f.Widget,c=f.Node,d=f.Lang,a="srcNode",b="contentBox";e.HTML_PARSER={};e._buildCfg={aggregates:["HTML_PARSER"]};e.ATTRS[a]={value:null,setter:c.one,getter:"_getSrcNode",writeOnce:true};f.mix(e.prototype,{_getSrcNode:function(g){return g||this.get(b);},_applyParsedConfig:function(i,g,h){return(h)?f.mix(g,h,false):g;},_applyParser:function(g){var i=this,j=i.get(a),h=i._getHtmlParser(),l,k;if(h&&j){f.Object.each(h,function(n,m,p){k=null;if(d.isFunction(n)){k=n.call(i,j);}else{if(d.isArray(n)){k=j.all(n[0]);if(k.isEmpty()){k=null;}}else{k=j.one(n);}}if(k!==null&&k!==undefined){l=l||{};l[m]=k;}});}g=i._applyParsedConfig(j,g,l);},_getHtmlParser:function(){var h=this._getClasses(),k={},g,j;for(g=h.length-1;g>=0;g--){j=h[g].HTML_PARSER;if(j){f.mix(k,j,true);}}return k;}});},"3.3.0",{requires:["widget-base"]});YUI.add("widget-skin",function(e){var d="boundingBox",b="contentBox",a="skin",c=e.ClassNameManager.getClassName;e.Widget.prototype.getSkinName=function(){var f=this.get(b)||this.get(d),h=new RegExp("\\b"+c(a)+"-(\\S+)"),g;if(f){f.ancestor(function(i){g=i.get("className").match(h);return g;});}return(g)?g[1]:null;};},"3.3.0",{requires:["widget-base"]});YUI.add("widget",function(a){},"3.3.0",{use:["widget-base","widget-uievents","widget-htmlparser","widget-skin"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.3.0
build: 3167
*/
YUI.add("base-build",function(d){var b=d.Base,a=d.Lang,c;b._build=function(f,n,r,v,u,q){var w=b._build,g=w._ctor(n,q),k=w._cfg(n,q),t=w._mixCust,p=k.aggregates,e=k.custom,j=g._yuibuild.dynamic,o,m,h,s;if(j&&p){for(o=0,m=p.length;o<m;++o){h=p[o];if(n.hasOwnProperty(h)){g[h]=a.isArray(n[h])?[]:{};}}}for(o=0,m=r.length;o<m;o++){s=r[o];d.mix(g,s,true,null,1);t(g,s,p,e);g._yuibuild.exts.push(s);}if(v){d.mix(g.prototype,v,true);}if(u){d.mix(g,w._clean(u,p,e),true);t(g,u,p,e);}g.prototype.hasImpl=w._impl;if(j){g.NAME=f;g.prototype.constructor=g;}return g;};c=b._build;d.mix(c,{_mixCust:function(g,f,i,h){if(i){d.aggregate(g,f,true,i);}if(h){for(var e in h){if(h.hasOwnProperty(e)){h[e](e,g,f);}}}},_tmpl:function(e){function f(){f.superclass.constructor.apply(this,arguments);}d.extend(f,e);return f;},_impl:function(h){var n=this._getClasses(),m,f,e,k,o,g;for(m=0,f=n.length;m<f;m++){e=n[m];if(e._yuibuild){k=e._yuibuild.exts;o=k.length;for(g=0;g<o;g++){if(k[g]===h){return true;}}}}return false;},_ctor:function(e,f){var h=(f&&false===f.dynamic)?false:true,i=(h)?c._tmpl(e):e,g=i._yuibuild;if(!g){g=i._yuibuild={};}g.id=g.id||null;g.exts=g.exts||[];g.dynamic=h;return i;},_cfg:function(e,f){var g=[],j={},i,h=(f&&f.aggregates),l=(f&&f.custom),k=e;while(k&&k.prototype){i=k._buildCfg;if(i){if(i.aggregates){g=g.concat(i.aggregates);}if(i.custom){d.mix(j,i.custom,true);}}k=k.superclass?k.superclass.constructor:null;}if(h){g=g.concat(h);}if(l){d.mix(j,f.cfgBuild,true);}return{aggregates:g,custom:j};},_clean:function(m,k,g){var j,f,e,h=d.merge(m);for(j in g){if(h.hasOwnProperty(j)){delete h[j];}}for(f=0,e=k.length;f<e;f++){j=k[f];if(h.hasOwnProperty(j)){delete h[j];}}return h;}});b.build=function(g,e,h,f){return c(g,e,h,null,null,f);};b.create=function(e,h,g,f,i){return c(e,h,g,f,i);};b.mix=function(e,f){return c(null,e,f,null,null,{dynamic:false});};b._buildCfg={custom:{ATTRS:function(j,h,f){h.ATTRS=h.ATTRS||{};if(f.ATTRS){var g=f.ATTRS,i=h.ATTRS,e;for(e in g){if(g.hasOwnProperty(e)){i[e]=i[e]||{};d.mix(i[e],g[e],true);}}}}},aggregates:["_PLUG","_UNPLUG"]};},"3.3.0",{requires:["base-base"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.3.0
build: 3167
*/
YUI.add("widget-stdmod",function(b){var f=b.Lang,q=b.Node,x=b.UA,e=b.Widget,d="",J="hd",G="bd",j="ft",D="header",M="body",K="footer",N="fillHeight",m="stdmod",u="Node",I="Content",C="firstChild",h="childNodes",n="ownerDocument",v="contentBox",z="height",F="offsetHeight",y="auto",l="headerContentChange",B="bodyContentChange",o="footerContentChange",r="fillHeightChange",t="heightChange",O="contentUpdate",w="renderUI",E="bindUI",g="syncUI",H="_applyParsedConfig",s=b.Widget.UI_SRC;function P(L){this._stdModNode=this.get(v);b.before(this._renderUIStdMod,this,w);b.before(this._bindUIStdMod,this,E);b.before(this._syncUIStdMod,this,g);}P.HEADER=D;P.BODY=M;P.FOOTER=K;P.AFTER="after";P.BEFORE="before";P.REPLACE="replace";var k=P.HEADER,A=P.BODY,p=P.FOOTER,a=k+I,c=p+I,i=A+I;P.ATTRS={headerContent:{value:null},footerContent:{value:null},bodyContent:{value:null},fillHeight:{value:P.BODY,validator:function(L){return this._validateFillHeight(L);}}};P.HTML_PARSER={headerContent:function(L){return this._parseStdModHTML(k);},bodyContent:function(L){return this._parseStdModHTML(A);},footerContent:function(L){return this._parseStdModHTML(p);}};P.SECTION_CLASS_NAMES={header:e.getClassName(J),body:e.getClassName(G),footer:e.getClassName(j)};P.TEMPLATES={header:'<div class="'+P.SECTION_CLASS_NAMES[k]+'"></div>',body:'<div class="'+P.SECTION_CLASS_NAMES[A]+'"></div>',footer:'<div class="'+P.SECTION_CLASS_NAMES[p]+'"></div>'};P.prototype={_syncUIStdMod:function(){var L=this._stdModParsed;if(!L||!L[a]){this._uiSetStdMod(k,this.get(a));}if(!L||!L[i]){this._uiSetStdMod(A,this.get(i));}if(!L||!L[c]){this._uiSetStdMod(p,this.get(c));}this._uiSetFillHeight(this.get(N));},_renderUIStdMod:function(){this._stdModNode.addClass(e.getClassName(m));this._renderStdModSections();},_renderStdModSections:function(){if(f.isValue(this.get(a))){this._renderStdMod(k);}if(f.isValue(this.get(i))){this._renderStdMod(A);}if(f.isValue(this.get(c))){this._renderStdMod(p);}},_bindUIStdMod:function(){this.after(l,this._afterHeaderChange);this.after(B,this._afterBodyChange);this.after(o,this._afterFooterChange);this.after(r,this._afterFillHeightChange);this.after(t,this._fillHeight);this.after(O,this._fillHeight);},_afterHeaderChange:function(L){if(L.src!==s){this._uiSetStdMod(k,L.newVal,L.stdModPosition);}},_afterBodyChange:function(L){if(L.src!==s){this._uiSetStdMod(A,L.newVal,L.stdModPosition);}},_afterFooterChange:function(L){if(L.src!==s){this._uiSetStdMod(p,L.newVal,L.stdModPosition);}},_afterFillHeightChange:function(L){this._uiSetFillHeight(L.newVal);},_validateFillHeight:function(L){return !L||L==P.BODY||L==P.HEADER||L==P.FOOTER;},_uiSetFillHeight:function(R){var Q=this.getStdModNode(R);var L=this._currFillNode;if(L&&Q!==L){L.setStyle(z,d);}if(Q){this._currFillNode=Q;}this._fillHeight();},_fillHeight:function(){if(this.get(N)){var L=this.get(z);if(L!=d&&L!=y){this.fillHeight(this._currFillNode);}}},_uiSetStdMod:function(S,R,L){if(f.isValue(R)){var Q=this.getStdModNode(S)||this._renderStdMod(S);this._addStdModContent(Q,R,L);this.set(S+I,this._getStdModContent(S),{src:s});}else{this._eraseStdMod(S);}this.fire(O);},_renderStdMod:function(R){var L=this.get(v),Q=this._findStdModSection(R);if(!Q){Q=this._getStdModTemplate(R);}this._insertStdModSection(L,R,Q);this[R+u]=Q;return this[R+u];},_eraseStdMod:function(Q){var L=this.getStdModNode(Q);if(L){L.remove(true);delete this[Q+u];}},_insertStdModSection:function(L,S,R){var Q=L.get(C);if(S===p||!Q){L.appendChild(R);}else{if(S===k){L.insertBefore(R,Q);}else{var T=this[p+u];if(T){L.insertBefore(R,T);}else{L.appendChild(R);}}}},_getStdModTemplate:function(L){return q.create(P.TEMPLATES[L],this._stdModNode.get(n));},_addStdModContent:function(R,Q,L){switch(L){case P.BEFORE:L=0;break;case P.AFTER:L=undefined;break;default:L=P.REPLACE;}R.insert(Q,L);},_getPreciseHeight:function(R){var L=(R)?R.get(F):0,S="getBoundingClientRect";if(R&&R.hasMethod(S)){var Q=R.invoke(S);if(Q){L=Q.bottom-Q.top;}}return L;},_findStdModSection:function(L){return this.get(v).one("> ."+P.SECTION_CLASS_NAMES[L]);},_parseStdModHTML:function(Q){var L=this._findStdModSection(Q);if(L){if(!this._stdModParsed){this._stdModParsed={};b.before(this._applyStdModParsedConfig,this,H);}this._stdModParsed[Q+I]=1;return L.get("innerHTML");}return null;},_applyStdModParsedConfig:function(S,L,R){var Q=this._stdModParsed;if(Q){Q[a]=!(a in L)&&(a in Q);Q[i]=!(i in L)&&(i in Q);Q[c]=!(c in L)&&(c in Q);}},_getStdModContent:function(L){return(this[L+u])?this[L+u].get(h):null;},setStdModContent:function(R,Q,L){this.set(R+I,Q,{stdModPosition:L});},getStdModNode:function(L){return this[L+u]||null;},fillHeight:function(Q){if(Q){var V=this.get(v),W=[this.headerNode,this.bodyNode,this.footerNode],L,X,Y=0,T=0,S=false;for(var U=0,R=W.length;U<R;U++){L=W[U];if(L){if(L!==Q){Y+=this._getPreciseHeight(L);}else{S=true;}}}if(S){if(x.ie||x.opera){Q.set(F,0);}X=V.get(F)-parseInt(V.getComputedStyle("paddingTop"),10)-parseInt(V.getComputedStyle("paddingBottom"),10)-parseInt(V.getComputedStyle("borderBottomWidth"),10)-parseInt(V.getComputedStyle("borderTopWidth"),10);if(f.isNumber(X)){T=X-Y;if(T>=0){Q.set(F,T);}}}}}};b.WidgetStdMod=P;},"3.3.0",{requires:["base-build","widget"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.3.0
build: 3167
*/
YUI.add("widget-position",function(A){var I=A.Lang,L=A.Widget,N="xy",J="position",G="positioned",K="boundingBox",H="relative",M="renderUI",F="bindUI",D="syncUI",C=L.UI_SRC,E="xyChange";function B(O){this._posNode=this.get(K);A.after(this._renderUIPosition,this,M);A.after(this._syncUIPosition,this,D);A.after(this._bindUIPosition,this,F);}B.ATTRS={x:{setter:function(O){this._setX(O);},getter:function(){return this._getX();},lazyAdd:false},y:{setter:function(O){this._setY(O);},getter:function(){return this._getY();},lazyAdd:false},xy:{value:[0,0],validator:function(O){return this._validateXY(O);}}};B.POSITIONED_CLASS_NAME=L.getClassName(G);B.prototype={_renderUIPosition:function(){this._posNode.addClass(B.POSITIONED_CLASS_NAME);},_syncUIPosition:function(){var O=this._posNode;if(O.getStyle(J)===H){this.syncXY();}this._uiSetXY(this.get(N));},_bindUIPosition:function(){this.after(E,this._afterXYChange);},move:function(){var O=arguments,P=(I.isArray(O[0]))?O[0]:[O[0],O[1]];this.set(N,P);},syncXY:function(){this.set(N,this._posNode.getXY(),{src:C});},_validateXY:function(O){return(I.isArray(O)&&I.isNumber(O[0])&&I.isNumber(O[1]));},_setX:function(O){this.set(N,[O,this.get(N)[1]]);},_setY:function(O){this.set(N,[this.get(N)[0],O]);},_getX:function(){return this.get(N)[0];},_getY:function(){return this.get(N)[1];},_afterXYChange:function(O){if(O.src!=C){this._uiSetXY(O.newVal);}},_uiSetXY:function(O){this._posNode.setXY(O);}};A.WidgetPosition=B;},"3.3.0",{requires:["base-build","node-screen","widget"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.3.0
build: 3167
*/
YUI.add("widget-position-align",function(A){var H=A.Lang,D="align",F="bindUI",B="syncUI",E="offsetWidth",I="offsetHeight",K="viewportRegion",G="region",J="alignChange";function C(L){if(!this._posNode){A.error("WidgetPosition needs to be added to the Widget, before WidgetPositionAlign is added");}A.after(this._syncUIPosAlign,this,B);A.after(this._bindUIPosAlign,this,F);}C.ATTRS={align:{value:null},centered:{setter:"_setAlignCenter",lazyAdd:false,value:false}};C.TL="tl";C.TR="tr";C.BL="bl";C.BR="br";C.TC="tc";C.RC="rc";C.BC="bc";C.LC="lc";C.CC="cc";C.prototype={_syncUIPosAlign:function(){var L=this.get(D);if(L){this._uiSetAlign(L.node,L.points);}},_bindUIPosAlign:function(){this.after(J,this._afterAlignChange);},_setAlignCenter:function(L){if(L){this.set(D,{node:L===true?null:L,points:[C.CC,C.CC]});}return L;},_afterAlignChange:function(L){if(L.newVal){this._uiSetAlign(L.newVal.node,L.newVal.points);}},_uiSetAlign:function(O,N){if(!H.isArray(N)||N.length!=2){A.error("align: Invalid Points Arguments");return;}var M=this._getRegion(O),L,P,Q;if(M){L=N[0];P=N[1];switch(P){case C.TL:Q=[M.left,M.top];break;case C.TR:Q=[M.right,M.top];break;case C.BL:Q=[M.left,M.bottom];break;case C.BR:Q=[M.right,M.bottom];break;case C.TC:Q=[M.left+Math.floor(M.width/2),M.top];break;case C.BC:Q=[M.left+Math.floor(M.width/2),M.bottom];break;case C.LC:Q=[M.left,M.top+Math.floor(M.height/2)];break;case C.RC:Q=[M.right,M.top+Math.floor(M.height/2),L];break;case C.CC:Q=[M.left+Math.floor(M.width/2),M.top+Math.floor(M.height/2),L];break;default:break;}if(Q){this._doAlign(L,Q[0],Q[1]);}}},_doAlign:function(M,L,P){var O=this._posNode,N;switch(M){case C.TL:N=[L,P];break;case C.TR:N=[L-O.get(E),P];break;case C.BL:N=[L,P-O.get(I)];break;case C.BR:N=[L-O.get(E),P-O.get(I)];break;case C.TC:N=[L-(O.get(E)/2),P];break;case C.BC:N=[L-(O.get(E)/2),P-O.get(I)];break;case C.LC:N=[L,P-(O.get(I)/2)];break;case C.RC:N=[(L-O.get(E)),P-(O.get(I)/2)];break;case C.CC:N=[L-(O.get(E)/2),P-(O.get(I)/2)];break;default:break;}if(N){this.move(N);}},_getRegion:function(M){var L;if(!M){L=this._posNode.get(K);}else{M=A.Node.one(M);if(M){L=M.get(G);}}return L;},align:function(M,L){this.set(D,{node:M,points:L});},centered:function(L){this.align(L,[C.CC,C.CC]);}};A.WidgetPositionAlign=C;},"3.3.0",{requires:["widget-position"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.3.0
build: 3167
*/
YUI.add("widget-stack",function(E){var N=E.Lang,T=E.UA,d=E.Node,F=E.Widget,c="zIndex",P="shim",a="visible",e="boundingBox",W="renderUI",G="bindUI",S="syncUI",Q="offsetWidth",D="offsetHeight",M="parentNode",A="firstChild",X="ownerDocument",H="width",V="height",K="px",O="shimdeferred",f="shimresize",Z="visibleChange",C="widthChange",J="heightChange",b="shimChange",B="zIndexChange",I="contentUpdate",R="stacked";function U(L){this._stackNode=this.get(e);this._stackHandles={};E.after(this._renderUIStack,this,W);E.after(this._syncUIStack,this,S);E.after(this._bindUIStack,this,G);}U.ATTRS={shim:{value:(T.ie==6)},zIndex:{value:0,setter:function(L){return this._setZIndex(L);}}};U.HTML_PARSER={zIndex:function(L){return L.getStyle(c);}};U.SHIM_CLASS_NAME=F.getClassName(P);U.STACKED_CLASS_NAME=F.getClassName(R);U.SHIM_TEMPLATE='<iframe class="'+U.SHIM_CLASS_NAME+'" frameborder="0" title="Widget Stacking Shim" src="javascript:false" tabindex="-1" role="presentation"></iframe>';U.prototype={_syncUIStack:function(){this._uiSetShim(this.get(P));this._uiSetZIndex(this.get(c));},_bindUIStack:function(){this.after(b,this._afterShimChange);this.after(B,this._afterZIndexChange);},_renderUIStack:function(){this._stackNode.addClass(U.STACKED_CLASS_NAME);},_setZIndex:function(L){if(N.isString(L)){L=parseInt(L,10);}if(!N.isNumber(L)){L=0;}return L;},_afterShimChange:function(L){this._uiSetShim(L.newVal);},_afterZIndexChange:function(L){this._uiSetZIndex(L.newVal);},_uiSetZIndex:function(L){this._stackNode.setStyle(c,L);},_uiSetShim:function(L){if(L){if(this.get(a)){this._renderShim();}else{this._renderShimDeferred();}}else{this._destroyShim();}},_renderShimDeferred:function(){this._stackHandles[O]=this._stackHandles[O]||[];var Y=this._stackHandles[O],L=function(g){if(g.newVal){this._renderShim();}};Y.push(this.on(Z,L));},_addShimResizeHandlers:function(){this._stackHandles[f]=this._stackHandles[f]||[];var Y=this.sizeShim,L=this._stackHandles[f];this.sizeShim();L.push(this.after(Z,Y));L.push(this.after(C,Y));L.push(this.after(J,Y));L.push(this.after(I,Y));},_detachStackHandles:function(L){var Y=this._stackHandles[L],g;if(Y&&Y.length>0){while((g=Y.pop())){g.detach();}}},_renderShim:function(){var L=this._shimNode,Y=this._stackNode;if(!L){L=this._shimNode=this._getShimTemplate();Y.insertBefore(L,Y.get(A));if(T.ie==6){this._addShimResizeHandlers();}this._detachStackHandles(O);}},_destroyShim:function(){if(this._shimNode){this._shimNode.get(M).removeChild(this._shimNode);this._shimNode=null;this._detachStackHandles(O);this._detachStackHandles(f);}},sizeShim:function(){var Y=this._shimNode,L=this._stackNode;if(Y&&T.ie===6&&this.get(a)){Y.setStyle(H,L.get(Q)+K);Y.setStyle(V,L.get(D)+K);}},_getShimTemplate:function(){return d.create(U.SHIM_TEMPLATE,this._stackNode.get(X));}};E.WidgetStack=U;},"3.3.0",{requires:["base-build","widget"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.3.0
build: 3167
*/
YUI.add("widget-position-constrain",function(C){var F="constrain",D="constrain|xyChange",B="constrainChange",N="preventOverlap",E="align",O="",G="bindUI",I="xy",A="x",M="y",J=C.Node,P="viewportRegion",L="region",K;function H(Q){if(!this._posNode){C.error("WidgetPosition needs to be added to the Widget, before WidgetPositionConstrain is added");}C.after(this._bindUIPosConstrained,this,G);}H.ATTRS={constrain:{value:null,setter:"_setConstrain"},preventOverlap:{value:false}};K=H._PREVENT_OVERLAP={x:{"tltr":1,"blbr":1,"brbl":1,"trtl":1},y:{"trbr":1,"tlbl":1,"bltl":1,"brtr":1}};H.prototype={getConstrainedXY:function(T,S){S=S||this.get(F);var R=this._getRegion((S===true)?null:S),Q=this._posNode.get(L);return[this._constrain(T[0],A,Q,R),this._constrain(T[1],M,Q,R)];},constrain:function(U,R){var T,Q,S=R||this.get(F);if(S){T=U||this.get(I);Q=this.getConstrainedXY(T,S);if(Q[0]!==T[0]||Q[1]!==T[1]){this.set(I,Q,{constrained:true});}}},_setConstrain:function(Q){return(Q===true)?Q:J.one(Q);},_constrain:function(Q,R,Y,S){if(S){if(this.get(N)){Q=this._preventOverlap(Q,R,Y,S);}var V=(R==A),X=(V)?S.width:S.height,U=(V)?Y.width:Y.height,T=(V)?S.left:S.top,W=(V)?S.right-U:S.bottom-U;if(Q<T||Q>W){if(U<X){if(Q<T){Q=T;}else{if(Q>W){Q=W;}}}else{Q=T;}}}return Q;},_preventOverlap:function(R,S,b,T){var W=this.get(E),a=(S===A),Y,V,U,X,Z,Q;if(W&&W.points&&K[S][W.points.join(O)]){V=this._getRegion(W.node);if(V){Y=(a)?b.width:b.height;U=(a)?V.left:V.top;X=(a)?V.right:V.bottom;Z=(a)?V.left-T.left:V.top-T.top;Q=(a)?T.right-V.right:T.bottom-V.bottom;}if(R>U){if(Q<Y&&Z>Y){R=U-Y;}}else{if(Z<Y&&Q>Y){R=X;}}}return R;},_bindUIPosConstrained:function(){this.after(B,this._afterConstrainChange);this._enableConstraints(this.get(F));},_afterConstrainChange:function(Q){this._enableConstraints(Q.newVal);},_enableConstraints:function(Q){if(Q){this.constrain();this._cxyHandle=this._cxyHandle||this.on(D,this._constrainOnXYChange);}else{if(this._cxyHandle){this._cxyHandle.detach();this._cxyHandle=null;}}},_constrainOnXYChange:function(Q){if(!Q.constrained){Q.newVal=this.getConstrainedXY(Q.newVal);}},_getRegion:function(Q){var R;if(!Q){R=this._posNode.get(P);}else{Q=J.one(Q);if(Q){R=Q.get(L);}}return R;}};C.WidgetPositionConstrain=H;},"3.3.0",{requires:["widget-position"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.3.0
build: 3167
*/
YUI.add("overlay",function(A){A.Overlay=A.Base.create("overlay",A.Widget,[A.WidgetStdMod,A.WidgetPosition,A.WidgetStack,A.WidgetPositionAlign,A.WidgetPositionConstrain]);},"3.3.0",{requires:["widget","widget-stdmod","widget-position","widget-stack","widget-position-align","widget-position-constrain"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.3.0
build: 3167
*/
YUI.add("anim-base",function(B){var C="running",N="startTime",L="elapsedTime",J="start",I="tween",M="end",D="node",K="paused",O="reverse",H="iterationCount",A=Number;var F={},E;B.Anim=function(){B.Anim.superclass.constructor.apply(this,arguments);B.Anim._instances[B.stamp(this)]=this;};B.Anim.NAME="anim";B.Anim._instances={};B.Anim.RE_DEFAULT_UNIT=/^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i;B.Anim.DEFAULT_UNIT="px";B.Anim.DEFAULT_EASING=function(Q,P,S,R){return S*Q/R+P;};B.Anim._intervalTime=20;B.Anim.behaviors={left:{get:function(Q,P){return Q._getOffset(P);}}};B.Anim.behaviors.top=B.Anim.behaviors.left;B.Anim.DEFAULT_SETTER=function(S,T,V,W,Y,R,U,X){var Q=S._node,P=U(Y,A(V),A(W)-A(V),R);if(T in Q._node.style||T in B.DOM.CUSTOM_STYLES){X=X||"";Q.setStyle(T,P+X);}else{if(Q._node.attributes[T]){Q.setAttribute(T,P);}else{Q.set(T,P);}}};B.Anim.DEFAULT_GETTER=function(R,P){var Q=R._node,S="";if(P in Q._node.style||P in B.DOM.CUSTOM_STYLES){S=Q.getComputedStyle(P);}else{if(Q._node.attributes[P]){S=Q.getAttribute(P);}else{S=Q.get(P);}}return S;};B.Anim.ATTRS={node:{setter:function(P){P=B.one(P);this._node=P;if(!P){}return P;}},duration:{value:1},easing:{value:B.Anim.DEFAULT_EASING,setter:function(P){if(typeof P==="string"&&B.Easing){return B.Easing[P];}}},from:{},to:{},startTime:{value:0,readOnly:true},elapsedTime:{value:0,readOnly:true},running:{getter:function(){return !!F[B.stamp(this)];},value:false,readOnly:true},iterations:{value:1},iterationCount:{value:0,readOnly:true},direction:{value:"normal"},paused:{readOnly:true,value:false},reverse:{value:false}};B.Anim.run=function(){var Q=B.Anim._instances;for(var P in Q){if(Q[P].run){Q[P].run();}}};B.Anim.pause=function(){for(var P in F){if(F[P].pause){F[P].pause();}}B.Anim._stopTimer();};B.Anim.stop=function(){for(var P in F){if(F[P].stop){F[P].stop();}}B.Anim._stopTimer();};B.Anim._startTimer=function(){if(!E){E=setInterval(B.Anim._runFrame,B.Anim._intervalTime);}};B.Anim._stopTimer=function(){clearInterval(E);E=0;};B.Anim._runFrame=function(){var P=true;for(var Q in F){if(F[Q]._runFrame){P=false;F[Q]._runFrame();}}if(P){B.Anim._stopTimer();}};B.Anim.RE_UNITS=/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/;var G={run:function(){if(this.get(K)){this._resume();}else{if(!this.get(C)){this._start();}}return this;},pause:function(){if(this.get(C)){this._pause();}return this;},stop:function(P){if(this.get(C)||this.get(K)){this._end(P);}return this;},_added:false,_start:function(){this._set(N,new Date()-this.get(L));this._actualFrames=0;if(!this.get(K)){this._initAnimAttr();}F[B.stamp(this)]=this;B.Anim._startTimer();this.fire(J);},_pause:function(){this._set(N,null);this._set(K,true);delete F[B.stamp(this)];this.fire("pause");},_resume:function(){this._set(K,false);F[B.stamp(this)]=this;this._set(N,new Date()-this.get(L));B.Anim._startTimer();this.fire("resume");},_end:function(P){var Q=this.get("duration")*1000;if(P){this._runAttrs(Q,Q,this.get(O));}this._set(N,null);this._set(L,0);this._set(K,false);delete F[B.stamp(this)];this.fire(M,{elapsed:this.get(L)});},_runFrame:function(){var T=this._runtimeAttr.duration,R=new Date()-this.get(N),Q=this.get(O),P=(R>=T),S,U;this._runAttrs(R,T,Q);this._actualFrames+=1;this._set(L,R);this.fire(I);if(P){this._lastFrame();}},_runAttrs:function(Z,Y,V){var W=this._runtimeAttr,R=B.Anim.behaviors,X=W.easing,P=Y,T=false,Q,S,U;if(Z>=Y){T=true;}if(V){Z=Y-Z;P=0;}for(U in W){if(W[U].to){Q=W[U];S=(U in R&&"set" in R[U])?R[U].set:B.Anim.DEFAULT_SETTER;if(!T){S(this,U,Q.from,Q.to,Z,Y,X,Q.unit);}else{S(this,U,Q.from,Q.to,P,Y,X,Q.unit);}}}},_lastFrame:function(){var P=this.get("iterations"),Q=this.get(H);Q+=1;if(P==="infinite"||Q<P){if(this.get("direction")==="alternate"){this.set(O,!this.get(O));}this.fire("iteration");}else{Q=0;this._end();}this._set(N,new Date());this._set(H,Q);},_initAnimAttr:function(){var W=this.get("from")||{},V=this.get("to")||{},P={duration:this.get("duration")*1000,easing:this.get("easing")},R=B.Anim.behaviors,U=this.get(D),T,S,Q;B.each(V,function(a,Y){if(typeof a==="function"){a=a.call(this,U);}S=W[Y];if(S===undefined){S=(Y in R&&"get" in R[Y])?R[Y].get(this,Y):B.Anim.DEFAULT_GETTER(this,Y);}else{if(typeof S==="function"){S=S.call(this,U);}}var X=B.Anim.RE_UNITS.exec(S);var Z=B.Anim.RE_UNITS.exec(a);S=X?X[1]:S;Q=Z?Z[1]:a;T=Z?Z[2]:X?X[2]:"";if(!T&&B.Anim.RE_DEFAULT_UNIT.test(Y)){T=B.Anim.DEFAULT_UNIT;}if(!S||!Q){B.error('invalid "from" or "to" for "'+Y+'"',"Anim");return;}P[Y]={from:S,to:Q,unit:T};},this);this._runtimeAttr=P;},_getOffset:function(Q){var S=this._node,T=S.getComputedStyle(Q),R=(Q==="left")?"getX":"getY",U=(Q==="left")?"setX":"setY";if(T==="auto"){var P=S.getStyle("position");if(P==="absolute"||P==="fixed"){T=S[R]();S[U](T);}else{T=0;}}return T;},destructor:function(){delete B.Anim._instances[B.stamp(this)];}};B.extend(B.Anim,B.Base,G);},"3.3.0",{requires:["base-base","node-style"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.3.0
build: 3167
*/
YUI.add("anim-easing",function(B){var A={easeNone:function(D,C,F,E){return F*D/E+C;},easeIn:function(D,C,F,E){return F*(D/=E)*D+C;},easeOut:function(D,C,F,E){return -F*(D/=E)*(D-2)+C;},easeBoth:function(D,C,F,E){if((D/=E/2)<1){return F/2*D*D+C;}return -F/2*((--D)*(D-2)-1)+C;},easeInStrong:function(D,C,F,E){return F*(D/=E)*D*D*D+C;},easeOutStrong:function(D,C,F,E){return -F*((D=D/E-1)*D*D*D-1)+C;},easeBothStrong:function(D,C,F,E){if((D/=E/2)<1){return F/2*D*D*D*D+C;}return -F/2*((D-=2)*D*D*D-2)+C;},elasticIn:function(E,C,I,H,D,G){var F;if(E===0){return C;}if((E/=H)===1){return C+I;}if(!G){G=H*0.3;}if(!D||D<Math.abs(I)){D=I;F=G/4;}else{F=G/(2*Math.PI)*Math.asin(I/D);}return -(D*Math.pow(2,10*(E-=1))*Math.sin((E*H-F)*(2*Math.PI)/G))+C;},elasticOut:function(E,C,I,H,D,G){var F;if(E===0){return C;}if((E/=H)===1){return C+I;}if(!G){G=H*0.3;}if(!D||D<Math.abs(I)){D=I;F=G/4;}else{F=G/(2*Math.PI)*Math.asin(I/D);}return D*Math.pow(2,-10*E)*Math.sin((E*H-F)*(2*Math.PI)/G)+I+C;},elasticBoth:function(E,C,I,H,D,G){var F;if(E===0){return C;}if((E/=H/2)===2){return C+I;}if(!G){G=H*(0.3*1.5);}if(!D||D<Math.abs(I)){D=I;F=G/4;}else{F=G/(2*Math.PI)*Math.asin(I/D);}if(E<1){return -0.5*(D*Math.pow(2,10*(E-=1))*Math.sin((E*H-F)*(2*Math.PI)/G))+C;}return D*Math.pow(2,-10*(E-=1))*Math.sin((E*H-F)*(2*Math.PI)/G)*0.5+I+C;},backIn:function(D,C,G,F,E){if(E===undefined){E=1.70158;}if(D===F){D-=0.001;}return G*(D/=F)*D*((E+1)*D-E)+C;},backOut:function(D,C,G,F,E){if(typeof E==="undefined"){E=1.70158;}return G*((D=D/F-1)*D*((E+1)*D+E)+1)+C;},backBoth:function(D,C,G,F,E){if(typeof E==="undefined"){E=1.70158;}if((D/=F/2)<1){return G/2*(D*D*(((E*=(1.525))+1)*D-E))+C;}return G/2*((D-=2)*D*(((E*=(1.525))+1)*D+E)+2)+C;},bounceIn:function(D,C,F,E){return F-B.Easing.bounceOut(E-D,0,F,E)+C;},bounceOut:function(D,C,F,E){if((D/=E)<(1/2.75)){return F*(7.5625*D*D)+C;}else{if(D<(2/2.75)){return F*(7.5625*(D-=(1.5/2.75))*D+0.75)+C;}else{if(D<(2.5/2.75)){return F*(7.5625*(D-=(2.25/2.75))*D+0.9375)+C;}}}return F*(7.5625*(D-=(2.625/2.75))*D+0.984375)+C;},bounceBoth:function(D,C,F,E){if(D<E/2){return B.Easing.bounceIn(D*2,0,F,E)*0.5+C;}return B.Easing.bounceOut(D*2-E,0,F,E)*0.5+F*0.5+C;}};B.Easing=A;},"3.3.0",{requires:["anim-base"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.3.0
build: 3167
*/
YUI.add("cookie",function(C){var K=C.Lang,I=C.Object,G=null,D=K.isString,P=K.isObject,F=K.isUndefined,E=K.isFunction,H=encodeURIComponent,B=decodeURIComponent,N=C.config.doc;function J(L){throw new TypeError(L);}function M(L){if(!D(L)||L===""){J("Cookie name must be a non-empty string.");}}function A(L){if(!D(L)||L===""){J("Subcookie name must be a non-empty string.");}}C.Cookie={_createCookieString:function(Q,T,R,O){O=O||{};var V=H(Q)+"="+(R?H(T):T),L=O.expires,U=O.path,S=O.domain;if(P(O)){if(L instanceof Date){V+="; expires="+L.toUTCString();}if(D(U)&&U!==""){V+="; path="+U;}if(D(S)&&S!==""){V+="; domain="+S;}if(O.secure===true){V+="; secure";}}return V;},_createCookieHashString:function(L){if(!P(L)){J("Cookie._createCookieHashString(): Argument must be an object.");}var O=[];I.each(L,function(R,Q){if(!E(R)&&!F(R)){O.push(H(Q)+"="+H(String(R)));}});return O.join("&");},_parseCookieHash:function(S){var R=S.split("&"),T=G,Q={};if(S.length){for(var O=0,L=R.length;O<L;O++){T=R[O].split("=");Q[B(T[0])]=B(T[1]);}}return Q;},_parseCookieString:function(W,Y){var X={};if(D(W)&&W.length>0){var L=(Y===false?function(Z){return Z;}:B),U=W.split(/;\s/g),V=G,O=G,R=G;for(var Q=0,S=U.length;Q<S;Q++){R=U[Q].match(/([^=]+)=/i);if(R instanceof Array){try{V=B(R[1]);O=L(U[Q].substring(R[1].length+1));}catch(T){}}else{V=B(U[Q]);O="";}X[V]=O;}}return X;},_setDoc:function(L){N=L;},exists:function(L){M(L);var O=this._parseCookieString(N.cookie,true);return O.hasOwnProperty(L);},get:function(O,L){M(O);var S,Q,R;if(E(L)){R=L;L={};}else{if(P(L)){R=L.converter;}else{L={};}}S=this._parseCookieString(N.cookie,!L.raw);Q=S[O];if(F(Q)){return G;}if(!E(R)){return Q;}else{return R(Q);}},getSub:function(L,Q,O){var R=this.getSubs(L);if(R!==G){A(Q);if(F(R[Q])){return G;}if(!E(O)){return R[Q];}else{return O(R[Q]);}}else{return G;}},getSubs:function(L){M(L);var O=this._parseCookieString(N.cookie,false);if(D(O[L])){return this._parseCookieHash(O[L]);}return G;},remove:function(O,L){M(O);L=C.merge(L||{},{expires:new Date(0)});return this.set(O,"",L);},removeSub:function(O,S,L){M(O);A(S);L=L||{};var R=this.getSubs(O);if(P(R)&&R.hasOwnProperty(S)){delete R[S];if(!L.removeIfEmpty){return this.setSubs(O,R,L);}else{for(var Q in R){if(R.hasOwnProperty(Q)&&!E(R[Q])&&!F(R[Q])){return this.setSubs(O,R,L);}}return this.remove(O,L);}}else{return"";}},set:function(O,Q,L){M(O);if(F(Q)){J("Cookie.set(): Value cannot be undefined.");}L=L||{};var R=this._createCookieString(O,Q,!L.raw,L);N.cookie=R;return R;},setSub:function(O,R,Q,L){M(O);A(R);if(F(Q)){J("Cookie.setSub(): Subcookie value cannot be undefined.");}var S=this.getSubs(O);if(!P(S)){S={};}S[R]=Q;return this.setSubs(O,S,L);},setSubs:function(O,Q,L){M(O);if(!P(Q)){J("Cookie.setSubs(): Cookie value must be an object.");}var R=this._createCookieString(O,this._createCookieHashString(Q),false,L);N.cookie=R;return R;}};},"3.3.0",{requires:["yui-base"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.3.0
build: 3167
*/
YUI.add("intl",function(d){var b={},a="yuiRootLang",e="yuiActiveLang",c=[];d.mix(d.namespace("Intl"),{_mod:function(f){if(!b[f]){b[f]={};}return b[f];},setLang:function(g,j){var i=this._mod(g),f=i[e],h=!!i[j];if(h&&j!==f){i[e]=j;this.fire("intl:langChange",{module:g,prevVal:f,newVal:(j===a)?"":j});}return h;},getLang:function(f){var g=this._mod(f)[e];return(g===a)?"":g;},add:function(g,h,f){h=h||a;this._mod(g)[h]=f;this.setLang(g,h);},get:function(h,g,j){var f=this._mod(h),i;j=j||f[e];i=f[j]||{};return(g)?i[g]:d.merge(i);},getAvailableLangs:function(h){var f=d.Env._loader,g=f&&f.moduleInfo[h],i=g&&g.lang;return(i)?i.concat():c;}});d.augment(d.Intl,d.EventTarget);d.Intl.publish("intl:langChange",{emitFacade:true});},"3.3.0",{requires:["event-custom"]});
if(typeof YAHOO==='undefined'){YAHOO={};}
if(!YAHOO.ULT){YAHOO.ULT={};}
if(!YAHOO.ULT.BEACON){YAHOO.ULT.BEACON="http://geo.yahoo.com/t";}
if(!YAHOO.ULT.IMG){YAHOO.ULT.IMG=new Image();}
YAHOO.ULT.SRC_SPACEID_KEY='_S';YAHOO.ULT.DEST_SPACEID_KEY='_s';YAHOO.ULT.YLC_LIBSRC=2;YAHOO.ULT.CTRL_C='\x03';YAHOO.ULT.CTRL_D='\x04';YAHOO.ULT.BASE64_STR="ABCDEFGHIJKLMNOP"+"QRSTUVWXYZabcdef"+"ghijklmnopqrstuv"+"wxyz0123456789._-";(function(){YAHOO.ULT.track_click=function(u,p){if(!u||!p){return u;}
p._r=YAHOO.ULT.YLC_LIBSRC;var ks=[],i=0,k;for(k in p){var v=p[k];if(typeof(v)!=='string'){v=String(v);p[k]=v;}
if(k.length<1){return u;}
if(k.length>8){return u;}
if(k.indexOf(' ')!==-1){return u;}
if(YAHOO.ULT.has_ctrl_char(k)||YAHOO.ULT.has_ctrl_char(v)){return u;}
ks[i++]=k;}
ks=ks.sort();var f=[];for(i=0;i<ks.length;i++){f[i]=ks[i]+YAHOO.ULT.CTRL_C+p[ks[i]];}
f=f.join(YAHOO.ULT.CTRL_D);if(f.length<1||f.length>1024){return u;}
f=';_ylc='+YAHOO.ULT.encode64(f);i=u.indexOf('/*');if(i===-1){i=u.indexOf('/?');}
if(i===-1){i=u.indexOf('?');}
if(i===-1){return u+f;}else{return u.substr(0,i)+f+u.substr(i);}};YAHOO.ULT.beacon_click=function(p,i){if(!i){i=YAHOO.ULT.IMG;}
if(p){var url=YAHOO.ULT.track_click(YAHOO.ULT.BEACON,p);url+='?t='+Math.random();i.src=url;}
return true;};YAHOO.ULT.click_beacon=function(e,d,i){var el=e.target||e.srcElement;if(!i){i=YAHOO.ULT.IMG;}
if(d){var src=YAHOO.ULT.track_click(YAHOO.ULT.BEACON,d);src+='?t='+Math.random();var u=el.getAttribute('href',2);i.onerror=i.onload=function(){location=u;};YAHOO.util.Event.preventDefault(el);i.src=src;}};YAHOO.ULT.has_ctrl_char=function(s){var i=0;for(;i<s.length;i++){if(s.charCodeAt(i)<0x20){return true;}}
return false;};YAHOO.ULT.encode64=function(input){var output="";var chr1,chr2,chr3="";var enc1,enc2,enc3,enc4="";var i=0;do{chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64;}else if(isNaN(chr3)){enc4=64;}
output=output+
YAHOO.ULT.BASE64_STR.charAt(enc1)+
YAHOO.ULT.BASE64_STR.charAt(enc2)+
YAHOO.ULT.BASE64_STR.charAt(enc3)+
YAHOO.ULT.BASE64_STR.charAt(enc4);chr1=chr2=chr3="";enc1=enc2=enc3=enc4="";}while(i<input.length);return output;};}());/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.3.0
build: 3167
*/
YUI.add("plugin",function(b){function a(c){if(!(this.hasImpl&&this.hasImpl(b.Plugin.Base))){a.superclass.constructor.apply(this,arguments);}else{a.prototype.initializer.apply(this,arguments);}}a.ATTRS={host:{writeOnce:true}};a.NAME="plugin";a.NS="plugin";b.extend(a,b.Base,{_handles:null,initializer:function(c){this._handles=[];},destructor:function(){if(this._handles){for(var d=0,c=this._handles.length;d<c;d++){this._handles[d].detach();}}},doBefore:function(g,d,c){var e=this.get("host"),f;if(g in e){f=this.beforeHostMethod(g,d,c);}else{if(e.on){f=this.onHostEvent(g,d,c);}}return f;},doAfter:function(g,d,c){var e=this.get("host"),f;if(g in e){f=this.afterHostMethod(g,d,c);}else{if(e.after){f=this.afterHostEvent(g,d,c);}}return f;},onHostEvent:function(e,d,c){var f=this.get("host").on(e,d,c||this);this._handles.push(f);return f;},afterHostEvent:function(e,d,c){var f=this.get("host").after(e,d,c||this);this._handles.push(f);return f;},beforeHostMethod:function(f,d,c){var e=b.Do.before(d,this.get("host"),f,c||this);this._handles.push(e);return e;},afterHostMethod:function(f,d,c){var e=b.Do.after(d,this.get("host"),f,c||this);this._handles.push(e);return e;},toString:function(){return this.constructor.NAME+"["+this.constructor.NS+"]";}});b.namespace("Plugin").Base=a;},"3.3.0",{requires:["base-base"]});
/* socialchrome-friendlist.js 314644 */ YUI.add("media-socialchrome-friendlist",function(c){var a=c.config.win,b=c.Lang;function d(e){d.superclass.constructor.apply(this,arguments)}d.NAME="scfriendlist";d.ATTRS={srcNode:{value:c.one(".socialchrome-grid")},modId:{value:null},pageSize:{value:12},isPreLoad:{value:0},numFriends:{value:null},property:{value:null},friendIdList:{value:null},learnMorePath:{value:null},listType:{value:""}};d.HTML_PARSER={};d.MYNODE_TEMPLATE="";c.extend(d,c.Media.SocialChrome.Base,{CLASSNAMES:{pagemark:c.ClassNameManager.getClassName("scfriendlist","pagemark")},initializer:function(){this.publish("ysc_friends:start_sharing",{broadcast:2,emitFacade:true});this.publish("ysc_friends:names_ready",{broadcast:2,emitFacade:true});this.renderUI();this.bindUI()},renderUI:function(){var g=c.one("#"+this.get("modId")),f=g.one(".paginator"),e=g.one(".paginator .page"),k=g.one(".paginator .btn-prev-off"),n=g.one(".paginator .btn-next"),j=g.one(".paginator .icon-arrow-prev-2"),l=g.one(".paginator .icon-arrow-next-1"),m=g.one(".bd"),p=g.one(".yui3-scrollview-loading"),i=g.one(".yui3-scrollview-loading ul"),o=g.one(".msg-prompt"),h=this.get("pageSize");this._hd_pg=f;this._hd_pg_text=e;this._hd_pg_prev=k;this._hd_pg_next=n;this._hd_ic_prev=j;this._hd_ic_next=l;this._bd=m;this._bd_sv=p;this._bd_sv_ul=i;this._bd_msg=o;this.active_hover=true;this.hover_pause=500;this.page_index=0;this.CONF.set("numFriends",this.get("numFriends"));if(this.get("numFriends")===null){this.set("numFriends",0)}this.action_type=this.CONF.get("action_type");this.updateFriendPageUI();if(this.get("srcNode").hasClass("loading")){this.get("srcNode").removeClass("loading")}},bindUI:function(){c.after("scbase:fb_status_login",c.bind(this.syncUI,this),this);c.after("scbase:fb_status_logout",c.bind(this._renderLoggedOut,this),this);c.after("scbase:fb_auth_login",c.bind(this.syncUI,this),this);c.after("scbase:fb_auth_logout",c.bind(this._renderLoggedOut,this),this);c.after("scbase:fb_status_not_authorized",c.bind(this._renderLoggedOut,this),this);c.after("ysc_friends:names_ready",c.bind(this.replace_names,this));c.after("scbase:fb_status_timeout",function(f){if(this.get("isPreLoad")===1){this.syncUI()}else{this._renderLoggedOut()}},this);this.CONF.after("optin_statusChange",function(g){var h=g.prevVal,f=c.one("#"+this.get("modId"));if("true"===h){f.one("ul").replaceClass("waken","sleep")}else{f.one("ul").replaceClass("sleep","waken")}},this);this.bind_friendevents()},syncUI:function(){var h=null,e=(this.get("numFriends")===null)?0:this.get("numFriends"),f=this.get("pageSize"),g=c.one("#"+this.get("modId"));if(this._loading){this._renderLoading();return}if(this.get("isPreLoad")===0){this.get("srcNode").setStyle("display","block");this.loadFriends()}else{if(this.CONF.get("optin_status")=="true"){g.one("ul").replaceClass("sleep","waken")}else{g.one("ul").replaceClass("waken","sleep")}h=e>f-1?f*52:(e>0?(e+1)*52:5*52);this._bd_sv.setStyle("width",h+"px");this.loadProfileFace()}},loadProfileFace:function(){var k=this.get("friendIdList"),l=this.page_index*this.get("pageSize"),g=l+this.get("pageSize");if(typeof this._bd_sv_ul.getData("done")==="undefined"){this._bd_sv_ul.setData("done",0)}for(var e=l;e<k.length;e++){if(e>=g||this._bd_sv_ul.getData("done")>=this.page_index){break}var f=k[e],h=this._bd_sv_ul.one(".face-"+f),j="http://graph.facebook.com/"+f+"/picture";if(typeof h==="object"&&h.get("src")!==j){h.set("src",j)}}if(this._bd_sv_ul.getData("done")<this.page_index){this._bd_sv_ul.setData("done",this.page_index)}},_setMessageContent:function(e){var g=this;this._bd_msg.setContent(e);var f=this._bd_msg.one("a");if(f){f.on("click",function(i){i.preventDefault();var h={csrcpvid:g.CONF.get("csrcpvid"),_S:g.pagedata.spaceid,sec:"promo-lrn",itc:"0",slk:"more",ltxt:f.getContent()};window.location.href=g.get_track_link(f.get("href"),h)})}this.updateFriendPageUI()},_renderLoggedOut:function(){this.set("isPreLoad",0);this._setMessageContent(this.getTranslation(this.l10n.MSG_PROMPT_LOGIN,"",[this.get("property")])+' <a href="'+this.get("learnMorePath")+'">'+this.getTranslation(this.l10n.LINK_MORE)+"</a>");var g="s="+this.pagedata.spaceid+"&pstaid="+this.pagedata.cid+"&ntw=fb&cxid="+this.CONF.get("fbuid")+"&csrcpvid="+this.CONF.get("csrcpvid")+"&sec=promo-lrn";new Image().src=this.get_pageview_beacon_url(g);this._bd_sv_ul.setContent("").setStyle("left","0px");this._bd.removeClass("loggedin");this.get("contentBox").removeClass("loading");this._bd.addClass("loggedout");this._hd_pg.setStyle("display","none");var f=this._bd_sv||false;if(f){f.setStyle("width","auto")}var e=this.get("srcNode").one(".yom-socialchrome-mostshared");if(e){e.setContent("");e.setStyle("display","none")}},_renderLoading:function(){this._setMessageContent("");if(this._bd.hasClass("loggedout")){this._bd.removeClass("loggedout")}this._bd.addClass("loggedin");this.get("contentBox").addClass("loading")},_clearState:function(){this._loading=false},loadFriends:function(){var g=null,h="",e=0;if(this._loading){return}g=this.getSession();if(!g){this._clearState();return}this._loading=true;this._renderLoading();h="&user_id="+this.CONF.get("fbuid")+"&type=readactivity&limit=250";var f=function(i){var j=i;c.io(j.CONF.get("XHR").GET_FRIENDS+h,{on:{success:function(n,m){try{var l=c.JSON.parse(a.unescape(m.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,"")));l=l.info.http_code;if((l=="202")&&(e<2)){e++;a.setTimeout(function(o){f(o)},2000,j)}else{j._loadFriends_ioHandler_success(n,m)}}catch(k){j._renderFriends({data:{friends:[]}})}},failure:j._loadFriends_ioHandler_fail},context:j})};f(this)},_loadFriends_ioHandler_success:function(k,j){var h="",g={},f=null;if(!this._loading){this._loadFriends_ioHandler_fail(null,null)}this._loading=false;try{h=a.unescape(j.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,""));h=c.JSON.parse(h);if(h&&h.status&&h.data&&h.data.friends){this._renderFriends(h)}else{this._loadFriends_ioHandler_fail(null,null)}return}catch(i){this._loadFriends_ioHandler_fail(null,null)}this._clearState()},_loadFriends_ioHandler_fail:function(f,e){this._renderFriends({data:{friends:[]}});this._clearState()},_renderFriends:function(x){var n=this;if(this._bd.hasClass("loggedout")){return}var r=x.data.friends;for(var p=0,o=r.length;p<o;p++){if(r[p].ts<0){r=r.slice(0,p);break}}var q=r.length;var k=this.get("pageSize");this.set("numFriends",q);this.CONF.set("numFriends",q);if(location.href.indexOf("scf=")>-1){var e=parseInt(location.href.split("scf=")[1].split("&")[0]);q=(q>e)?e*1:q*1}var t=[],l="",f="";var w=function(i){f='<li class="js-thumb"><span class="invite"><a href="#" class="js-invite-thumb" title="'+n.getTranslation(n.l10n.INVITE_FRIENDS)+'" role="button" data=\'{"pos":"'+i+'"}\'><span class="action" role="button">'+n.getTranslation(n.l10n.INVITE_FRIENDS)+"</span></a></span></li>";return f};if(q>0){if(q>k){this._hd_pg.setStyle("display","block")}var h=[];for(p=0,o=q;p<o;p++){var g=r[p].fbid;var y=(this.page_index==0&&p<k)?"http://graph.facebook.com/"+g+"/picture":"http://l.yimg.com/os/mit/media/m/base/images/transparent-95031.png";var v="js-thumb "+((p%k===0)?this.CLASSNAMES.pagemark:"");t[t.length]='<li class="'+v+'"><span><a class="fb-'+g+'" href="#"><img width="50" height="50" src="'+y+'" class="face-'+g+'"/></a></span></li>';h[p]=g}this.set("friendIdList",h)}else{l='<li class="js-thumb btn-invite js-button"><div class="plate"><a href="#" class="ysc-btn-cta js-invite" role="button">'+this.getTranslation(this.l10n.INVITE_FRIENDS)+"</a></div></li>"}this._bd_sv_ul.setContent(t.join("")+w(q+1)+l);var m=q>k-1?k*52:(q>0?(q+1)*52:5*52);this._bd_sv.setStyle("width",m+"px");var u="wide",s=false;if(this.get("listType")==="videos"){if(q<5){u="wide";s=true}}else{if(q<7){u=(q>4)?"narrow":"wide";s=true}}if(s){new c.Media.SocialChrome.MostShared({moduleConf:YAHOO.Media.Facebook.ModuleConf,layout:u,listType:this.get("listType"),cid:this.pagedata.cid,spaceid:this.pagedata.spaceid,csrcpvid:this.CONF.get("csrcpvid")})}else{this.get("srcNode").all(".yom-socialchrome-mostshared").setStyle("display","none")}this.page_index=0;this.get("contentBox").removeClass("loading");this.updateFriendPageUI()},bind_friendevents:function(){var h=this;var g=function(j){var i=j.currentTarget;if(!i.hasClass("js-thumb")){return}j.halt();if(this.hovertimer){a.clearTimeout(this.hovertimer)}if(this.active_hover&&i.hasClass("active")){this.active_hover=false;return}this.active_hover=false;h.execute_list_click(i)};var e=function(m){var j=this.get("srcNode"),l=m.target,i,k;if(l.get("tagName").toLowerCase()!=="h3"){return}if(j.hasClass("ysc-toggle-on")){j.replaceClass("ysc-toggle-on","ysc-toggle-off");i="off";k="close"}else{j.replaceClass("ysc-toggle-off","ysc-toggle-on");i="on";k="open"}this.fire_click_beacon({csrcpvid:this.CONF.get("csrcpvid"),_S:this.pagedata.spaceid,sec:"fbar-actv",slk:"clps",itc:"1",ltxt:k});if(this.cptimer){a.clearTimeout(this.cptimer)}this.cptimer=a.setTimeout(function(){var p="/_xhr/socialchrome/set_cookie/",n=h.CONF.get("sc_crumb"),o="method=factcp&value="+i+"&crumb="+encodeURIComponent(n);c.io(p,{method:"POST",data:o,on:{success:function(r,q){},failure:function(r,q){}}})},3000)};if(!this.is_friendevents){this._bd_sv_ul.delegate("click",g,"li.js-thumb",this,true);if(this.hover_pause>0){this._bd_sv_ul.on("mouseover",this.handle_hover,this,{type:"thumb",state:true});this._bd_sv_ul.on("mouseout",this.handle_hover,this,{type:"thumb",state:false})}this.assign_hide_events("history",this.hideHistory,this);this.assign_hide_events("invite_panel",this.hide_invite_panel,this);var f=new c.Anim({node:this._bd_sv_ul,duration:0.5,easing:c.Easing.easeOut});this._hd_pg.on("click",c.bind(this.scrollPage,this));f.on("end",c.bind(this.updateFriendPageUI,this));this.page_anim=f;this.is_friendevents=true}},hideHistory:function(){if(this.xhr_activity&&this.xhr_activity.isInProgress()){this.xhr_activity.abort()}if(typeof this.selectedfid==="undefined"||!this.selectedfid){return}this.selectedfriend.removeClass("active");c.one("#ysc-history-"+this.selectedfid).removeClass("active");this.selectedfid=null;this.selectedfriend=null;this.friendlayer.hide();if(this.hover_pause>0){this.active_hover=true}},prepare_contentbox:function(){var s=c.one("#ysc-history-"+this.selectedfid);var B=c.one("#ysc-history-"+this.newlyselectedfid);var A=this,m=0,D=0,C=1,n,x=5,t,u,h,j,r,v,i,e,g;if(typeof this.caches==="undefined"){this.caches={}}var l=this.newlyselectedfid+"&type="+this.action_type+"&limit=5&show_deleted=0";var q="&space_id="+this.pagedata.spaceid+"&content_id="+this.pagedata.cid+"&network_source=fb&itc=0&section=fbar-actvmnu";if(!B){B=c.Node.create('<div id="ysc-history-'+this.newlyselectedfid+'" class="history-content"></div>');this.friendhistorybox.appendChild(B)}if(s){s.removeClass("active")}var y=(this.CONF.get("optin_status")==="true")?"on":"off";if(!B.hasClass("isloaded-"+y)){B.setContent("")}else{this.replace_names({fid:this.newlyselectedfid})}B.addClass("active");var o=function(F,M){B.all(".bd .err").remove(true);if(F.error_html){var E=B.one(".bd"),J=E.prepend(F.error_html).one(".err");m--;J.setStyles({width:E.getStyle("width"),height:E.getStyle("height")});J.on("click",function(Q){Q.halt();var P=Q.target;if(P.hasClass("js-retry")){J.addClass("err-loading");z(M)}if(P.hasClass("js-back")){J.remove(true)}});return}B.setContent(F.html);FB.api("/"+M.fid+"?fields=id,name",function(P){var Q=P.name.replace(/'/g,"&#39;");A.unames["uid_"+M.fid]=Q;A.fire("ysc_friends:names_ready",{fid:M.fid})});var K=M.page,I=M.fid;var L=function(R){R.preventDefault();if(A.CONF.get("optin_status")==="true"){A.hideHistory(R);A.run_lightweight(R)}else{return false}var Q=A.getUserData(R);if(R.currentTarget.get("parentNode").hasClass("name")){var P={csrcpvid:A.CONF.get("csrcpvid"),_S:A.pagedata.spaceid,sec:"fbar-actvmnu",slk:"user",itc:"1",axid:Q.userid};A.fire_click_beacon(P)}else{if(R.currentTarget.hasClass("thumb")){A.fire_click_beacon({csrcpvid:A.CONF.get("csrcpvid"),_S:A.pagedata.spaceid,sec:"fbar-actvmnu",slk:"thumb",itc:"1",axid:Q.userid})}}};var H=function(V){V.halt();A.active_hover=false;if(A.xhr_activity.id>=0&&A.xhr_activity.isInProgress()){return}var U=V.currentTarget,P=U.get("href").split("#")[1],Q=U.get("className").match(/(btn\-prev|btn\-next)\s*/)[1],R="";var T=c.one("#ysc-history-"+I+" .bd");switch(Q){case"btn-prev":m--;A.fire_click_beacon({csrcpvid:A.CONF.get("csrcpvid"),_S:A.pagedata.spaceid,sec:"fbar-actvmnu",slk:"btn",itc:"1",ltxt:"pr"});var S=l+P+q+"&template=friend_activity&render_optin_status="+A.CONF.get("optin_status")+"&render_pagesize="+x+"&render_pageindex="+m;z({fid:A.newlyselectedfid,step:"-1",uri:S,index:m});break;case"btn-next":m++;A.fire_click_beacon({csrcpvid:A.CONF.get("csrcpvid"),_S:A.pagedata.spaceid,sec:"fbar-actvmnu",slk:"btn",itc:"1",ltxt:"ne"});var S=l+P+q+"&template=friend_activity&render_optin_status="+A.CONF.get("optin_status")+"&render_pagesize="+x+"&render_pageindex="+m;z({fid:A.newlyselectedfid,step:"1",uri:S,index:m});break;default:break}};var N=c.one("#ysc-history-"+I+" .paginator");if(N){N.all("a.pager").on("click",H);N.all("a.selected").on("click",function(P){P.halt()})}if(!A.islayerevents){A.node_historylayer.delegate("click",L,".thumb,.name a");A.islayerevents=true}var O=(A.CONF.get("optin_status")==="true")?"off":"on";var G=(O==="off")?"on":"off";B.replaceClass("isloaded-"+O,"isloaded-"+G)};var z=function(G){var H=G.step,K=G.fid,J=G.uri,I=G.step;if((H===null)&&A.xhr_activity&&A.xhr_activity.isInProgress()){A.xhr_activity.abort()}var F="history_"+G.fid+"_"+G.index;var E=A.caches[F];if(typeof E!=="undefined"){o(E,G);return}A.xhr_activity=c.io(A.CONF.get("XHR").GET_ACTIVITY+J,{on:{success:function(O,N){var L=a.unescape(N.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,""));try{L=c.JSON.parse(L)}catch(M){A.log("invalid json data")}if(typeof L.error_html==="undefined"){A.caches["history_"+G.fid+"_"+G.index]=L}o(L,G)},failure:function(M,L){A.log("failure in fetching friend history. Please try again")}},context:A})};var f=function(E){};var p=function(H){var F=A.getTranslation(A.l10n.HEADER_SEE_FRIENDS_READING);var I='<div class="yom-mod cold-invite"><div class="hd"><h3>'+F+"</h3><p>"+A.getTranslation(A.l10n.MSG_INVITE_TO_JOIN,"",[A.get("property")])+'</p></div><div class="bd"><iframe src="http://www.facebook.com/plugins/facepile.php?app_id='+A.CONF.get("APP_ID")+'&max_rows=1" scrolling="no" frameborder="0" style="border:none; height:70px;overflow:hidden; width:500px;" allowTransparency="true"></iframe></div><div class="ft"><span class="btn-invite"><a href="#" class="js-invite ysc-btn-cta" role="button">'+A.getTranslation(A.l10n.INVITE_FRIENDS)+"</a></span></div>";B.setContent(I);FB.XFBML.parse(c.Node.getDOMNode(c.one("#ysc-history--1")));var J=(A.CONF.get("optin_status")==="true")?"off":"on";var E=(J==="off")?"on":"off";B.replaceClass("isloaded-"+J,"isloaded-"+E);var G=A.newlyselectedfriend.one(".js-invite-thumb").getAttribute("data");G=c.JSON.parse(G);A.fire_click_beacon({csrcpvid:A.CONF.get("csrcpvid"),_S:A.pagedata.spaceid,sec:"fbar-actv",slk:"sil",pos:G.pos,itc:"1"})};var w=(this.CONF.get("optin_status")==="true")?"on":"off";if(!B.hasClass("isloaded-"+w)&&this.newlyselectedfid){if(this.newlyselectedfriend.one(".js-invite-thumb")){p()}else{var k={fid:this.newlyselectedfid,step:null,uri:l+q+"&template=friend_activity&render_optin_status="+A.CONF.get("optin_status")+"&render_pagesize="+x+"&render_pageindex="+m,index:m};z(k)}}},prepare_overlay:function(e){if(!this.node_historylayer){this.node_historylayer=c.Node.create('<div class="yom-primary layer-sc-activity"></div>');c.one(document.body).appendChild(this.node_historylayer);if(this.hover_pause>0){this.node_historylayer.on("mouseover",this.handle_hover,this,{type:"overlay",state:true});this.node_historylayer.on("mouseout",this.handle_hover,this,{type:"overlay",state:false})}}if(!this.friendlayer){this.friendlayer=new c.Overlay({headerContent:'<div class="header-wrap"><div class="history-head"></div></div>',bodyContent:'<div class="content-wrap loading"></div>',width:"550px",zIndex:10000650});this.friendlayer.hide();this.friendlayer.render(this.node_historylayer);this.friendhistorybox=this.node_historylayer.one(".content-wrap");this.node_historylayer.on("click",function(g){g.stopPropagation();var f=g.target;if(f.get("id")==="ysc-btn-startsharing"){g.preventDefault();this.fire_click_beacon({csrcpvid:this.CONF.get("csrcpvid"),_S:this.pagedata.spaceid,sec:"fbar-actvmnu",slk:"btn",ltxt:"startsharing",itc:"1"});this.fire("ysc_friends:start_sharing");this.friendlayer.hide()}if(f.hasClass("js-invite")){g.preventDefault();this.fire_click_beacon({csrcpvid:this.CONF.get("csrcpvid"),_S:this.pagedata.spaceid,sec:"fbar-actvmnu",slk:"btn",ltxt:"invite",itc:"1"});this.display_invite_panel(this.get("property"),this.get("learnMorePath"));this.friendlayer.hide()}},this,true)}},handle_hover:function(l,n){var i=this,o=n.type,f=n.state,m=null,g=null,j=null,h=this.hover_pause;if(!this.active_hover){return}if(this.hovertimer){a.clearTimeout(this.hovertimer)}var k=function(){if(m){j=(m.one("a").get("className")).match(/fb-(.+)/)[1].split(" ")[0];if(i.selectedfid&&i.selectedfid===j){return}i.execute_list_click(m)}else{i.hideHistory()}};if(o==="thumb"){m=f?l.target:null;if(f&&m.get("tagName")==="IMG"&&m.ancestor("li.js-thumb")){m=m.ancestor("li.js-thumb")}else{m=null}}else{if(this.selectedfid){g=this.selectedfriend}m=f&&g?g:null}this.hovertimer=a.setTimeout(k,h,m)},execute_list_click:function(h){this.hide_other_layers("history");var k=h,m="-1";if(this.invitelayer){this.invitelayer.hide()}if(k.one(".js-invite")){this.fire_click_beacon({csrcpvid:this.CONF.get("csrcpvid"),_S:this.pagedata.spaceid,sec:"fbar-actv",slk:"btn",ltxt:"invite",itc:"1"});this.display_invite_panel(this.get("property"),this.get("learnMorePath"));return}if(!k.one("a").hasClass("js-invite-thumb")){m=(k.one("a").get("className")).match(/fb-(.+)/)[1].split(" ")[0]}this.prepare_overlay();var f,g,p=k.get("parentNode").get("children"),e=p.size();if(k.one("span.invite")){f={pos:e,_S:this.pagedata.spaceid,ltc:"1",sec:"fbar-actv",slk:"sil",csrcpvid:this.CONF.get("csrcpvid")}}else{for(g=0;g<e;g++){if(p.item(g)===k){break}}f={pos:g+1,_S:this.pagedata.spaceid,ltc:"1",sec:"fbar-actv",slk:"thumb",axid:k.one("a").get("className").substring(3),csrcpvid:this.CONF.get("csrcpvid")}}if(this.selecedfriend===null||this.selectedfid!==m){this.fire_click_beacon(f)}if(this.selectedfid){this.selectedfriend.removeClass("active");if(this.selectedfid&&this.selectedfid===m){this.hideHistory();return}}this.newlyselectedfid=m;this.newlyselectedfriend=k;this.newlyselectedfriend.addClass("active");var q=[k.getX()-25,(k.getY())+52],l=this._bd.get("region"),j="",o=this.node_historylayer.one(".header-wrap");if(YUI.namespace("Media").LANGDIR=="rtl"){if(q[0]+550>l.right+25){j=l.right-525}else{j=q[0]}this.friendlayer.move([j,(k.getY())+50]);o.setXY([(k.getX())-20,(k.getY())-10])}else{if(q[0]+550>l.right+25){j=l.right-525;if(j<l.left-25){j=l.left-25}}else{j=q[0]}this.friendlayer.move([j,(k.getY())+50]);o.setXY([(k.getX())-20,(k.getY())-20])}this.friendlayer.show();if(this.newlyselectedfid){this.prepare_contentbox();this.selectedfid=this.newlyselectedfid;this.selectedfriend=this.newlyselectedfriend}else{this.selectedfid=null;this.selectedfriend=null}},scrollPage:function(j){if(this.in_scroll){return}var i=j.target,f=this.page_index,g=this.get("pageSize"),h=this.page_anim,k=0;if(i.hasClass("btn-next")){this.fire_click_beacon({csrcpvid:this.CONF.get("csrcpvid"),_S:this.pagedata.spaceid,sec:"fbar-actv",slk:"btn",itc:"1",ltxt:"ne"});f=f+1}else{if(i.hasClass("btn-prev")){this.fire_click_beacon({csrcpvid:this.CONF.get("csrcpvid"),_S:this.pagedata.spaceid,sec:"fbar-actv",slk:"btn",itc:"1",ltxt:"pr"});f=f-1}else{return}}k=0-(f*52*g);this.page_index=f;if(YUI.namespace("Media").LANGDIR=="rtl"){k=k*-1}if(c.UA.ie>0){this._bd_sv_ul.setStyle("left",k+"px")}else{this.page_anim.set("to",{left:k+"px"})}this.loadProfileFace();this.in_scroll=true;this.page_anim.run()},updateFriendPageUI:function(){var f=this.get("pageSize"),e=this.get("numFriends"),g=Math.ceil(e/f);shown_total=(this.total_page>this.page_index+1)?f:e%f;data={index_page:this.page_index,total_page:g,total_count:e,shown_total:shown_total,page_text:this._hd_pg_text,page_prev:this._hd_pg_prev,page_next:this._hd_pg_next,icon_prev:this._hd_ic_prev,icon_next:this._hd_ic_next,page_size:f,range_all:true};this.update_page_ui(data);this.in_scroll=false},replace_names:function(k){var l=k.fid;if(l==="-1"){return}var j=c.one("#ysc-history-"+l),h=j.one(".hd .name a"),g=j.one(".hd img"),i=c.JSON.parse(h.getAttribute("data")),f=this.unames["uid_"+l];if(f!==undefined){h.setContent(f);g.setAttribute("title",f);i.username=f;h.setAttribute("data",c.JSON.stringify(i));g.setAttribute("data",c.JSON.stringify(i));h.setContent(f);j.all(".call-name").setContent(f)}}});c.namespace("Media.SocialChrome").Friendlist=d},"0.1",{requires:["node","event","event-custom","io-base","io-xdr","json","anim-base","anim-easing","overlay","gallery-overlay-extras","media-ylc","media-socialchrome-base","cookie","intl"]});
/* socialchrome-mostshared.js 314644 */ YUI.add("media-socialchrome-mostshared",function(c){var a=c.config.win;function b(d){b.superclass.constructor.apply(this,arguments)}b.NAME="MostShared";b.ATTRS={srcNode:{value:c.one(".yom-socialchrome-mostshared")},isPreLoad:{value:null},layout:{value:""},csrcpvid:{value:""},spaceid:{value:""},cid:{value:""},listType:{value:"articles"}};b.HTML_PARSER={};b.MYNODE_TEMPLATE="";c.extend(b,c.Media.SocialChrome.Base,{initializer:function(){if(this.get("isPreLoad")){c.after("scbase:fb_status_login",c.bind(this.fetchContent,this),this)}else{this.fetchContent()}},fetchContent:function(){var d=this.get("srcNode").getAttribute("data")+"&list_type="+this.get("listType")+"&layout="+this.get("layout")+"&cid="+this.get("cid")+"&spaceid="+this.get("spaceid")+"&csrcpvid="+this.get("csrcpvid");c.io("/_xhr/most-shared/",{method:"POST",data:d,on:{success:function(g,e){if(this.get("srcNode").get("parentNode").one(".loggedout")){return}var f=a.unescape(e.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,""));this.get("srcNode").setContent(f);this.updateUI()},failure:function(f,e){c.log("error in fetching Most Shared")}},context:this})},updateUI:function(){var d=this.get("srcNode"),f=0,e=d.all("li").size();this.list=d.one("ul");f=(this.get("layout")==="wide")?350:245;if(this.list){this.list.addClass(this.get("layout"));this.list.setStyle("width",f*e)}d.setStyle("width",f);d.setStyle("display","block");this.module_width=f;this.bind_events()},on_page_click:function(i){if(this.in_scroll){return}var h=i.target,d=this.page_index,g=this.page_anim,k=this.module_width-13,j=0;if(!h.hasClass("btn-prev")&&!h.hasClass("btn-next")){return}var f={csrcpvid:this.get("csrcpvid"),_S:this.get("spaceid"),sec:"fbar-fea",slk:"btn",ltxt:null,itc:1};if(h.hasClass("btn-prev")){d--;f.ltxt="pr"}else{if(h.hasClass("btn-next")){d++;f.ltxt="ne"}}j=0-d*k;if(YUI.namespace("Media").LANGDIR=="rtl"){j=j*-1}if(c.UA.ie>0){j=0-d*(k+3);if(YUI.namespace("Media").LANGDIR=="rtl"){j=j*-1}this.list.setStyle("left",j+"px")}else{g.set("to",{left:j+"px"})}this.page_index=d;this.in_scroll=true;g.run();this.fire_click_beacon(f)},update_page:function(){var e=this.page_index,d=this.total,g=e>0,f=e<d-1;if(g){this.pg_prev.removeClass("selected").replaceClass("btn-prev-off","btn-prev");this.icon_p.replaceClass("btn-prev-off","btn-prev").replaceClass("icon-arrow-prev-2","icon-arrow-prev-1")}else{this.pg_prev.addClass("selected").replaceClass("btn-prev","btn-prev-off");this.icon_p.replaceClass("btn-prev","btn-prev-off").replaceClass("icon-arrow-prev-1","icon-arrow-prev-2")}if(f){this.pg_next.removeClass("selected").replaceClass("btn-next-off","btn-next");this.icon_n.replaceClass("btn-next-off","btn-next").replaceClass("icon-arrow-next-2","icon-arrow-next-1")}else{this.pg_next.addClass("selected").replaceClass("btn-next","btn-next-off");this.icon_n.replaceClass("btn-next","btn-next-off").replaceClass("icon-arrow-next-1","icon-arrow-next-2")}this.page.setContent((e+1)+" / "+d);this.in_scroll=false},bind_events:function(){var d=this.get("srcNode");this.pg_next=d.one(".btn-next");this.pg_prev=d.one(".btn-prev");this.page=d.one(".page");this.total=(d.all("li")).size();this.icon_p=d.one(".icon-arrow-prev-2");this.icon_n=d.one(".icon-arrow-next-1");if(this.total>1){var f=d.one(".paginator");f.setStyle("display","block");var e=new c.Anim({node:this.list,duration:0.5,easing:c.Easing.easeOut});this.page_index=0;this.page_anim=e;f.on("click",c.bind(this.on_page_click,this));e.on("end",c.bind(this.update_page,this));this.update_page()}}});c.namespace("Media.SocialChrome").MostShared=b},"0.1",{requires:["node","event","event-custom","io-base","io-xdr","json","anim-base","anim-easing","gallery-overlay-extras","media-ylc","media-socialchrome-base","cookie","intl"]});
/* socialchrome-login.js 315033 */ YUI.add("media-socialchrome-login",function(d){var b=d.Lang,a=d.config.win;function c(e){c.superclass.constructor.apply(this,arguments)}c.NAME="Login";c.ATTRS={isPreLoad:{value:0},modId:{value:""},property:{value:""},learnMorePath:{value:""},helpPath:{value:""},truncateLength:{value:""},generalLength:{value:""},ratingLength:{value:""},videoLength:{value:""}};c.MYNODE_TEMPLATE="";c.HTML_PARSER={};d.extend(c,d.Media.SocialChrome.Base,{initializer:function(){var f=this,e=0;this.isInitFBSession=false;this.action_type=this.CONF.get("action_type");d.publish("ysc_login:logout_facebook",{broadcast:2,emitFacade:true});d.publish("ysc_sharing:status_changed",{broadcast:2,emitFacade:true});this.register_nodes();d.after("ysc_friends:start_sharing",function(g){this.start_sharing()},this);d.after("scbase:fb_auth_login",d.bind(this.fb_auth_login,this),this);d.after("scbase:fb_status_login",function(g){if(f.isInitFBSession){return}if(f.get("isPreLoad")=="0"){f.fb_auth_login({response:f.getSession()})}else{f.status_changed();f.render_login()}},this);d.after("scbase:fb_auth_logout",d.bind(this.fb_auth_logout,this),this);d.after("scbase:fb_status_logout",function(g){this.render_logout();this.toplist_fetched=false;this.self_data=null;this.newsfeedlist=null;this.newsfeed_data=null},this);d.after("scbase:fb_status_not_authorized",function(g){this.render_logout();this.toplist_fetched=false;this.self_data=null;this.newsfeedlist=null;this.newsfeed_data=null},this);d.after("scbase:fb_status_timeout",function(g){if(f.get("isPreLoad")==1){this.render_login()}else{this.render_logout()}},this)},show_status:function(j,g){var k=this,i,e=g||"pageload",h,f;if(j=="on"){this.status_now.setContent(this.getTranslation(this.l10n.READ_ON));this.status_next.setContent(this.getTranslation(this.l10n.READ_OFF));this.activity_reading.setAttribute("value","true");this.share_light.removeClass("rlight");this.share_light.addClass("glight");this.CONF.set("optin_status","true")}else{this.status_now.setContent(this.getTranslation(this.l10n.READ_OFF));this.status_next.setContent(this.getTranslation(this.l10n.READ_ON));this.activity_reading.setAttribute("value","false");this.share_light.removeClass("glight");this.share_light.addClass("rlight");this.CONF.set("optin_status","false")}i=d.Cookie.get("ysc_nt");if(e==="pageload"&&i){return}this.activity_reading.set("className","activity_reading");h=(j==="on")?"sharing-on":"sharing-off";this.activity_reading.addClass(h);setTimeout(function(){k.activity_reading.addClass("status-transition")},100);if(e==="pageload"){f=new Date();d.Cookie.set("ysc_nt","1",{path:"/",domain:window.location.hostname,expires:new Date(f.getTime()+1000*60*60*3)})}},render_login:function(){var j=this;if(!this.mod_login){this.log("social chrome login doesnt exist");return}this.isInitFBSession=true;this.mod_login.removeClass("loading");if(this.CONF.get("optin_status")==="false"){this.show_status("off")}else{this.show_status("on")}var o="f",m=0;if(this.CONF.get("optin_status")==="false"){o="p"}if(this.CONF.get("conv")==1){m=1;o="f"}if(o=="p"||!this.CONF.get("signed_idp")){this.track_ywa("06",[18,"Activity Bar"],[10,"Partial"],0)}else{this.track_ywa("06",[18,"Activity Bar"],[10,"Full"],0)}var n="-1",g=0,f="";var h=this.get_query_variable("fb_ref");if(h!==""){g=1;h=this.parse_fbref(h);if("type" in h){if(h.type=="invite"){f="inv"}}if("user" in h){if(h.user!==""){n=h.user}}}else{var k=this.get_query_variable("fb_action_types"),l=this.get_query_variable("fb_action_ids");if(k=="news.reads"&&l!==""){n=l;f=k;g=1}}var e=this.CONF.get("numFriends");if(typeof e==="undefined"){e=null}var i="s="+this.pagedata.spaceid+"&conv="+m+"&ref="+g+"&frC="+e+"&pstaid="+this.pagedata.cid+"&ue="+o+"&ntw=fb&intl="+this.CONF.get("intl")+"&cxid="+this.CONF.get("fbuid")+"&axid="+n+"&csrcpvid="+this.CONF.get("csrcpvid")+"&act=sc-pv&srcact="+f;new Image().src=this.get_pageview_beacon_url(i);if(this.get("isPreLoad")!=1){FB.api("/me?fields=name,id,third_party_id",function(p){var q=p.name.replace(/'/g,"&#39;");j.user_name.setContent(q.substring(0,27));j.unames["uid_"+j.CONF.get("fbuid")]=q;j.CONF.set("tid",p.third_party_id);j.user_img.setContent('<img height="50" width="50" src="http://graph.facebook.com/'+p.id+'/picture" data=\'{"username":"'+q+'","userid":"'+p.id+'"}\'><div class="fb_icon" data=\'{"username":"'+q+'","userid":"'+p.id+"\"}'></div>");j.log_desc.setContent(j.getTranslation(j.l10n.STATUS_DESC));j.fb_login.setStyle("display","none");j.func_bar.setStyle("display","inline-block");j.mod_login.setStyle("display","block");j.mod_login.removeClass("socialchrome-logout")})}else{this.unames["uid_"+this.CONF.get("fbuid")]=this.user_name.getContent()}this.user_img.removeClass("img_logout");this.user_img.delegate("click",function(r){var q=j.getUserData(r),p=({csrcpvid:j.CONF.get("csrcpvid"),_S:j.pagedata.spaceid,sec:"idi",itc:"1",slk:"thumb",axid:q.userid});j.fire_click_beacon(p)},"img");this.func_bar.detachAll();this.bind_loginbarevents();if(this.CONF.get("initact")=="on"||this.CONF.get("initact")=="off"){if(this.CONF.get("signed_idp")&&this.CONF.get("initact")!=this.CONF.get("optin_status")){this.start_sharing()}}},render_logout:function(){var f=this,e=d.one("#fb_login")||false;this.CONF.set("NEWS_FEED","");this.show_status("off");this.isInitFBSession=false;this.run_loginstyle();this.mod_login.removeClass("loading");this.mod_login.addClass("socialchrome-logout");(this.status_now).removeClass("enable_focus");if(this.mod_login.getStyle("display")=="block"){this.track_ywa("04",[18,"Detailed-Login"],0)}if(e){FB.XFBML.parse(d.Node.getDOMNode(e.get("parentNode")))}},idp_check:function(h){var k=this,i,f,g,j,e;if(h=="optin"){i="";if(this.activity_reading.getAttribute("value")=="true"){i="sc_optin=off"}else{i="sc_optin=on"}f=this.CONF.get("signin_url").split("&");for(g in f){if(f[g].substr(0,5)==".done"&&f[g].indexOf("sc_optin")<0){if(f[g].indexOf("%3F")>0){f[g]+=encodeURIComponent("&"+i)}else{f[g]+=encodeURIComponent("?"+i)}}}this.CONF.set("signin_url",f.join("&"))}j=this.CONF.get("yahoo_id")==""?575:725;e="left="+(window.screen.width-800)/2+",top="+(window.screen.height-j)/2;window.open(this.CONF.get("signin_url")+"&so=0&perms=user_birthday,user_likes,email,publish_actions","membershipwindow","toolbar=no,statusbar=no,location=no,scrollbars=yes,resizable=yes,width=800,height="+j+", "+e)},start_sharing:function(){if(!this.CONF.get("signed_idp")){this.idp_check("optin")}else{this.status_click()}},status_click:function(){var h=this,g,f,e;if(this.activity_reading.getAttribute("value")=="true"){g={optin_status:"false"}}else{g={optin_status:"true"}}if(!this.CONF.get("signed_idp")){this.idp_check("optin");return}f=this.CONF.get("fbuid");e=d.io(this.CONF.get("XHR").SET_USER,{on:{success:function(l,k){var j=unescape(k.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,""));if(j!==""){var i=d.JSON.parse(j);if(i.status===false&&!d.Lang.isUndefined(i.info)&&d.Lang.isValue(i.info.status)){if(i.info.status=="406"){h.idp_check("optin")}}else{if(i.status===true){if(h.activity_reading.getAttribute("value")=="true"){h.show_status("off","click")}else{h.show_status("on","click")}}}h.status_changed()}},failure:function(l,k){var j=unescape(k.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,"")),i=d.JSON.parse(j)}},method:"POST",data:d.JSON.stringify(g)})},render_toplist:function(){var i=this,h,m={},f={},l={},e=[],g,j,k;if(!this.mod_toplist){this.log("sectionlist module not init");return}h=this.mod_toplist.one(".bd");if(this.toplist_fetched===true){if(h.one(".ysc-active")){if(this.CONF.get("optin_status")==="true"){h.replaceClass("ysc-hide","ysc-show")}else{h.replaceClass("ysc-show","ysc-hide")}}return}if(this.CONF.get("optin_status")!=="true"){return}g=this.CONF.get("fbuid");if(this.mod_toplist.hasClass("ysc")){j=this.mod_toplist.all(".ysc-item");j.each(function(o,n){e[e.length]=o.getAttribute("data-uuid")})}if(e.length===0){this.log("sectionlist uuids N/A");return}k={fn:"toplist",user_id:g,uuids:e,cuuid:this.pagedata.cid,mid:"MediaMostPopular",section:"most_popular",network_source:"fb",space_id:this.pagedata.spaceid};this.publish("ysc_toplist:names_ready",{emitFacade:true,broadcast:2});this.fetch_friends_batch_story(k)},fetch_friends_batch_story:function(j){var h=this,l={},g={},i={},m,k,f,e=0;m=(j.fn==="article")?"":"&space_id="+j.space_id+"&section="+j.section+"&mid="+j.mid+"&network_source="+j.network_source+"&cuuid="+j.cuuid;k="&user_id="+j.user_id+"&type=readactivity&content_id="+j.uuids.join(",")+m;var n=function(){if(h.toplist_fetched){return}d.io(h.CONF.get("XHR").GET_FRIENDS_STORY+k,{method:"GET",on:{success:function(s,q){var r=unescape(q.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,""));try{r=d.JSON.parse(r)}catch(p){h.log("invalid json data")}if((202===r.info.http_code)&&(e<2)){setTimeout(n,2000);e++}else{if(r.status===true){f(r,j,this)}else{e=0;h.log("error in trying to process json of friends per story");return}}},failure:function(q,p){h.log("error in fetching friends for story")}},context:h})};n();f=function(p,u,w){var t=w,r=[],o,s,v;for(o in p.data){s=p.data[o].friends;v=p.data[o].me;l[o]=p.data[o];if(v){r[v.fbid]=v.fbid}else{if(u.fn==="article"){a.setTimeout(function(){FB.api("/me/permissions",function(x){if(x.data[0].publish_actions){t.publish_reads([t])}})},2500)}}if(s&&s.length>0){for(var q=0;q<s.length;q++){r[s[q].fbid]=s[q].fbid}}}t.log(l);t.fetch_names_from_FB(u,l,r)}},render_activity_HTML:function(e,D,h){var F=this;switch(e.fn){case"article":if(this.CONF.get("page_type")=="slideshow"){return}var g=D[e.uuids[0]];var p=g.me?1:0;var N=p?g.me.fbid:0;var k=p?F.unames["uid_"+N]:"";var w=p?g.total-1:g.total;var E=(g.friends.length>0)?g.friends[0].fbid:null;var K=F.unames["uid_"+E]?F.unames["uid_"+E]:"";var M=function(O,j,P){var R="";var y="";P=="bar"?R=2:R=3;if(O>=R){y=(P=="bar")?2:3}else{y=O}var S="";var Q="";for(var x=0;x<y;x++){if(F.unames["uid_"+g.friends[x].fbid]!==null){Q+='<a href="#"><img src="http://graph.facebook.com/'+g.friends[x].fbid+'/picture" width="32" height="32" alt="'+F.unames["uid_"+g.friends[x].fbid]+'"userid="'+g.friends[x].fbid+'" data=\'{"username":"'+F.unames["uid_"+g.friends[x].fbid]+'","userid":"'+g.friends[x].fbid+'"}\'"username="'+F.unames["uid_"+g.friends[x].fbid]+'"></a>'}}if((O<2&&j&&P=="bar")||(O<3&&j&&P!="bar")){S+='<a href="#"><img src="http://graph.facebook.com/'+N+'/picture" width="32" height="32" alt="'+k+'"/userid="'+N+'" username="'+k+'" data=\'{"username":"'+k+'","userid":"'+N+"\"}'></a>"}return'<div class="ysc-thumb img">'+Q+S+"</div>"};var I=0;var C=p?'<a href="#" data=\'{"username":"'+k+'","userid":"'+N+"\"}'>"+F.getTranslation(F.l10n.YOU)+"</a>":"";var B="";if((p&&E&&(w-1)==0)){B=this.getTranslation(this.l10n.AND)}else{if((p&&E&&(w-1)>0)){B=", "}}var o=E?'<a href="#" userid="'+E+'" data=\'{"username":"'+K+'","userid":"'+E+"\"}'>"+K+"</a> ":"";var f="";if(w-1==1){f=this.getTranslation(this.l10n.AND_ONE_OTHER)}else{if(w-1>1){f=this.getTranslation(this.l10n.AND_OTHERS,"",[(w-1)+""])}}var n="";if(p&&!E){n=this.getTranslation(this.l10n.READ_ACTIVITY_YOU,"",[C])}else{if((p&&E)||(g.friends.length>1)){n=this.getTranslation(this.l10n.READ_ACTIVITY,"",[C,B,o,f])}else{if(!p&&E){n=this.getTranslation(this.l10n.READ_ACTIVITY_FRIEND,"",[o])}}}var r=d.Node.create('<div class="sc-art-summary ysc-active ysc-single-block"><div class="ysc-name"></div></div>');r.get("firstChild").setContent(M(w,p,"bar")+"<p>"+n+"</p>");if(n==""){I=1}if(!I){this.notifyContent=M(w,p)+'<div class="ysc-name"><p>'+n+"</p></div>"}if(C==""){this.youRead=0}else{this.youRead=1}var s=this.art_content.one(".bd");var q=this.art_content.all(".bd p");if(!I){s.addClass("ysc-show");for(var H=0;H<q.size();H++){if(q.item(H).get("innerHTML")!==""){d.once("contentready",function(){q.item(H).insert(r,"before");J()},["body"]);break}}}var J=function(){s.delegate("click",function(x){x.preventDefault();if(x.target.hasAttribute("data")){var j=F.getUserData(x);var i=x.target.hasAttribute("width")?"thumb":"user";F.fire_click_beacon({csrcpvid:F.CONF.get("csrcpvid"),_S:F.pagedata.spaceid,sec:"miniactv",itc:"1",slk:i,axid:j.userid});F.run_lightweight(x)}},".ysc-single-block")};break;case"toplist":if(this.CONF.get("optin_status")!=="true"){return}var t=[],m;for(m in D){if(D[m]["total"]>0){t[t.length]=m}}for(var H=0,G=t.length-1;H<G;H++){var A=t[H],z=t[H+1];if(D[A].total<D[z].total){t[H]=z;t[H+1]=A}}if(t.length>0){this.mod_toplist.all(".img").addClass("ysc-replaced");if(t.length>2){t=t.slice(0,2)}this.log("top 2 articles:"+t)}this.mod_toplist.one(".bd").addClass("ysc-show");var l=this.mod_toplist.all(".ysc-item");var L=function(P){var U=l.item(P).ancestor("li");var x=D[e.uuids[P]];if(U.one(".ysc-thumb")&&U.one(".ysc-content")){F.log("toplist already executed");return}if(x){var x=D[e.uuids[P]];var Q=x.me?1:0;var ac=Q?x.me.fbid:0;var y=Q?F.unames["uid_"+ac].replace(/'/g,"&#39;"):"";var T=Q?x.total-1:x.total;var X=(x.friends.length>0)?x.friends[0].fbid:null;var aa=F.unames["uid_"+X]?F.unames["uid_"+X].replace(/'/g,"&#39;"):F.getTranslation(F.l10n.YOUR_FRIEND);var i='<div class="ysc-active ysc-thumb img"><img src="http://graph.facebook.com/'+(X?X:ac)+'/picture" width="50" height="50" alt="'+(X?aa:y)+'" userid="'+(X?X:ac)+'" username="'+(X?aa:y)+'" data=\'{"username":"'+(X?aa:y)+'","userid":"'+(X?X:ac)+"\"}'></div>";var W=Q?'<a href="#" data=\'{"username":"'+y+'","userid":"'+ac+"\"}'>"+F.getTranslation(F.l10n.YOU)+"</a>":"";var V="";if((Q&&X&&(T-1)==0)){V=F.getTranslation(F.l10n.AND)}else{if((Q&&X&&(T-1)>0)){V=", "}}var O=X?'<a href="#" class="js-wait" data=\'{"username":"'+aa+'","userid":"'+X+"\"}'>"+aa+"</a>":"";var j="";if(T-1==1){j=F.getTranslation(F.l10n.AND_ONE_OTHER)}else{if(T-1>1){j=F.getTranslation(F.l10n.AND_OTHERS,"",[(T-1)+""])}}var R="";if(Q&&!X){R=F.getTranslation(F.l10n.READ_ACTIVITY_YOU,"",[W])}else{if((Q&&X)||(x.friends.length>1)){R=F.getTranslation(F.l10n.READ_ACTIVITY,"",[W,V,O,j])}else{if(!Q&&X){R=F.getTranslation(F.l10n.READ_ACTIVITY_FRIEND,"",[O])}}}var S=d.Node.create('<div class="ysc-active ysc-content"></div>');S.setContent('<p class="read-by">'+R+".</p>");var Y=U.one(".content");Y.append(S);var Z=U.one(".img");if(Z){Z.addClass("ysc-replaced")}Y.get("parentNode").prepend(i);var ab="";if(X!==null){ab=x.friends[0].thumb_ylt}else{if(Q){ab=x.me.thumb_ylt}}U.delegate("click",function(){new Image().src=ab},".img")}};for(var H=0,G=t.length;H<G;H++){for(var v=0,u=e.uuids.length;v<u;v++){if(t[H]===e.uuids[v]){L(v);break}}}this.toplist_fetched=true;d.after("ysc_toplist:names_ready",function(i){l.each(function(P,Q){var S=P.ancestor("li");if(S.one(".ysc-active")){var y=S.one(".js-wait"),x=d.JSON.parse(y.getAttribute("data")),T="uid_"+x.userid,O=F.unames[T];x.username=O;y.setAttribute("data",d.JSON.stringify(x));y.setContent(O);var j=S.one(".ysc-thumb img"),R=d.JSON.parse(j.getAttribute("data"));if(R.userid===x.userid){j.setAttribute("data",d.JSON.stringify(x));j.setContent(O)}}},F)});this.mod_toplist.delegate("click",function(i){i.preventDefault();F.run_lightweight(i)},".ysc-active img");this.mod_toplist.delegate("click",function(i){i.preventDefault();F.run_lightweight(i)},".ysc-active .read-by a");break;default:break}},run_newsfeed:function(){if(!this.top_story||!this.top_story.one(".hd ul")||typeof this.pagedata==="undefined"){this.log("top story module not init");return}var v=this;var q=this.top_story;var i=q.one(".hd");var f=q.one(".bd");if(i.one(".ysc-active")){if(this.CONF.get("optin_status")==="true"){i.replaceClass("ysc-hide","ysc-show");f.replaceClass("ysc-hide","ysc-show")}else{i.replaceClass("ysc-show","ysc-hide");f.replaceClass("ysc-show","ysc-hide")}return}if(this.CONF.get("optin_status")!=="true"||q.one(".ysc-active")){return}if(this.newsfeed_data==null){this.newsfeed_data={index_page:0,total_page:1,shown_total:0,page_text:null,page_prev:null,page_next:null,icon_prev:null,icon_next:null,page_size:15,url_next:"",url_prev:"",active_page:null};this.publish("ysc_newsfeed:names_ready",{emitFacade:true,broadcast:2})}var t=this.newsfeed_data.index_page,j=this.newsfeed_data.total_page,w=this.newsfeed_data.shown_total,k=this.newsfeed_data.page_text,m=this.newsfeed_data.page_prev,o=this.newsfeed_data.page_next,l=this.newsfeed_data.page_size,h=this.newsfeed_data.url_next,e=this.newsfeed_data.url_prev,g=this.newsfeed_data.active_page;var n="&user_id="+this.CONF.get("fbuid")+"&type=readactivity&limit="+l;var u="&space_id="+this.pagedata.spaceid+"&mid=MediaTopStory&section=MediaTopStory&network_source=fb&content_id="+this.pagedata.cid;var r=this.CONF.get("XHR").GET_FEED+n+u;var s=function(C,B){var C=C,B=B,y=0,F=0;if(C===""){if(!B){return}v.update_active_page({content:"",key:"newsfeed",step:B,parentnode:v.newsfeedlist,datasource:v.newsfeed_data});v.update_page_ui(v.newsfeed_data);v.replaceNames();return}if(B){v.show_loading_frame(v.newsfeedlist)}var D=function(J){v.enable_feedfocus=(w>5&&F>4)?true:false;if(v.enable_feedfocus){v.status_now.addClass("enable_focus")}var H=v.top_story;var K=H.one(".hd");var N=H.one(".bd");if(K.hasClass("ysc-show")){return}K.addClass("ysc-show");N.addClass("ysc-show");var L=H.one(".hd ul");var M=(L.all("li").size());var G=d.Node.create('<li class="ysc-active"><a class="sc-loaded yom-top-story-'+M+'" href="#">'+v.getTranslation(v.l10n.YOUR_FRIENDS)+"</a></li>");L.prepend(G);var I=d.Node.create('<div class="yom-top-story-content-'+M+' ysc-active hide"></div>');I.setContent(J);N.prepend(I);v.newsfeedlist=N.one(".list");v.newsfeed_data.active_page=v.newsfeedlist.one(".index-"+t);v.newsfeedlist.delegate("click",function(Q){Q.preventDefault();var P=v.getUserData(Q);v.fire_click_beacon({csrcpvid:v.CONF.get("csrcpvid"),_S:v.pagedata.spaceid,sec:"MediaTopStory",mid:"MediaTopStory",itc:"1",slk:"user",pos:P.pos,pkg:v.pagedata.cid,axid:P.userid});v.run_lightweight(Q)},".user a");v.newsfeedlist.delegate("click",function(Q){Q.preventDefault();var P=v.getUserData(Q);v.fire_click_beacon({csrcpvid:v.CONF.get("csrcpvid"),_S:v.pagedata.spaceid,sec:"MediaTopStory",mid:"MediaTopStory",itc:"1",slk:"thumb",pos:P.pos,pkg:v.pagedata.cid,axid:P.userid});v.run_lightweight(Q,v.constructor.superclass)},".ysc-thumb img");if(j>t+1){var O=N.one(".paginator");k=O.one(".page");m=O.one(".btn-prev-off");o=O.one(".btn-next");O.delegate("click",function(P){P.currentTarget.hasClass("btn-next")?v.fire_click_beacon({csrcpvid:v.CONF.get("csrcpvid"),_S:v.pagedata.spaceid,sec:"MediaTopStory",itc:"1",slk:"btn",ltxt:"ne"}):v.fire_click_beacon({csrcpvid:v.CONF.get("csrcpvid"),_S:v.pagedata.spaceid,sec:"MediaTopStory",itc:"1",slk:"btn",ltxt:"pr"});v.handle_page_click(P,C,"newsfeed")},"a");icon_prev=O.one(".icon-arrow-prev-2");icon_next=O.one(".icon-arrow-next-1");v.newsfeed_data.page_text=k;v.newsfeed_data.page_next=o;v.newsfeed_data.page_prev=m;v.newsfeed_data.icon_prev=icon_prev;v.newsfeed_data.icon_next=icon_next}d.fire("ysc_sharing:status_changed",{sharing:true,focus:v.enable_feedfocus});d.after("ysc_newsfeed:names_ready",function(P){v.replaceNames()},v)};var A=function(H,G){var I=v.newsfeedlist.one(".transition");v.update_loading_frame(I,"clear");v.update_active_page({content:H,key:"newsfeed",step:G,parentnode:v.newsfeedlist,datasource:v.newsfeed_data});v.update_page_ui(v.newsfeed_data)};var E=function(H){w=H.data.newsfeed.length;if(w<1){v.log("not enough newsfeed");return}t=(B)?t+B*1:t;j=(H.data.next==="")?j:j+1;h=(H.data.next==="")?"":"&until="+H.data.next.split("&until=")[1].split("&")[0];e=(H.data.prev==="")?"":"&since="+H.data.prev.split("&since=")[1].split("&")[0];v.newsfeed_data.total_page=j;v.newsfeed_data.shown_total=w;v.newsfeed_data.url_next=h;v.newsfeed_data.url_prev=e;var K={key:"newsfeed",userid:"",username:"",list:H.data.newsfeed,totalcount:H.data.total,pagesize:l,indexpage:t,totalpage:j};var J=v.render_history(K);var I={};for(var G=0;G<w;G++){var L=H.data.newsfeed[G]["fbid"];if(!I[L]){I[L]=L;F++}}if(B){A(J,B)}else{D(J)}p(H)};var z=function(){v.xhr_feed=d.io(C,{on:{success:function(J,I){var G=unescape(I.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,""));try{G=d.JSON.parse(G)}catch(H){this.log("invalid json data")}if((202===G.info.http_code)&&(y<2)){setTimeout(z,2000);y++}else{if(G.status===true){E(G)}else{y=0;v.log("error in trying to process json of friendsfeed");return}}},failure:function(H,G){this.log("error in fetching news feed")}},context:v})};z()};if((this.newsfeedlist&&this.newsfeedlist.one(".index-0"))||(this.xhr_feed&&this.xhr_feed.id>0&&this.xhr_feed.isInProgress())){return}this.fetchFeed=s;s(r,null);var x=function(){if(this.newsfeedlist.one(".active").hasClass("name-done")){return}var B=this,y=0,z=this.newsfeedlist.all(".active li"),A=z.size();z.each(function(I,F){var E=I.one(".user a"),D=I.one(".ysc-thumb img"),J=E.getAttribute("data"),H=d.JSON.parse(J),G="uid_"+H.userid,C=B.unames[G];if(C!==undefined){H.username=C;E.setAttribute("data",d.JSON.stringify(H));D.setAttribute("data",d.JSON.stringify(H));E.setContent(C);y++}if(y===A-1){this.newsfeedlist.one(".active").addClass("name-done")}},this)};this.replaceNames=x;var p=function(F){if(F.status!==true){v.log("error in fetching news feed");return}var z="newsfeed";if(F.data[z]&&(F.data[z]).length>0){var D=(F.data[z]).length;var E={};for(var B=0,A=D;B<A;B++){var y=(F.data[z][B]["fbid"])?(F.data[z][B]["fbid"]):(F.data[z][B]["collectionID"]);E[y]=y}var C={fn:"newsfeed"};v.fetch_names_from_FB(C,F,E)}else{v.log("no friends feeds for you, bah")}}},fetch_names_from_FB:function(n,e,h){var k=this,f=0,j=0,q,l=[],m={};for(q in h){l[l.length]=q}if(l.length>0){var p=l.length,g=0,o=FB.Data.query("SELECT uid, name FROM user WHERE uid IN ("+l.join(",")+")");FB.Data.waitOn([o],function(u){for(var t=0,s=o.value.length;t<s;t++){var v=o.value[t].uid,r=o.value[t].name;m[v]=r;k.unames["uid_"+v]=r}k.fire("ysc_"+n.fn+":names_ready");k.render_activity_HTML(n,e,m)})}else{this.log("no fids for names");this.toplist_fetched=true;return}},run_loginstyle:function(){var e=this;this.user_name.setContent(this.getTranslation(this.l10n.GREETING_LOGOUT));this.user_img.addClass("img_logout");this.user_img.setContent("");this.log_desc.setContent(this.getTranslation(this.l10n.MSG_PERSONALIZE,"",[this.get("property")])+' <a href="'+this.get("learnMorePath")+'">'+this.getTranslation(this.l10n.LINK_MORE)+"</a>");this.fb_login.setStyle("display","block");this.func_bar.setStyle("display","none");this.log_desc.delegate("click",function(g){var f={csrcpvid:e.CONF.get("csrcpvid"),_S:e.pagedata.spaceid,sec:"ido",itc:"0",slk:"more",ltxt:e.getTranslation(e.l10n.LINK_MORE)};g.target.setAttribute("href",e.get_track_link(g.target.get("href"),f));new Image().src=g.target.get("href")},"a");if(YAHOO.Media.Facebook.Session&&YAHOO.Media.Facebook.Session.status!="unknown"){if(this.fb_login){if(YAHOO.Media.Facebook.Session.status!="connected"){this.mod_login.one(".fb_login").replace('<div class="fb_login"><a href="#" role="button" class="fb-btn fb_button_medium"><span>'+this.getTranslation(this.l10n.MSG_LOGIN_FACEBOOK)+"</span></a></div>");this.fb_login.setStyle("display","block")}else{this.fb_login.setStyle("display","none")}}if(this.mod_login.one(".fb-btn")){this.mod_login.delegate("click",function(h){h.preventDefault();this.fire_click_beacon({csrcpvid:this.CONF.get("csrcpvid"),_S:this.pagedata.spaceid,sec:"ido",itc:"1",slk:"btn",ltxt:"Login with Facebook"});this.track_ywa("05",[18,"Detailed-Login"],1);var j=this.CONF.get("yahoo_id")==""?575:725;var g="left="+(window.screen.width-800)/2+",top="+(window.screen.height-j)/2;var i=null;i=window.open(this.CONF.get("signin_url")+"&so=0&perms=user_birthday,user_likes,email,publish_actions","membershipwindow","toolbar=no,statusbar=no,location=no,scrollbars=yes,resizable=yes,width=800,height="+j+","+g);var f=function(){var k="error";var l=/news\.[\w-\.]*yahoo.com/;try{k=i.location.host;if(k==window.location.host){i.close();window.location.href=window.location.href}else{setTimeout(f,500)}}catch(m){setTimeout(f,500)}return k};setTimeout(f,2000)},".fb-btn",this);this.mod_login.delegate("mousedown",function(f){f.preventDefault();f.currentTarget.addClass("fb-btn-click")},".fb-btn");this.mod_login.delegate("mouseup",function(f){f.preventDefault();f.currentTarget.removeClass("fb-btn-click")},".fb-btn")}}if(!this.id_connectfb_click){this.mod_login.delegate("click",function(f){var g=f.target;if(g.get("className")=="fb_button_text"){e.fire_click_beacon({csrcpvid:e.CONF.get("csrcpvid"),_S:e.pagedata.spaceid,sec:"ido",itc:"1",slk:"btn",ltxt:"Login with Facebook"});e.track_ywa("05",[18,"Detailed-Login"],1);e.id_connectfb_click=true}return},".fb_login")}},run_removeexp:function(){if(typeof this.getSession()!=="object"){return}var f=this,e=this.getSession().authResponse.userID;if(!this.removeexp){this.removeexp=new d.Overlay({bodyContent:'<div id="removeexp" class="removeexp"><div class="yom-mod"><div class="bd"><p class="exptitle">'+this.getTranslation(this.l10n.REMOVE_EXPERIENCE)+'</p><p class="expdesc">'+this.getTranslation(this.l10n.MSG_SURE_TO_REMOVE,"",[this.get("property")])+'.</p><div class="btn"><div class="btnremove"><a href="#" role="button">'+this.getTranslation(this.l10n.REMOVE)+'</a></div><div class="btncancel"><a href="#" role="button">'+this.getTranslation(this.l10n.CANCEL)+'</a></div></div></div></div></div><div class="wrapremoveexp"></div>',width:"550px",centered:true,zIndex:10000800});this.removeexp.render();this.removeexpbd=this.body_node.one("#removeexp .bd")}this.removeexp.set("centered",true);this.removeexp.show();this.removeexpbd.one(".btncancel a").on("click",function(g){g.preventDefault();f.removeexp.hide()});this.removeexpbd.one(".btnremove a").on("click",function(g){g.preventDefault();f.fire_click_beacon({csrcpvid:f.CONF.get("csrcpvid"),sec:"optout",itc:"1",slk:"btn",ltxt:"optout"});FB.api("/"+e+"/permissions","delete",function(i){var j,h=f.CONF.get("sc_crumb");if(!i){return}f.removeFBCookie();j=d.io("/_xhr/socialchrome/set_cookie/",{method:"POST",data:"method=no_experience&value=1&crumb="+encodeURIComponent(h),on:{success:function(l,k){f.removeexp.hide();setTimeout(function(){window.location.href=window.location.href},600)}}})})})},run_mgtacc:function(){if(typeof this.getSession()!=="object"){return}var f=this;if(!this.mgtacc){var e='<div class="logo"><div id="ylg" class="lgbx"><div class="ybdrtp"></div><div class="lghdtxt"><p>'+this.getTranslation(this.l10n.SIGN_YAHOO_AS)+':</p></div><div class="lgtxt" id="yct"><p><span class="unm shft" id="yid">'+this.CONF.get("yahoo_id")+'</span></p></div></div><div id="flg" class="lgbx"><div class="fbdrtp"></div><div class="lghdtxt"><p>'+this.getTranslation(this.l10n.SIGN_FB_AS)+':</p></div><div class="lgtxt" id="fct"><img src="http://graph.facebook.com/'+this.CONF.get("fbuid")+'/picture"><p><span class="unm">'+this.user_name.getContent()+'</span></p></div></div><div><div class="pimg"></div></div></div>';this.mgtacc=new d.Overlay({bodyContent:'<div id="mgtacc" class="mgtacc"><div class="yom-mod"><div class="bd"><p class="mgttitle">'+this.getTranslation(this.l10n.MANAGE_MY_ACCOUNT)+'</p><p class="mgtdesc">'+this.getTranslation(this.l10n.MSG_WE_CONNECT_ACCOUNT)+"</p>"+e+'<p class="mgtdesc">'+this.getTranslation(this.l10n.MSG_YOU_CAN_UNDO)+'.</p><div class="btn"><div class="btnundo"><a href="#" role="button">'+this.getTranslation(this.l10n.UNDO_CONNECTION)+'</a></div><div class="btncancel"><a href="#" role="button">'+this.getTranslation(this.l10n.CANCEL)+'</a></div></div></div></div></div><div class="wrapmgtacc"></div>',width:"580px",centered:true,zIndex:10000800});this.mgtacc.render();this.mgtaccbd=this.body_node.one("#mgtacc .bd")}this.removeexp.set("centered",true);this.mgtacc.show();this.mgtaccbd.one(".btncancel a").on("click",function(g){g.preventDefault();f.mgtacc.hide()});this.mgtaccbd.one(".btnundo a").on("click",function(i){i.preventDefault();var j,g=f.CONF.get("sc_crumb"),h=f.CONF.get("XHR").SET_UNLINK;j=d.io(h,{on:{success:function(o,m){var l=unescape(m.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,""));if(l!==""){var k=d.JSON.parse(l);if(k.status===true&&k.info.http_code=="200"){f.mgtacc.hide()}else{var n=window.location.href;window.location.href="https://login.yahoo.com/config/login?.intl="+f.CONF.get("intl")+"&.done="+n}}},failure:function(l,k){}}})})},fb_auth_login:function(h){var i=this;this.CONF.set("conv",0);if(h.response.authResponse&&!this.isInitFBSession){var f;this.isInitFBSession=true;this.CONF.set("initact","");var g="&network_source=fb&space_id="+this.pagedata.spaceid+"&content_id="+this.pagedata.cid;f=d.io(this.CONF.get("XHR").GET_USER+g,{on:{success:function(n,l){var k=unescape(l.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,"")),e;if(k!==""){var j=d.JSON.parse(k)}else{return}if(d.Lang.isValue(j.info.http_code)){if(j.info.http_code==421){this.CONF.set("conv",1);e=d.io(this.CONF.get("XHR").SET_USER,{on:{success:function(r,q){var p=unescape(q.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,""));if(p!==""){var o=d.JSON.parse(p);if(o.status===false&&d.Lang.isValue(o.data)){}else{if(o.status===true){if(this.activity_reading.getAttribute("value")=="true"){this.show_status("off")}else{this.show_status("on")}}}this.CONF.set("noexperience","true");this.status_changed();this.render_login()}}},method:"POST",data:d.JSON.stringify({optin_status:"true"}),context:i});return}else{if(j.info.http_code==406){this.CONF.set("signed_idp",0)}else{this.CONF.set("signed_idp",1);this.CONF.set("noexperience","false");this.CONF.set("NEWS_FEED","")}}}if(d.Lang.isValue(j.data)&&d.Lang.isValue(j.data.settings)&&j.data.settings!==null){if(d.Lang.isValue(j.data.settings.optin_status)&&j.data.settings.optin_status=="true"){this.show_status("on")}this.CONF.set("reminder",j.data.settings.reminder);if(d.Lang.isValue(j.data.settings.consent)&&j.data.settings.consent!==null){var m={};if(d.Lang.isValue(j.data.settings.consent.watch)){m.watch=j.data.settings.consent.watch;this.CONF.set("consent_status",m)}else{this.CONF.set("consent_status",null)}}}else{this.show_status("off")}this.status_changed();this.render_login()},failure:function(j,e){this.show_status("off");this.render_login()}},context:i})}else{this.render_logout()}},fb_auth_logout:function(f){if(f.response){this.set("isPreLoad",0);this.isInitFBSession=false;this.render_logout();d.fire("ysc_login:logout_facebook");this.restore_all()}},bind_loginbarevents:function(){var f=this;this.func_bar.delegate("click",this.on_loginbar_click,"li",this);this.mod_login.delegate("click",this.on_loginbar_click,".img",this);var e=function(h){if(!f.loginlayerbox){return}if(h.target){if(h.target.ancestor(".yom-socialchrome-login")||h.target.ancestor(".js-sub-act")||h.target.ancestor(".remind")){return}}if(f._readConn.id>=0&&f._readConn.isInProgress()){f._readConn.abort()}if(f._optConn.id>=0&&f._optConn.isInProgress()){f._optConn.abort()}f.loginlayerbox.removeClass("activity");f.loginlayerbox.removeClass("activity_reading");f.loginlayerbox.removeClass("options");var g=f.mod_login.one(".arrow-up");if(g!==null){g.replaceClass("arrow-up","arrow-down")}f.loginlayer.hide()};this.assign_hide_events("login_layer",e,this)},on_loginbar_click:function(m){m.preventDefault();if(m.target.get("parentNode").hasClass("socialchrome-logout")){return}var l=this;var f=m.target.get("parentNode").getAttribute("class");var k=false;if(f=="func_bar"){f=m.target.getAttribute("class")}if(m.currentTarget.hasClass("activity_reading")){f="activity_reading"}if(m.target.getAttribute("width")!==""||m.target.hasClass("fb_icon")){f="activity";k=true}var n=this.mod_login.one("."+f);var h=n.getXY();var j=d.Node.create('<div class="layer-sc-login yom-dialog yom-tooltip"></div>');var i=d.Node.create('<div class="header-wrap layer-wrap"><div></div></div>');var p=d.Node.create('<div class="login-layer-wrap wrap"></div>');if(!this.loginlayer){this.body_node.appendChild(j);this.loginlayer=new d.Overlay({headerContent:i,bodyContent:p,width:"150px",x:h[0],y:h[1]+15,zIndex:10000650});this.loginlayer.hide();this.loginlayer.render(j);this.loginlayerbox=p;this.loginlayerheader=j.one(".yui3-widget-hd")}if(this.loginlayerbox.hasClass(f)||f=="seperate"){this.loginlayerbox.removeClass(f);this.loginlayer.hide();var o=this.mod_login.one(".arrow-up");if(o!==null){o.replaceClass("arrow-up","arrow-down")}}else{this.loginlayerbox.removeClass("activity");this.loginlayerbox.removeClass("activity_reading");this.loginlayerbox.removeClass("options");this.loginlayerbox.addClass(f);switch(f){case"activity":if(!k){var g={csrcpvid:this.CONF.get("csrcpvid"),_S:this.pagedata.spaceid,sec:"idi",itc:"1",slk:"tab",ltxt:"activity"};this.fire_click_beacon(g)}this.show_activity(m,f,h[0],h[1]+2);break;case"activity_reading":this.show_reading(m,f,h[0],h[1]+2);break;case"options":this.show_options(m,f,h[0],h[1]+2);break;default:break}}},show_activity:function(z,j,E,D){var x=this;base=this.constructor.superclass;if(this._optConn.id>=0){if(this._optConn.isInProgress()){this._optConn.abort()}}this.loginlayer.hide();this.loginlayerheader.removeClass("read");this.loginlayerheader.removeClass("opt");this.loginlayerheader.addClass("act");this.loginlayer.set("width",537);if(YUI.namespace("Media").LANGDIR=="rtl"){this.loginlayer.set("xy",[E-205,D+13])}else{this.loginlayer.set("xy",[E-290,D+13])}this.loginlayerbox.all(".yom-mod").setStyle("display","none");var t=this.loginlayerheader.one(".layer-wrap");var B=this.func_bar.one("li.activity");if(t&&B){if(YUI.namespace("Media").LANGDIR=="rtl"){this.loginlayerheader.setStyle("left",(B.get("region").left)-Math.round(E-205)-15)}else{this.loginlayerheader.setStyle("left",(B.get("region").left)-Math.round(E-290)-15)}t.setStyle("width",B.get("clientWidth")+16)}if(base.activity_changed&&this.loginlayerbox.one(".js-sub-act")){(this.loginlayerbox.one(".js-sub-act")).remove();base.activity_changed=false}if(this.loginlayerbox.one(".js-sub-act")){this.loginlayerbox.one(".js-sub-act").setStyle("display","block")}else{var w=d.Node.create('<div class="yom-mod js-sub-act"><div class="bd menu_loading"></div></div>');var C=[];this.loginlayerbox.append(w);this.loginlayerbox.one(".js-sub-act").on("click",function(F){F.stopPropagation()})}this.loginlayerboxbd=this.loginlayerbox.one(".js-sub-act .bd");this.loginlayer.show();this.showArrow(j);var i=this.CONF.get("fbuid"),n=this.unames["uid_"+i];if(!this.self_data){this.self_data={index_page:0,total_page:1,shown_total:0,page_text:null,page_prev:null,page_next:null,icon_prev:null,icon_next:null,page_size:5,url_next:"",url_prev:"",active_page:null}}var s=this.self_data.index_page,k=this.self_data.total_page,y=this.self_data.shown_total,l=this.self_data.page_text,o=this.self_data.page_prev,q=this.self_data.page_next,u=this.self_data.icon_prev,v=this.self_data.icon_next,m=this.self_data.page_size,h=this.self_data.url_next,f=this.self_data.url_prev,g=this.self_data.active_page;var p=i+"&limit="+m+"&type="+this.action_type+"&section=idi-actvmnu&itc=0&network_source=fb&del_btn=true&space_id="+this.pagedata.spaceid+"&content_id="+this.pagedata.cid+"&general_title_length="+this.get("generalLength")+"&rating_title_length="+this.get("ratingLength")+"&video_title_length="+this.get("videoLength");var r=this.CONF.get("XHR").GET_ACTIVITY+p;var A=function(G,F){if(G===""){if(!F){return}x.update_active_page({content:"",key:"self",step:F,parentnode:x.loginlayerboxlist,datasource:x.self_data});x.update_page_ui(x.self_data);return}if(F){x.show_loading_frame(x.loginlayerboxlist)}var e=function(K){var N=x.self_data.index_page;var I=K.target.getAttribute("value");var J=C[N].data.updates[I];x.log("savedData and delTarget");x.log(C);x.log(J);var Q=J;Q.visible="false";delete Q.SCL;delete Q.title_ylt;if(Q["obj:facebook"]===undefined){if(!Q["obj:rating"]){Q["obj:facebook"]={id:"-1"}}}x.log(d.JSON.stringify(Q));var L=K.target;var O=K.target.ancestor("li");var H=J.link+"";H=H.substring(0,H.indexOf(";"));x.fire_click_beacon({csrcpvid:x.CONF.get("csrcpvid"),_S:x.pagedata.spaceid,sec:"idi-actvmnu",itc:"1",slk:"btn",ltxt:"rm",pos:(parseInt(I,10)+1)});var M="&user_id="+x.CONF.get("fbuid")+"&action=sc-rmread&content_id="+J.suid+"&space_id="+x.pagedata.spaceid+"&network_source=fb";var P=d.io(x.CONF.get("XHR").SET_ACTIVITY+M,{method:"POST",data:d.JSON.stringify(Q),on:{success:function(U,T){var R=unescape(T.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,""));try{R=d.JSON.parse(R)}catch(S){x.log("invalid json data")}O.addClass("deleted");O.one(".ts").remove();O.one(".rmlist").remove();if(R.status!==true||(R.info.http_code!="200"&&R.info.http_code!="204")){x.log("article delete failed");O.append('<em class="removed">'+x.getTranslation(x.l10n.ACTIVITY_REMOVE_FAIL)+"</em>")}else{O.append('<em class="removed">'+x.getTranslation(x.l10n.ACTIVITY_REMOVE)+"</em>")}},failure:function(S,R){O.addClass("deleted");O.one(".ts").remove();O.one(".rmlist").remove();O.append('<em class="removed">'+x.getTranslation(x.l10n.ACTIVITY_REMOVE_FAIL)+"</em>");x.log("post to CPG failed")}}})};x._readConn=d.io(G,{on:{success:function(I,K){var P=unescape(K.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,""));var R="";if(P!==""){try{R=d.JSON.parse(P)}catch(N){x.log("invalid json data");return}if(R.status!==true){x.log("ysc self_activity failed:"+R.message);if(F){var M=x.loginlayerboxbd.one(".transition");x.update_loading_frame(M,"err")}else{var L={key:"self",userid:i,username:n,list:[],totalcount:0,pagesize:m,indexpage:0,totalpage:1};var O=x.render_history(L);x.loginlayerboxbd.setContent(O);x.loginlayerboxbd.removeClass("menu_loading")}return}var H=function(T){x.loginlayerboxbd.setContent(T);x.loginlayerboxlist=x.loginlayerboxbd.one(".list");x.self_data.active_page=x.loginlayerboxlist.one(".index-"+s);x.loginlayerboxbd.delegate("click",e,".rmlist");if(k>s+1){var V=x.loginlayerboxbd.one(".paginator");l=V.one(".page");o=V.one(".btn-prev-off");q=V.one(".btn-next");V.on("click",x.handle_page_click,x,G,"self");u=V.one(".icon-arrow-prev-2");v=V.one(".icon-arrow-next-1");x.self_data.page_text=l;x.self_data.page_next=q;x.self_data.page_prev=o;x.self_data.icon_next=v;x.self_data.icon_prev=u;var S={csrcpvid:x.CONF.get("csrcpvid"),_S:x.pagedata.spaceid,sec:"idi-actvmnu",itc:"1",slk:"btn"};o.on("click",function(W){S.ltxt="pr";x.fire_click_beacon(S)});q.on("click",function(W){S.ltxt="ne";x.fire_click_beacon(S)})}var U=function(Z){Z.preventDefault();var W="thumb",Y=Z.currentTarget;if(Y.hasClass("user_name")){W="user"}var X={csrcpvid:x.CONF.get("csrcpvid"),_S:x.pagedata.spaceid,itc:"0",sec:"idi-actvmnu",slk:W,axid:x.CONF.get("fbuid")};x.fire_click_beacon(X);setTimeout(function(){window.location.href=Y.get("href")},500)};x.loginlayerboxbd.delegate("click",U,".header .user_pic");x.loginlayerboxbd.delegate("click",U,".header .user_name")};var J=function(T,S){var U=x.loginlayerboxlist.one(".transition");x.update_loading_frame(U,"clear");x.update_active_page({content:T,key:"self",step:S,parentnode:x.loginlayerboxlist,datasource:x.self_data});x.update_page_ui(x.self_data)};var Q=function(){s=(F)?s+F*1:s;y=R.data.updates.length;k=(R.data.next==="")?k:k+1;h=(R.data.next==="")?"":"&until="+R.data.next.split("&until=")[1].split("&")[0];f=(R.data.prev==="")?"":"&since="+R.data.prev.split("&since=")[1].split("&")[0];x.self_data.total_page=k;x.self_data.shown_total=y;x.self_data.url_next=h;x.self_data.url_prev=f;var T={key:"self",userid:i,username:n,list:R.data.updates,totalcount:R.data.total,pagesize:m,indexpage:s,totalpage:k};var S=x.render_history(T);if(F){J(S,F)}else{H(S)}x.loginlayerboxbd.removeClass("menu_loading")};C.push(R);Q()}},failure:function(L,H){if(F){var K=x.loginlayerboxbd.one(".transition");x.update_loading_frame(K,"err")}else{var J={key:"self",userid:i,username:n,list:[],totalcount:0,pagesize:m,indexpage:0,totalpage:1};var I=x.render_history(J);x.loginlayerboxbd.setContent(I);x.loginlayerboxbd.removeClass("menu_loading")}}}})};if(this.loginlayerbox.one(".index-0")){return}this.fetchSelfActivity=A;A(r,null)},show_reading:function(o,f,p,m){var l=this;if(this._readConn.id>=0){if(this._readConn.isInProgress()){this._readConn.abort()}}if(this._optConn.id>=0){if(this._optConn.isInProgress()){this._optConn.abort()}}var i={csrcpvid:this.CONF.get("csrcpvid"),_S:this.pagedata.spaceid,sec:"idi",itc:"1",slk:"tab",ltxt:"sharing"};this.fire_click_beacon(i);this.loginlayer.hide();this.loginlayerheader.removeClass("act");this.loginlayerheader.removeClass("opt");this.loginlayerheader.addClass("read");this.loginlayerbox.all(".yom-mod").setStyle("display","none");var n=this.getTranslation(this.l10n.TURN_SOCIAL_OFF);var q="turnoff";if(this.activity_reading.getAttribute("value")=="false"){n=this.getTranslation(this.l10n.TURN_SOCIAL_ON);q="turnon"}if(this.loginlayerbox.one(".js-sub-read")){var k='<a href="#" role="button">'+n+"</a>";this.loginlayerbox.one(".js-sub-read .change_status").setContent(k);this.loginlayerbox.one(".js-sub-read").setStyle("display","block")}else{var h=d.Node.create('<div class="yom-mod js-sub-read"><div class="bd"><li class="change_status"><a href="#" role="button">'+n+'</a></li><li class="remind"><input type="checkbox" id="remind_share" class="remind_share" value="1"><a href="#" role ="button" class="remind_me">'+this.getTranslation(this.l10n.REMIND_ME)+"</a></li></div></div>");this.loginlayerbox.append(h);j()}d.once("click",function(s){s.preventDefault();var r={csrcpvid:l.CONF.get("csrcpvid"),_S:l.pagedata.spaceid,sec:"idi-sh",itc:"1",slk:"toggle",ltxt:q};l.fire_click_beacon(r)},this.loginlayerbox.one(".change_status"));this.loginlayer.set("width",177);this.loginlayer.set("xy",[p-15,m+13]);var g=this.loginlayerheader.one(".layer-wrap");if(g){this.loginlayerheader.setStyle("left",0);g.setStyle("width",o.currentTarget.get("clientWidth")+16)}this.CONF.get("reminder")=="true"?document.getElementById("remind_share").checked=true:document.getElementById("remind_share").checked=false;function j(){d.delegate("click",function(r){r.preventDefault();l.start_sharing()},".change_status","a",this,true);l.loginlayerbox.one(".remind_share").on("click",function(u){var t;var s=String(document.getElementById("remind_share").checked);if(s=="true"){t={reminder:"true"};l.fire_click_beacon({csrcpvid:l.CONF.get("csrcpvid"),_S:l.pagedata.spaceid,sec:"idi-sh",itc:"1",slk:"chkbox",ltxt:"rmdron"})}else{t={reminder:"false"};l.fire_click_beacon({csrcpvid:l.CONF.get("csrcpvid"),_S:l.pagedata.spaceid,sec:"idi-sh",itc:"1",slk:"chkbox",ltxt:"rmdroff"})}var r=d.io(l.CONF.get("XHR.SET_USER"),{method:"POST",data:d.JSON.stringify(t),on:{success:function(x,w){l.CONF.set("reminder",s);var v=unescape(w.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,""));if(v!==""){var e=d.JSON.parse(v);if(e.status===false&&!d.Lang.isUndefined(e.info)&&d.Lang.isValue(e.info.status)){if(e.info.status=="406"){l.idp_check("optin")}}}l.log("post to CPG done")},failure:function(v,e){l.log("post to CPG failed")}},context:l})});l.loginlayerbox.one(".remind_me").on("click",function(u){u.preventDefault();var t;var s=String(document.getElementById("remind_share").checked);if(s=="true"){t={reminder:"false"};document.getElementById("remind_share").checked=false;s="false"}else{t={reminder:"true"};document.getElementById("remind_share").checked=true;s="true"}if(s=="true"){l.fire_click_beacon({csrcpvid:l.CONF.get("csrcpvid"),_S:l.pagedata.spaceid,sec:"idi-sh",itc:"1",slk:"chkbox",ltxt:"rmdron"})}else{l.fire_click_beacon({csrcpvid:l.CONF.get("csrcpvid"),_S:l.pagedata.spaceid,sec:"idi-sh",itc:"1",slk:"chkbox",ltxt:"rmdroff"})}var r=d.io(l.CONF.get("XHR.SET_USER"),{method:"POST",data:d.JSON.stringify(t),on:{success:function(x,w){l.CONF.set("reminder",s);var v=unescape(w.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,""));if(v!==""){var e=d.JSON.parse(v);if(e.status===false&&!d.Lang.isUndefined(e.info)&&d.Lang.isValue(e.info.status)){if(e.info.status=="406"){l.idp_check("optin")}}}l.log("post to CPG done")},failure:function(v,e){l.log("post to CPG failed")}},context:l})})}this.loginlayer.show();this.showArrow(f)},show_options:function(m,f,o,l){var k=this;if(this._readConn.id>=0){if(this._readConn.isInProgress()){this._readConn.abort()}}var i={csrcpvid:this.CONF.get("csrcpvid"),_S:this.pagedata.spaceid,sec:"idi",itc:"1",slk:"tab",ltxt:"options"},h,n;this.fire_click_beacon(i);this.loginlayer.hide();this.loginlayerheader.removeClass("act");this.loginlayerheader.removeClass("read");this.loginlayerheader.addClass("opt");this.loginlayerbox.all(".yom-mod").setStyle("display","none");function p(){var u=k.loginlayerbox.one(".yom-mod .bd .user_guide a");var e=k.loginlayerbox.one(".yom-mod .bd .report_guide a");var t=k.loginlayerbox.one(".yom-mod .bd .remove_guide a");var r=k.loginlayerbox.one(".yom-mod .bd .invite_guide a");var q=k.loginlayerbox.one(".yom-mod .bd .manage_guide a");var s=k.loginlayerbox.one(".yom-mod .bd .fb_logout");u.on("click",function(w){w.preventDefault();var v={csrcpvid:k.CONF.get("csrcpvid"),_S:k.pagedata.spaceid,sec:"idi-optn",itc:"0",slk:"more",ltxt:u.getContent()};window.location.href=k.get_track_link(u.get("href"),v)});e.on("click",function(w){w.preventDefault();var v={csrcpvid:k.CONF.get("csrcpvid"),_S:k.pagedata.spaceid,sec:"idi-optn",itc:"0",slk:"problem",ltxt:e.getContent()};window.location.href=k.get_track_link(e.get("href"),v)});t.on("click",function(v){v.preventDefault();k.fire_click_beacon({csrcpvid:k.CONF.get("csrcpvid"),_S:k.pagedata.spaceid,sec:"idi-optn",itc:"1",slk:"optout",ltxt:k.getTranslation(k.l10n.REMOVE_EXPERIENCE)});k.run_removeexp(v)});r.on("click",function(v){v.halt();k.hide_other_layers("invite_panel",k);k.showArrow(f);k.fire_click_beacon({csrcpvid:k.CONF.get("csrcpvid"),_S:k.pagedata.spaceid,sec:"idi-optn",itc:"1",slk:"invite",ltxt:k.getTranslation(k.l10n.INVITE_FRIENDS)});k.display_invite_panel(k.get("property"),k.get("learnMorePath"))});if(q){q.on("click",function(v){v.preventDefault();k.fire_click_beacon({csrcpvid:k.CONF.get("csrcpvid"),_S:k.pagedata.spaceid,sec:"idi-optn",itc:"1",slk:"manage",ltxt:k.getTranslation(k.l10n.MANAGE_MY_ACCOUNT)});k.run_mgtacc(v)})}s.on("click",function(w){w.preventDefault();var v={csrcpvid:k.CONF.get("csrcpvid"),_S:k.pagedata.spaceid,sec:"idi-optn",itc:"1",slk:"signout",ltxt:k.getTranslation(k.l10n.NOT_YOU_LOGOUT)};k.fire_click_beacon(v);k.loginlayerbox.setContent("");k.showArrow(f);FB.logout();tid=a.setTimeout(function(){k.fb_login.setStyle("display","block")},2000);if(k.loginlayer){k.loginlayer.hide()}});k.loginlayerbox.one(".js-sub-opt a").on("click",function(v){k.loginlayer.hide();k.showArrow(f)})}if(this.loginlayerbox.one(".js-sub-opt")){this.loginlayerbox.one(".js-sub-opt").setStyle("display","block")}else{h=d.Node.create('<div class="yom-mod js-sub-opt"><div class="bd menu_loading"></div></div>');this.loginlayerbox.append(h);this._optConn=d.io(k.CONF.get("XHR").GET_USERLINK,{on:{success:function(s,r){var q=unescape(r.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,""));if(q!==""){var e=d.JSON.parse(q);if(!d.Lang.isUndefined(e.info)&&d.Lang.isValue(e.info.http_code)&&e.info.http_code=="200"){n='<div class="yom-mod js-sub-opt"><div class="bd"><li class="user_guide"><a href="'+this.get("learnMorePath")+'">'+this.getTranslation(this.l10n.LEARN_MORE)+'</a></li><li class="invite_guide"><a href="#" role="button">'+this.getTranslation(this.l10n.INVITE_FRIENDS)+'</a></li><li class="report_guide"><a href="'+this.get("helpPath")+'">'+this.getTranslation(this.l10n.REPORT_PROBLEM)+'</a></li><li id="fb_logout" class="fb_logout"><a href="#" role="button">'+this.getTranslation(this.l10n.NOT_YOU_LOGOUT)+'</a></li><li class="remove_guide"><a href="#" role="button">'+this.getTranslation(this.l10n.REMOVE_EXPERIENCE)+'</a></li><li class="manage_guide"><a href="#" role="button">'+this.getTranslation(this.l10n.MANAGE_MY_ACCOUNT)+"</a></li></div></div>";k.loginlayerbox.one(".js-sub-opt").replace(n)}else{n='<div class="yom-mod js-sub-opt"><div class="bd"><li class="user_guide"><a href="'+this.get("learnMorePath")+'">'+this.getTranslation(this.l10n.LEARN_MORE)+'</a></li><li class="invite_guide"><a href="#" role="button">'+this.getTranslation(this.l10n.INVITE_FRIENDS)+'</a></li><li class="report_guide"><a href="'+this.get("helpPath")+'">'+this.getTranslation(this.l10n.REPORT_PROBLEM)+'</a></li><li id="fb_logout" class="fb_logout"><a href="#" role="button">'+this.getTranslation(this.l10n.NOT_YOU_LOGOUT)+'</a></li><li class="remove_guide"><a href="#" role="button">'+this.getTranslation(this.l10n.REMOVE_EXPERIENCE)+"</a></li></div></div>";k.loginlayerbox.one(".js-sub-opt").replace(n)}}p()},failure:function(q,e){n='<div class="yom-mod js-sub-opt"><div class="bd"><li class="user_guide"><a href="'+this.get("learnMorePath")+'">'+this.getTranslation(this.l10n.LEARN_MORE)+'</a></li><li class="invite_guide"><a href="#" role="button">'+this.getTranslation(this.l10n.INVITE_FRIENDS)+'</a></li><li class="report_guide"><a href="'+this.get("helpPath")+'">'+this.getTranslation(this.l10n.REPORT_PROBLEM)+'</a></li><li id="fb_logout" class="fb_logout"><a href="#" role="button">'+this.getTranslation(this.l10n.NOT_YOU_LOGOUT)+'</a></li><li class="remove_guide"><a href="#" role="button">'+this.getTranslation(this.l10n.REMOVE_EXPERIENCE)+"</a></li></div></div>";k.loginlayerbox.one(".js-sub-opt").replace(n);k.loginlayerbox.one(".js-sub-opt").setStyle("display","none");p()}},context:k})}this.loginlayer.set("width",207);var j=207-(m.currentTarget.get("clientWidth")+29);if(YUI.namespace("Media").LANGDIR=="rtl"){this.loginlayer.set("xy",[o-15,l+13]);j=0}else{this.loginlayer.set("xy",[o-138,l+13])}var g=this.loginlayerheader.one(".layer-wrap");if(g){this.loginlayerheader.setStyle("left",j);g.setStyle("width",m.currentTarget.get("clientWidth")+16)}this.loginlayer.show();this.showArrow(f)},showArrow:function(f){var g=this.mod_login.one("."+f+" .arrow-down");var e=this.mod_login.all(".func_bar .arrow-up");if(e!==null){e.replaceClass("arrow-up","arrow-down")}if(g!==null){g.replaceClass("arrow-down","arrow-up")}},publish_reads:function(q){var k=q[0],p=this.pagedata;if(!this.post_type||!p){return}var j=this.CONF.get("fbuid")+"",l=p.cid+"",h=parseInt(new Date().getTime()/1000,10)+60*60*24*30+"",g=false,i=0;p.art_desc=p.art_desc.replace(/\"/gi,"");var o={visible:"true",collectionType:"fbid",collectionID:j,suid:p.cid,source:p.source,"class":"post",type:"readactivity",expireTime:h,title:p.art_title,link:p.art_url,pubDate:parseInt(new Date().getTime()/1000,10)+"","obj:article":{id:p.cid,url:p.art_url,title:p.art_title,description:p.art_desc}};var f=(this.CONF.get("noexperience")=="true")?1:0;var n=1;var m="&alink="+f+"&user_id="+this.CONF.get("fbuid")+"&action=sc-read&content_id="+p.cid+"&space_id="+p.spaceid+"&network_source=fb";if(this.CONF.get("rf")!==""){m+="&rf="+this.CONF.get("rf")}var e=function(t,s){if(s<=3){var r=d.io(t.CONF.get("XHR").SET_ACTIVITY+m+"&pc="+s,{method:"POST",data:d.JSON.stringify(o),on:{success:function(x,w){var u=unescape(w.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,""));try{u=d.JSON.parse(u)}catch(v){t.log("invalid json data");return}if(u.status){t.shared=true;t.fbpostid=u.info.fbpostid;t.linked=(d.Lang.isValue(u.info.linked))?u.info.linked:0;if(((t.CONF.get("reminder")=="true")&&(t.post_type))||((t.CONF.get("noexperience")=="true")&&(t.post_type))||(d.Lang.isValue(u.info.firstpost)&&u.info.firstpost==1)){if(t.isInitFBSession){t.run_notify(t)}}t.activity_changed=true;t.CONF.set("rf","")}else{s++;e(t,s)}},failure:function(v,u){s++;e(t,s)}},context:t})}};e(k,n)},status_changed:function(){var f=(this.CONF.get("optin_status")==="true")?true:false;var e=f&&this.enable_feedfocus;d.fire("ysc_sharing:status_changed",{sharing:f,focus:e});this.run_newsfeed();this.render_toplist()},register_nodes:function(){this.mod_login=d.one("#"+this.get("modId"));this.user_name=this.mod_login.one(".user_name");this.user_img=this.mod_login.one(".img");this.log_desc=this.mod_login.one(".log_desc");this.art_title=d.one(".yom-art-hd .bd .headline");this._readConn="";this._optConn="";this.fb_login=this.mod_login.all(".fb_login");this.fb_logout=d.one(".layer-sc-login .fb_logout");this.activity_reading=this.mod_login.one(".activity_reading");this.share_light=this.mod_login.one("#light");this.func_bar=this.mod_login.one(".func_bar");this.status_now=this.mod_login.one(".status_now");this.status_next=this.mod_login.one(".status_next");this.status_switch=this.mod_login.one(".status_switch");this.body_node=d.one(document.body);this.mod_toplist=this.body_node.one(".yom-secondary .ysc")||this.body_node.one(".yom-secondary .yom-section-list");this.art_content=this.body_node.one(".yom-art-content");this.top_story=this.body_node.one(".yom-top-story");this.post_type=(this.CONF.get("page_type")=="story"||this.CONF.get("page_type")=="blogpost"||this.CONF.get("page_type")=="slideshow")?true:false;if(!this.mod_toplist){if(this.body_node.one(".yom-secondary .yom-list")){this.mod_toplist=this.body_node.one(".yom-secondary .yom-list").ancestor(".yom-mod")}}},restore_all:function(){this.toplist_fetched=false;this.self_data=null;this.newsfeedlist=null;this.newsfeed_data=null;this.body_node.all(".ysc-show").removeClass("ysc-show");this.body_node.all(".ysc-hide").removeClass("ysc-hide");this.body_node.all(".ysc-active").remove()}});d.namespace("Media.SocialChrome").Login=c},"0.1",{requires:["node","event","event-custom","io-base","io-xdr","overlay","json","media-ylc","media-socialchrome-base","cookie","intl"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.3.0
build: 3167
*/
YUI.add("dom-deprecated",function(a){a.mix(a.DOM,{children:function(d,b){var c=[];if(d){b=b||"*";c=a.Selector.query("> "+b,d);}return c;},firstByTag:function(b,c){var d;c=c||a.config.doc;if(b&&c.getElementsByTagName){d=c.getElementsByTagName(b)[0];}return d||null;},previous:function(b,d,c){return a.DOM.elementByAxis(b,"previousSibling",d,c);},next:function(b,d,c){return a.DOM.elementByAxis(b,"nextSibling",d,c);}});},"3.3.0",{requires:["dom-base"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.3.0
build: 3167
*/
YUI.add("node-deprecated",function(b){var a=b.Node;a.ATTRS.data={getter:function(){return this._dataVal;},setter:function(c){this._dataVal=c;return c;},value:null};b.get=a.get=function(){return a.one.apply(a,arguments);};b.mix(a.prototype,{query:function(c){return this.one(c);},queryAll:function(c){return this.all(c);},each:function(d,c){c=c||this;return d.call(c,this);},item:function(c){return this;},size:function(){return this._node?1:0;}});},"3.3.0",{requires:["node-base"]});